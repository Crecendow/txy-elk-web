!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.fishTopoLink=e():t.fishTopoLink=e()}(this,function(){return r={},i.m=n=[function(t,e,i){t.exports=i(1)},function(t,e,i){t.exports=i(2),i(97)},function(t,e,i){var a=i(3),n=(i(63),i(64),i(66)),r=i(11),o=i(67),s=i(4),h=(i(78),i(88)),l=i(92),c=i(91),u=i(85),f=(i(75),i(80)),d=i(93),p=i(94),g=(i(25),i(95));function v(t,e){this.id,this.group,this._dom=t,this.nowZoom=1,this.canScale=!0,this.eagleEye=!1,this.eagleEyeNode,this.initScaleRatio,this.operationNode,this.selectedNode=null,this.allNodes=[],this.linkConnectionManager=new h,this.lineOperationManager=new d(this.linkConnectionManager),this.minimap,this._layoutTimeout=null,this._zr=o.init(t,{renderer:e.renderer||"canvas",devicePixelRatio:e.devicePixelRatio}),this._api=new n(this),this.Shape=a,this.model=new u({}),this.model.set(c.ELEMENT_TYPE,"scene"),this.model.set(c.MODE,"normal"),this.options=e,r.call(this)}i(96);var y=v.prototype;y.getDom=function(){return this._dom},y.getZr=function(){return this._zr},y.getWidth=function(){return this._zr.getWidth()},y.getHeight=function(){return this._zr.getHeight()},y.isDisposed=function(){return this._disposed},y.dispose=function(){this._disposed=!0,this._zr.dispose(),x[this.id]=null},y.resize=function(){this._zr.resize()},y.init=function(){var r=this;function e(t){r.operationNode&&(r.group.remove(r.operationNode),r.operationNode=null);var e=t.target;e&&e.model&&p.isLink(e.model)||e&&e.connector instanceof f||(r.linkConnectionManager.clearSelectCon(),e&&e.operation&&1==e.operation||r.lineOperationManager.hideAllLineOperation())}this.group=new a.Group,this.group.isBg=!0,this._zr.add(this.group),this.linkConnectionManager.connectors=[],this._zr.on("mouseup",function(t){e(t)}),r._zr.on("globalout",function(t){e(t)}),this._zr.on("click",function(t){var e,i=t.target;if(i&&(e=i.model),!(i&&e&&p.isLink(e)||i&&e&&p.isNode(e))){var n={};n.event=t,n.type="click",(n.target=r)._api.trigger(n.type,n)}}),this.on("conPointsGroup:click",function(t){r.linkConnectionManager.bindOperation(t.lineNode)})},y.toJson=function(){return l.toJson(this.model,this.group)},y.fromJson=function(t){this.clear();var e=new u(t);this.setBackground(e.get(c.BACKGROUND));l.fromJson(this,this.group,e.get(c.CHILDS),!1,[])},y.clear=function(){for(var t=0;t<this.allNodes.length;t++){var e;e=this.allNodes.parent?this.allNodes.parent:this._zr,this.linkConnectionManager.deleteSelectCon(this.allNodes[t],e)}this.linkConnectionManager.connectorMap.clear(),this.allNodes=[],this.operationNode=null,this.selectedNode=null,this.linkConnectionManager.connectors=[],this._zr.clear(),this.group=new a.Group,this.group.isBg=!0,this._zr.add(this.group)},y.removeNode=function(t){var e=this;t.parent?t.parent.remove(t):e.group.remove(t);for(var i=0;i<e.allNodes.length;i++)t.id==e.allNodes[i].id&&e.allNodes.splice(i,1);this.linkConnectionManager.deleteSelectCon(t,e.group)},y._triggerDeleteEvent=function(t){var e={type:"delete"};e.target=t,this._api.trigger(e.type,e)},y._createConnectorByNodes=function(t,e,i){var n=this,r=this.linkConnectionManager.connectorCreate(t,e,{style:{lineType:i}},this._api);return t.parent&&e.parent?e.parent.add(r):this.group.add(r),r.on("mousedown",s.bind(function(){this.linkConnectionManager.connectorForbidEdit(!this.options.linkModify),this.isNode=!1},this)),r.on("dblclick",function(){n.options.isAllowEdit&&n.connectorEdit(this)}),this._triggerCreateEvent(r),r},y._triggerCreateEvent=function(t){var e={type:"create"};e.target=t,this._api.trigger(e.type,e)},y.addNode=function(t){this.group.add(t)},y.childOfName=function(t){for(var e=[],i=this.allNodes,n=this.linkConnectionManager.connectors,r=0;r<i.length;r++)i[r].model.get("options.name")&&i[r].model.get("options.name")==t?e.push(i[r]):i[r].model.get("userData.name")==t&&e.push(i[r]);for(var o=0;o<n.length;o++)n[o].model.get("options.name")&&n[o].model.get("options.name")==t?e.push(n[o]):n[o].model.get("userData.name")==t&&e.push(n[o]);return 1<e.length?e:e[0]},y.findElements=function(t,e){for(var i=this.allNodes,n=this.linkConnectionManager.connectors,r=[],o=0;o<i.length;o++){var s=i[o];t.call(e,s,o)&&r.push(s)}for(var a=0;a<n.length;a++){var h=n[a];t.call(e,h,a)&&r.push(h)}return r},y.setBackground=function(t){var e=this;if(t&&0<t.length)if(this.model.set(c.BACKGROUND,t),"#"==t.substr(0,1)||"rgba"==t.substr(0,4))if(document.createElement("canvas").getContext){var i=new this.Shape.Rect({shape:{width:e._zr.getWidth(),height:e._zr.getHeight()},style:{fill:t},cursor:"default",z:-1});e._zr.add(i)}else e._dom.style.backgroundColor=t;else if("gridLine"==t)this.gridLineGroup=new a.Group,this.gridLine(.2),this._zr.add(this.gridLineGroup);else if(document.createElement("canvas").getContext){var n=new this.Shape.Image({position:[0,0],scale:[1,1],style:{x:0,y:0,image:t,width:this._zr.getWidth(),height:this._zr.getHeight()},cursor:"default",z:-1});e._zr.add(n)}else e._dom.style.backgroundImage="url("+t+")",e._dom.style.backgroundRepeat="repeat"},y.gridLine=function(t){for(var e=parseInt(this.getWidth()/10),i=0;i<=e;i++){var n=new a.Line({shape:{x1:10*i,y1:0,x2:10*i,y2:this.getHeight()},style:{lineDash:[1],opacity:t},z:0,draggable:!1,cursor:"default"});this.gridLineGroup.add(n)}for(var r=parseInt(this.getHeight()/10,10),o=0;o<=r;o++){var s=new a.Line({shape:{x1:0,y1:10*o,x2:this.getWidth(),y2:10*o},style:{lineDash:[1],opacity:t},z:0,draggable:!1,cursor:"default"});this.gridLineGroup.add(s)}},y.createLinkOfPoints=function(t,e){var i=this;t.isEdit=!!this.options.linkModify;var n=this.linkConnectionManager.connectorCreateOfPoints(t,this._api);return n.model.set(c.USERDATA,s.clone(e)),n.on("dblclick",function(){void 0===this.options.text.isAllowEdit?i.options.isAllowEdit&&i.connectorEdit(this):this.options.text.isAllowEdit&&i.connectorEdit(this)}),n},y.toDataURL=function(t){return l.toDataURL(this._zr,t)},s.mixin(v,r);var m=new Date-0,x={},_="_fishTopoLink_instance_",b={version:"3.2.0",dependencies:{zrender:"3.0.4"},init:function(t,e){if(!t)throw new Error("Initialize failed: invalid dom.");e=e||{},s.defaults(e,{type:"flow",devicePixelRatio:1,linkModify:!1,isAllowEdit:!1});var i=new v(t,e);return i.init(),i.Link=p,i.id="ft_"+m++,x[i.id]=i,t.setAttribute&&t.setAttribute(_,i.id),i},getInstanceByDom:function(t){var e=t.getAttribute(_);return x[e]},dispose:function(t){var e;s.isDom(t)?e=b.getInstanceByDom(t):"string"==typeof t&&(e=x[t]),e instanceof b&&!e.isDisposed()&&e.dispose(),clearTimeout(this._layoutTimeout)},util:{}};b.util.initImagePool=g.initImagePool,s.each(["map","each","filter","indexOf","inherits","reduce","filter","bind","curry","isArray","isString","isObject","isFunction","extend"],function(t){b.util[t]=s[t]}),t.exports=b},function(t,e,i){"use strict";var u=i(4),f=i(5),r=Math.round,n=i(6),a=i(19),o=i(13),s=i(14),h=i(41),d=i(42),l={};function c(t){if(!t.__isHover){if(t.__hoverStlDirty){var e=t.style.stroke,i=t.style.fill,n=t.__hoverStl,r=a.lift;n.fill=n.fill||i&&(i instanceof h?i:r(i,-.1)),n.stroke=n.stroke||e&&(e instanceof h?e:r(e,-.1));var o={};for(var s in n)n.hasOwnProperty(s)&&(o[s]=t.style[s]);t.__normalStl=o,t.__hoverStlDirty=!1}t.setStyle(t.__hoverStl),t.z2+=1,t.__isHover=!0}}function p(t){if(t.__isHover){var e=t.__normalStl;e&&t.setStyle(e),t.z2-=1,t.__isHover=!1}}function g(t){"group"===t.type||"GroupNode"===t.type?t.traverse(function(t){"group"!==t.type&&c(t)}):c(t)}function v(t){"group"===t.type?t.traverse(function(t){"group"!==t.type&&p(t)}):p(t)}function y(t,e){t.__hoverStl=t.hoverStyle||e||{},t.__hoverStlDirty=!0}function m(){this.__isEmphasis||g(this)}function x(){this.__isEmphasis||v(this)}function _(){this.__isEmphasis=!0,g(this)}function b(){this.__isEmphasis=!1,v(this)}function w(t,e,i,n,r){var o=t?"Update":"",s=n&&n.getShallow("animationDuration"+o),a=n&&n.getShallow("animationEasing"+o);n&&n.getShallow("animation")?e.animateTo(i,s,a,r):(e.attr(i),r&&r())}l.Util=u,l.Group=i(43),l.Image=i(44),l.Text=i(45),l.textContain=i(25),l.Circle=i(46),l.Sector=i(47),l.Ring=i(50),l.Polygon=i(51),l.Polyline=i(55),l.Rect=i(56),l.Line=i(57),l.BezierCurve=i(58),l.Arc=i(59),l.LinearGradient=i(60),l.RadialGradient=i(61),l.BoundingRect=i(26),l.States=i(62),l.extendShape=function(t){return n.extend(t)},l.extendPath=function(t,e){return f.extendFromString(t,e)},l.makePath=function(t,e,i,n){var r=f.createFromString(t,e);d.call(r);var o=r.getBoundingRect();if(i){var s=o.width/o.height;if("center"===n){var a,h=i.height*s;a=h<=i.width?i.height:(h=i.width)/s;var l=i.x+i.width/2,c=i.y+i.height/2;i.x=l-h/2,i.y=c-a/2,i.width=h,i.height=a}this.resizePath(r,i)}return u.inherits(r,d),r},l.mergePath=f.mergePath,l.resizePath=function(t,e){if(t.applyTransform){var i=t.getBoundingRect().calculateTransform(e);t.applyTransform(i)}},l.subPixelOptimizeLine=function(t){var e=l.subPixelOptimize,i=t.shape,n=t.style.lineWidth;return r(2*i.x1)===r(2*i.x2)&&(i.x1=i.x2=e(i.x1,n,!0)),r(2*i.y1)===r(2*i.y2)&&(i.y1=i.y2=e(i.y1,n,!0)),t},l.subPixelOptimizeRect=function(t){var e=l.subPixelOptimize,i=t.shape,n=t.style.lineWidth,r=i.x,o=i.y,s=i.width,a=i.height;return i.x=e(i.x,n,!0),i.y=e(i.y,n,!0),i.width=Math.max(e(r+s,n,!1)-i.x,0===s?0:1),i.height=Math.max(e(o+a,n,!1)-i.y,0===a?0:1),t},l.subPixelOptimize=function(t,e,i){var n=r(2*t);return(n+r(e))%2==0?n/2:(n+(i?1:-1))/2},l.doEnterHover=g,l.doLeaveHover=v,l.setElementHoverStl=y,l.setHoverStyle=function(t,e){"group"===t.type?t.traverse(function(t){"group"!==t.type&&y(t,e)}):y(t,e),t.on("mouseover",m).on("mouseout",x),t.on("emphasis",_).on("normal",b)},l.setNormalStyle=function(t,e){if(t.__normalStl)for(var i in e)t.__normalStl.hasOwnProperty(i)&&(t.__normalStl[i]=e[i])},l.setText=function(t,e,i){var n=e.getShallow("position")||"inside",r=0<=n.indexOf("inside")?"white":i,o=e.getModel("textStyle");u.extend(t,{textDistance:e.getShallow("distance")||5,textFont:o.getFont(),textPosition:n,textFill:o.getTextColor()||r})},l.updateProps=u.curry(w,!0),l.initProps=u.curry(w,!1),l.getTransform=function(t,e){for(var i=o.identity([]);t&&t!==e;)o.mul(i,t.getLocalTransform(),i),t=t.parent;return i},l.applyTransform=function(t,e,i){return i&&(e=o.invert([],e)),s.applyTransform([],t,e)},l.transformDirection=function(t,e,i){var n=0===e[4]||0===e[5]||0===e[0]?1:Math.abs(2*e[4]/e[0]),r=0===e[4]||0===e[5]||0===e[2]?1:Math.abs(2*e[4]/e[2]),o=["left"===t?-n:"right"===t?n:0,"top"===t?-r:"bottom"===t?r:0];return o=l.applyTransform(o,e,i),Math.abs(o[0])>Math.abs(o[1])?0<o[0]?"right":"left":0<o[1]?"bottom":"top"},t.exports=l},function(t,e){var a={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1,"[object CanvasPattern]":1,"[object Image]":1,"[object Canvas]":1},h={"[object Int8Array]":1,"[object Uint8Array]":1,"[object Uint8ClampedArray]":1,"[object Int16Array]":1,"[object Uint16Array]":1,"[object Int32Array]":1,"[object Uint32Array]":1,"[object Float32Array]":1,"[object Float64Array]":1},l=Object.prototype.toString,i=Array.prototype,s=i.forEach,c=i.filter,n=i.slice,u=i.map,f=i.reduce,r={};function d(t){if(null==t||"object"!=typeof t)return t;var e=t,i=l.call(t);if("[object Array]"===i){e=[];for(var n=0,r=t.length;n<r;n++)e[n]=d(t[n])}else if(h[i]){var o=t.constructor;if(t.constructor.from)e=o.from(t);else{e=new o(t.length);for(n=0,r=t.length;n<r;n++)e[n]=d(t[n])}}else if(!a[i]&&!T(t)&&!w(t))for(var s in e={},t)t.hasOwnProperty(s)&&(e[s]=d(t[s]));return e}function p(t,e,i){if(!_(e)||!_(t))return i?d(e):t;for(var n in e)if(e.hasOwnProperty(n)){var r=t[n],o=e[n];!_(o)||!_(r)||x(o)||x(r)||w(o)||w(r)||b(o)||b(r)||T(o)||T(r)?!i&&n in t||(t[n]=d(e[n])):p(r,o,i)}return t}function o(t,e,i){for(var n in e)e.hasOwnProperty(n)&&(i?null!=e[n]:null==t[n])&&(t[n]=e[n]);return t}function g(){return r.createCanvas()}var v;function y(t,e,i){if(t&&e)if(t.forEach&&t.forEach===s)t.forEach(e,i);else if(t.length===+t.length)for(var n=0,r=t.length;n<r;n++)e.call(i,t[n],n,t);else for(var o in t)t.hasOwnProperty(o)&&e.call(i,t[o],o,t)}function m(t,e){var i=n.call(arguments,2);return function(){return t.apply(e,i.concat(n.call(arguments)))}}function x(t){return"[object Array]"===l.call(t)}function _(t){var e=typeof t;return"function"==e||!!t&&"object"==e}function b(t){return!!a[l.call(t)]}function w(t){return"object"==typeof t&&"number"==typeof t.nodeType&&"object"==typeof t.ownerDocument}r.createCanvas=function(){return document.createElement("canvas")};var P="__ec_primitive__";function T(t){return t[P]}function C(t){t&&y(t,function(t,e){this.set(e,t)},this)}var S="_ec_";C.prototype={constructor:C,get:function(t){return this[S+t]},set:function(t,e){return this[S+t]=e},each:function(t,e){for(var i in void 0!==e&&(t=m(t,e)),this)this.hasOwnProperty(i)&&t(this[i],i.slice(4))},removeKey:function(t){delete this[S+t]}},e.$override=function(t,e){r[t]=e},e.clone=d,e.merge=p,e.mergeAll=function(t,e){for(var i=t[0],n=1,r=t.length;n<r;n++)i=p(i,t[n],e);return i},e.extend=function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},e.defaults=o,e.createCanvas=g,e.getContext=function(){return v=v||g().getContext("2d")},e.indexOf=function(t,e){if(t){if(t.indexOf)return t.indexOf(e);for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i}return-1},e.inherits=function(t,e){var i=t.prototype;function n(){}for(var r in n.prototype=e.prototype,t.prototype=new n,i)t.prototype[r]=i[r];(t.prototype.constructor=t).superClass=e},e.mixin=function(t,e,i){o(t="prototype"in t?t.prototype:t,e="prototype"in e?e.prototype:e,i)},e.isArrayLike=function(t){if(t)return"string"!=typeof t&&"number"==typeof t.length},e.each=y,e.map=function(t,e,i){if(t&&e){if(t.map&&t.map===u)return t.map(e,i);for(var n=[],r=0,o=t.length;r<o;r++)n.push(e.call(i,t[r],r,t));return n}},e.reduce=function(t,e,i,n){if(t&&e){if(t.reduce&&t.reduce===f)return t.reduce(e,i,n);for(var r=0,o=t.length;r<o;r++)i=e.call(n,i,t[r],r,t);return i}},e.filter=function(t,e,i){if(t&&e){if(t.filter&&t.filter===c)return t.filter(e,i);for(var n=[],r=0,o=t.length;r<o;r++)e.call(i,t[r],r,t)&&n.push(t[r]);return n}},e.find=function(t,e,i){if(t&&e)for(var n=0,r=t.length;n<r;n++)if(e.call(i,t[n],n,t))return t[n]},e.bind=m,e.curry=function(t){var e=n.call(arguments,1);return function(){return t.apply(this,e.concat(n.call(arguments)))}},e.isArray=x,e.isFunction=function(t){return"function"==typeof t},e.isString=function(t){return"[object String]"===l.call(t)},e.isObject=_,e.isBuiltInObject=b,e.isDom=w,e.eqNaN=function(t){return t!=t},e.retrieve=function(t){for(var e=0,i=arguments.length;e<i;e++)if(null!=arguments[e])return arguments[e]},e.retrieve2=function(t,e){return null!=t?t:e},e.retrieve3=function(t,e,i){return null!=t?t:null!=e?e:i},e.slice=function(){return Function.call.apply(n,arguments)},e.normalizeCssArray=function(t){if("number"==typeof t)return[t,t,t,t];var e=t.length;return 2===e?[t[0],t[1],t[0],t[1]]:3===e?[t[0],t[1],t[2],t[1]]:t},e.assert=function(t,e){if(!t)throw new Error(e)},e.setAsPrimitive=function(t){t[P]=!0},e.isPrimitive=T,e.createHashMap=function(t){return new C(t)},e.noop=function(){}},function(t,e,i){function n(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}var a=i(6),S=i(29),r=i(40),M=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"],T=Math.sqrt,C=Math.sin,k=Math.cos,E=Math.PI,L=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(n(t)*n(e))},R=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(L(t,e))};function O(t,e,i,n,r,o,s,a,h,l,c){var u=h*(E/180),f=k(u)*(t-i)/2+C(u)*(e-n)/2,d=-1*C(u)*(t-i)/2+k(u)*(e-n)/2,p=f*f/(s*s)+d*d/(a*a);1<p&&(s*=T(p),a*=T(p));var g=(r===o?-1:1)*T((s*s*(a*a)-s*s*(d*d)-a*a*(f*f))/(s*s*(d*d)+a*a*(f*f)))||0,v=g*s*d/a,y=g*-a*f/s,m=(t+i)/2+k(u)*v-C(u)*y,x=(e+n)/2+C(u)*v+k(u)*y,_=R([1,0],[(f-v)/s,(d-y)/a]),b=[(f-v)/s,(d-y)/a],w=[(-1*f-v)/s,(-1*d-y)/a],P=R(b,w);L(b,w)<=-1&&(P=E),1<=L(b,w)&&(P=0),0===o&&0<P&&(P-=2*E),1===o&&P<0&&(P+=2*E),c.addData(l,m,x,s,a,_,P,u,o)}function o(t,e){var i=function(t){if(!t)return[];var e,i=t.replace(/-/g," -").replace(/  /g," ").replace(/ /g,",").replace(/,,/g,",");for(e=0;e<M.length;e++)i=i.replace(new RegExp(M[e],"g"),"|"+M[e]);var n,r=i.split("|"),o=0,s=0,a=new S,h=S.CMD;for(e=1;e<r.length;e++){var l,c=r[e],u=c.charAt(0),f=0,d=c.slice(1).replace(/e,-/g,"e-").split(",");0<d.length&&""===d[0]&&d.shift();for(var p=0;p<d.length;p++)d[p]=parseFloat(d[p]);for(;f<d.length&&!isNaN(d[f])&&!isNaN(d[0]);){var g,v,y,m,x,_,b,w=o,P=s;switch(u){case"l":o+=d[f++],s+=d[f++],l=h.L,a.addData(l,o,s);break;case"L":o=d[f++],s=d[f++],l=h.L,a.addData(l,o,s);break;case"m":o+=d[f++],s+=d[f++],l=h.M,a.addData(l,o,s),u="l";break;case"M":o=d[f++],s=d[f++],l=h.M,a.addData(l,o,s),u="L";break;case"h":o+=d[f++],l=h.L,a.addData(l,o,s);break;case"H":o=d[f++],l=h.L,a.addData(l,o,s);break;case"v":s+=d[f++],l=h.L,a.addData(l,o,s);break;case"V":s=d[f++],l=h.L,a.addData(l,o,s);break;case"C":l=h.C,a.addData(l,d[f++],d[f++],d[f++],d[f++],d[f++],d[f++]),o=d[f-2],s=d[f-1];break;case"c":l=h.C,a.addData(l,d[f++]+o,d[f++]+s,d[f++]+o,d[f++]+s,d[f++]+o,d[f++]+s),o+=d[f-2],s+=d[f-1];break;case"S":g=o,v=s;var T=a.len(),C=a.data;n===h.C&&(g+=o-C[T-4],v+=s-C[T-3]),l=h.C,w=d[f++],P=d[f++],o=d[f++],s=d[f++],a.addData(l,g,v,w,P,o,s);break;case"s":g=o,v=s;T=a.len(),C=a.data;n===h.C&&(g+=o-C[T-4],v+=s-C[T-3]),l=h.C,w=o+d[f++],P=s+d[f++],o+=d[f++],s+=d[f++],a.addData(l,g,v,w,P,o,s);break;case"Q":w=d[f++],P=d[f++],o=d[f++],s=d[f++],l=h.Q,a.addData(l,w,P,o,s);break;case"q":w=d[f++]+o,P=d[f++]+s,o+=d[f++],s+=d[f++],l=h.Q,a.addData(l,w,P,o,s);break;case"T":g=o,v=s;T=a.len(),C=a.data;n===h.Q&&(g+=o-C[T-4],v+=s-C[T-3]),o=d[f++],s=d[f++],l=h.Q,a.addData(l,g,v,o,s);break;case"t":g=o,v=s;T=a.len(),C=a.data;n===h.Q&&(g+=o-C[T-4],v+=s-C[T-3]),o+=d[f++],s+=d[f++],l=h.Q,a.addData(l,g,v,o,s);break;case"A":y=d[f++],m=d[f++],x=d[f++],_=d[f++],b=d[f++],O(w=o,P=s,o=d[f++],s=d[f++],_,b,y,m,x,l=h.A,a);break;case"a":y=d[f++],m=d[f++],x=d[f++],_=d[f++],b=d[f++],O(w=o,P=s,o+=d[f++],s+=d[f++],_,b,y,m,x,l=h.A,a)}}"z"!==u&&"Z"!==u||(l=h.Z,a.addData(l)),n=l}return a.toStatic(),a}(t);return(e=e||{}).buildPath=function(t){if(t.setData){t.setData(i.data),(e=t.getContext())&&t.rebuildPath(e)}else{var e=t;i.rebuildPath(e)}},e.applyTransform=function(t){r(i,t),this.dirty(!0)},e}e.createFromString=function(t,e){return new a(o(t,e))},e.extendFromString=function(t,e){return a.extend(o(t,e))},e.mergePath=function(t,e){for(var i=[],n=t.length,r=0;r<n;r++){var o=t[r];o.path||o.createPathProxy(),o.__dirtyPath&&o.buildPath(o.path,o.shape,!0),i.push(o.path)}var s=new a(e);return s.createPathProxy(),s.buildPath=function(t){t.appendPath(i);var e=t.getContext();e&&t.rebuildPath(e)},s}},function(t,e,i){var n=i(7),o=i(4),a=i(29),h=i(32),y=i(39).prototype.getCanvasPattern,r=Math.abs,m=new a(!0);function s(t){n.call(this,t),this.path=null}s.prototype={constructor:s,type:"path",__dirtyPath:!0,strokeContainThreshold:5,brush:function(t,e){var i,n=this.style,r=this.path||m,o=n.hasStroke(),s=n.hasFill(),a=n.fill,h=n.stroke,l=s&&!!a.colorStops,c=o&&!!h.colorStops,u=s&&!!a.image,f=o&&!!h.image;n.bind(t,this,e),this.setTransform(t),this.__dirty&&(l&&(i=i||this.getBoundingRect(),this._fillGradient=n.getGradient(t,a,i)),c&&(i=i||this.getBoundingRect(),this._strokeGradient=n.getGradient(t,h,i)));l?t.fillStyle=this._fillGradient:u&&(t.fillStyle=y.call(a,t)),c?t.strokeStyle=this._strokeGradient:f&&(t.strokeStyle=y.call(h,t));var d=n.lineDash,p=n.lineDashOffset,g=!!t.setLineDash,v=this.getGlobalScale();r.setScale(v[0],v[1]),this.__dirtyPath||d&&!g&&o?(r.beginPath(t),d&&!g&&(r.setLineDash(d),r.setLineDashOffset(p)),this.buildPath(r,this.shape,!1),this.path&&(this.__dirtyPath=!1)):(t.beginPath(),this.path.rebuildPath(t)),s&&r.fill(t),d&&g&&(t.setLineDash(d),t.lineDashOffset=p),o&&r.stroke(t),d&&g&&t.setLineDash([]),this.restoreTransform(t),null!=n.text&&this.drawRectText(t,this.getBoundingRect())},buildPath:function(t,e,i){},createPathProxy:function(){this.path=new a},getBoundingRect:function(){var t=this._rect,e=this.style,i=!t;if(i){var n=this.path;n=n||(this.path=new a),this.__dirtyPath&&(n.beginPath(),this.buildPath(n,this.shape,!1)),t=n.getBoundingRect()}if(this._rect=t,e.hasStroke()){var r=this._rectWithStroke||(this._rectWithStroke=t.clone());if(this.__dirty||i){r.copy(t);var o=e.lineWidth,s=e.strokeNoScale?this.getLineScale():1;e.hasFill()||(o=Math.max(o,this.strokeContainThreshold||4)),1e-10<s&&(r.width+=o/s,r.height+=o/s,r.x-=o/s/2,r.y-=o/s/2)}return r}return t},contain:function(t,e){var i=this.transformCoordToLocal(t,e),n=this.getBoundingRect(),r=this.style;if(t=i[0],e=i[1],n.contain(t,e)){var o=this.path.data;if(r.hasStroke()){var s=r.lineWidth,a=r.strokeNoScale?this.getLineScale():1;if(1e-10<a&&(r.hasFill()||(s=Math.max(s,this.strokeContainThreshold)),h.containStroke(o,s/a,t,e)))return!0}if(r.hasFill())return h.contain(o,t,e)}return!1},dirty:function(t){null==t&&(t=!0),t&&(this.__dirtyPath=t,this._rect=null),this.__dirty=!0,this.__zr&&this.__zr.refresh(),this.__clipTarget&&this.__clipTarget.dirty()},animateShape:function(t){return this.animate("shape",t)},attrKV:function(t,e){"shape"===t?(this.setShape(e),this.__dirtyPath=!0,this._rect=null):n.prototype.attrKV.call(this,t,e)},setShape:function(t,e){var i=this.shape;if(i){if(o.isObject(t))for(var n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);else i[t]=e;this.dirty(!0)}return this},getLineScale:function(){var t=this.transform;return t&&1e-10<r(t[0]-1)&&1e-10<r(t[3]-1)?Math.sqrt(r(t[0]*t[3]-t[2]*t[1])):1}},s.extend=function(r){function t(t){s.call(this,t),r.style&&this.style.extendFrom(r.style,!1);var e=r.shape;if(e){this.shape=this.shape||{};var i=this.shape;for(var n in e)!i.hasOwnProperty(n)&&e.hasOwnProperty(n)&&(i[n]=e[n])}r.init&&r.init.call(this,t)}for(var e in o.inherits(t,s),r)"style"!==e&&"shape"!==e&&(t.prototype[e]=r[e]);return t},o.inherits(s,n);var l=s;t.exports=l},function(t,e,i){var n=i(4),r=i(8),o=i(9),s=i(23);function a(t){for(var e in t=t||{},o.call(this,t),t)t.hasOwnProperty(e)&&"style"!==e&&(this[e]=t[e]);this.style=new r(t.style,this),this._rect=null,this.__clipPaths=[]}a.prototype={constructor:a,type:"displayable",__dirty:!0,invisible:!1,z:0,z2:0,zlevel:0,draggable:!1,dragging:!1,silent:!1,culling:!1,cursor:"pointer",rectHover:!1,progressive:-1,beforeBrush:function(t){},afterBrush:function(t){},brush:function(t,e){},getBoundingRect:function(){},contain:function(t,e){return this.rectContain(t,e)},traverse:function(t,e){t.call(e,this)},rectContain:function(t,e){var i=this.transformCoordToLocal(t,e);return this.getBoundingRect().contain(i[0],i[1])},dirty:function(){this.__dirty=!0,this._rect=null,this.__zr&&this.__zr.refresh()},animateStyle:function(t){return this.animate("style",t)},attrKV:function(t,e){"style"!==t?o.prototype.attrKV.call(this,t,e):this.style.set(e)},setStyle:function(t,e){return this.style.set(t,e),this.dirty(!1),this},useStyle:function(t){return this.style=new r(t,this),this.dirty(!1),this}},n.inherits(a,o),n.mixin(a,s);var h=a;t.exports=h},function(t,e){function i(t,e){this.extendFrom(t,!1),this.host=e}var c=[["shadowBlur",0],["shadowOffsetX",0],["shadowOffsetY",0],["shadowColor","#000"],["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function s(t,e,i){var n=null==e.x?0:e.x,r=null==e.x2?1:e.x2,o=null==e.y?0:e.y,s=null==e.y2?0:e.y2;return e.global||(n=n*i.width+i.x,r=r*i.width+i.x,o=o*i.height+i.y,s=s*i.height+i.y),t.createLinearGradient(n,o,r,s)}function a(t,e,i){var n=i.width,r=i.height,o=Math.min(n,r),s=null==e.x?.5:e.x,a=null==e.y?.5:e.y,h=null==e.r?.5:e.r;return e.global||(s=s*n+i.x,a=a*r+i.y,h*=o),t.createRadialGradient(s,a,0,s,a,h)}for(var n=i.prototype={constructor:i,host:null,fill:"#000",stroke:null,opacity:1,lineDash:null,lineDashOffset:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,lineWidth:1,strokeNoScale:!1,text:null,font:null,textFont:null,fontStyle:null,fontWeight:null,fontSize:null,fontFamily:null,textTag:null,textFill:"#000",textStroke:null,textWidth:null,textHeight:null,textStrokeWidth:0,textLineHeight:null,textPosition:"inside",textRect:null,textOffset:null,textAlign:null,textVerticalAlign:null,textDistance:5,textShadowColor:"transparent",textShadowBlur:0,textShadowOffsetX:0,textShadowOffsetY:0,textBoxShadowColor:"transparent",textBoxShadowBlur:0,textBoxShadowOffsetX:0,textBoxShadowOffsetY:0,transformText:!1,textRotation:0,textOrigin:null,textBackgroundColor:null,textBorderColor:null,textBorderWidth:0,textBorderRadius:0,textPadding:null,rich:null,truncate:null,blend:null,bind:function(t,e,i){for(var n=this,r=i&&i.style,o=!r,s=0;s<c.length;s++){var a=c[s],h=a[0];!o&&n[h]===r[h]||(t[h]=n[h]||a[1])}if(!o&&n.fill===r.fill||(t.fillStyle=n.fill),!o&&n.stroke===r.stroke||(t.strokeStyle=n.stroke),!o&&n.opacity===r.opacity||(t.globalAlpha=null==n.opacity?1:n.opacity),!o&&n.blend===r.blend||(t.globalCompositeOperation=n.blend||"source-over"),this.hasStroke()){var l=n.lineWidth;t.lineWidth=l/(this.strokeNoScale&&e&&e.getLineScale?e.getLineScale():1)}},hasFill:function(){var t=this.fill;return null!=t&&"none"!==t},hasStroke:function(){var t=this.stroke;return null!=t&&"none"!==t&&0<this.lineWidth},extendFrom:function(t,e){if(t)for(var i in t)!t.hasOwnProperty(i)||!0!==e&&(!1===e?this.hasOwnProperty(i):null==t[i])||(this[i]=t[i])},set:function(t,e){"string"==typeof t?this[t]=e:this.extendFrom(t,!0)},clone:function(){var t=new this.constructor;return t.extendFrom(this,!0),t},getGradient:function(t,e,i){for(var n=("radial"===e.type?a:s)(t,e,i),r=e.colorStops,o=0;o<r.length;o++)n.addColorStop(r[o].offset,r[o].color);return n}},r=0;r<c.length;r++){var o=c[r];o[0]in n||(n[o[0]]=o[1])}i.getGradient=n.getGradient;var h=i;t.exports=h},function(t,e,i){function n(t){s.call(this,t),o.call(this,t),a.call(this,t),this.id=t.id||r()}var r=i(10),o=i(11),s=i(12),a=i(15),h=i(4);n.prototype={type:"element",name:"",__zr:null,ignore:!1,clipPath:null,drift:function(t,e){switch(this.draggable){case"horizontal":e=0;break;case"vertical":t=0}var i=this.transform;(i=i||(this.transform=[1,0,0,1,0,0]))[4]+=t,i[5]+=e,this.decomposeTransform(),this.dirty(!1)},beforeUpdate:function(){},afterUpdate:function(){},update:function(){this.updateTransform()},traverse:function(t,e){},attrKV:function(t,e){if("position"===t||"scale"===t||"origin"===t){if(e){var i=this[t];(i=i||(this[t]=[]))[0]=e[0],i[1]=e[1]}}else this[t]=e},hide:function(){this.ignore=!0,this.__zr&&this.__zr.refresh()},show:function(){this.ignore=!1,this.__zr&&this.__zr.refresh()},attr:function(t,e){if("string"==typeof t)this.attrKV(t,e);else if(h.isObject(t))for(var i in t)t.hasOwnProperty(i)&&this.attrKV(i,t[i]);return this.dirty(!1),this},setClipPath:function(t){var e=this.__zr;e&&t.addSelfToZr(e),this.clipPath&&this.clipPath!==t&&this.removeClipPath(),(this.clipPath=t).__zr=e,(t.__clipTarget=this).dirty(!1)},removeClipPath:function(){var t=this.clipPath;t&&(t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__clipTarget=null,this.clipPath=null,this.dirty(!1))},addSelfToZr:function(t){this.__zr=t;var e=this.animators;if(e)for(var i=0;i<e.length;i++)t.animation.addAnimator(e[i]);this.clipPath&&this.clipPath.addSelfToZr(t)},removeSelfFromZr:function(t){this.__zr=null;var e=this.animators;if(e)for(var i=0;i<e.length;i++)t.animation.removeAnimator(e[i]);this.clipPath&&this.clipPath.removeSelfFromZr(t)}},h.mixin(n,a),h.mixin(n,s),h.mixin(n,o);var l=n;t.exports=l},function(t,e){var i=2311;t.exports=function(){return i++}},function(t,e){function i(){this._$handlers={}}var a=Array.prototype.slice;i.prototype={constructor:i,one:function(t,e,i){var n=this._$handlers;if(!e||!t)return this;n[t]||(n[t]=[]);for(var r=0;r<n[t].length;r++)if(n[t][r].h===e)return this;return n[t].push({h:e,one:!0,ctx:i||this}),this},on:function(t,e,i){var n=this._$handlers;if(!e||!t)return this;n[t]||(n[t]=[]);for(var r=0;r<n[t].length;r++)if(n[t][r].h===e)return this;return n[t].push({h:e,one:!1,ctx:i||this}),this},isSilent:function(t){var e=this._$handlers;return e[t]&&e[t].length},off:function(t,e){var i=this._$handlers;if(!t)return this._$handlers={},this;if(e){if(i[t]){for(var n=[],r=0,o=i[t].length;r<o;r++)i[t][r].h!=e&&n.push(i[t][r]);i[t]=n}i[t]&&0===i[t].length&&delete i[t]}else delete i[t];return this},trigger:function(t){if(this._$handlers[t]){var e=arguments,i=e.length;3<i&&(e=a.call(e,1));for(var n=this._$handlers[t],r=n.length,o=0;o<r;){switch(i){case 1:n[o].h.call(n[o].ctx);break;case 2:n[o].h.call(n[o].ctx,e[1]);break;case 3:n[o].h.call(n[o].ctx,e[1],e[2]);break;default:n[o].h.apply(n[o].ctx,e)}n[o].one?(n.splice(o,1),r--):o++}}return this},triggerWithContext:function(t){if(this._$handlers[t]){var e=arguments,i=e.length;4<i&&(e=a.call(e,1,e.length-1));for(var n=e[e.length-1],r=this._$handlers[t],o=r.length,s=0;s<o;){switch(i){case 1:r[s].h.call(n);break;case 2:r[s].h.call(n,e[1]);break;case 3:r[s].h.call(n,e[1],e[2]);break;default:r[s].h.apply(n,e)}r[s].one?(r.splice(s,1),o--):s++}}return this}};var n=i;t.exports=n},function(t,e,i){var s=i(13),r=i(14),a=s.identity;function h(t){return 5e-5<t||t<-5e-5}function n(t){(t=t||{}).position||(this.position=[0,0]),null==t.rotation&&(this.rotation=0),t.scale||(this.scale=[1,1]),this.origin=this.origin||null}var o=n.prototype;o.transform=null,o.needLocalTransform=function(){return h(this.rotation)||h(this.position[0])||h(this.position[1])||h(this.scale[0]-1)||h(this.scale[1]-1)},o.updateTransform=function(){var t=this.parent,e=t&&t.transform,i=this.needLocalTransform(),n=this.transform;i||e?(n=n||s.create(),i?this.getLocalTransform(n):a(n),e&&(i?s.mul(n,t.transform,n):s.copy(n,t.transform)),this.transform=n,this.invTransform=this.invTransform||s.create(),s.invert(this.invTransform,n)):n&&a(n)},o.getLocalTransform=function(t){return n.getLocalTransform(this,t)},o.setTransform=function(t){var e=this.transform,i=t.dpr||1;e?t.setTransform(i*e[0],i*e[1],i*e[2],i*e[3],i*e[4],i*e[5]):t.setTransform(i,0,0,i,0,0)},o.restoreTransform=function(t){var e=t.dpr||1;t.setTransform(e,0,0,e,0,0)};var l=[];o.decomposeTransform=function(){if(this.transform){var t=this.parent,e=this.transform;t&&t.transform&&(s.mul(l,t.invTransform,e),e=l);var i=e[0]*e[0]+e[1]*e[1],n=e[2]*e[2]+e[3]*e[3],r=this.position,o=this.scale;h(i-1)&&(i=Math.sqrt(i)),h(n-1)&&(n=Math.sqrt(n)),e[0]<0&&(i=-i),e[3]<0&&(n=-n),r[0]=e[4],r[1]=e[5],o[0]=i,o[1]=n,this.rotation=Math.atan2(-e[1]/n,e[0]/i)}},o.getGlobalScale=function(){var t=this.transform;if(!t)return[1,1];var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]),i=Math.sqrt(t[2]*t[2]+t[3]*t[3]);return t[0]<0&&(e=-e),t[3]<0&&(i=-i),[e,i]},o.transformCoordToLocal=function(t,e){var i=[t,e],n=this.invTransform;return n&&r.applyTransform(i,i,n),i},o.transformCoordToGlobal=function(t,e){var i=[t,e],n=this.transform;return n&&r.applyTransform(i,i,n),i},n.getLocalTransform=function(t,e){a(e=e||[]);var i=t.origin,n=t.scale||[1,1],r=t.rotation||0,o=t.position||[0,0];return i&&(e[4]-=i[0],e[5]-=i[1]),s.scale(e,e,n),r&&s.rotate(e,e,r),i&&(e[4]+=i[0],e[5]+=i[1]),e[4]+=o[0],e[5]+=o[1],e};var c=n;t.exports=c},function(t,e){var i="undefined"==typeof Float32Array?Array:Float32Array;function n(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}e.create=function(){var t=new i(6);return n(t),t},e.identity=n,e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},e.mul=function(t,e,i){var n=e[0]*i[0]+e[2]*i[1],r=e[1]*i[0]+e[3]*i[1],o=e[0]*i[2]+e[2]*i[3],s=e[1]*i[2]+e[3]*i[3],a=e[0]*i[4]+e[2]*i[5]+e[4],h=e[1]*i[4]+e[3]*i[5]+e[5];return t[0]=n,t[1]=r,t[2]=o,t[3]=s,t[4]=a,t[5]=h,t},e.translate=function(t,e,i){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4]+i[0],t[5]=e[5]+i[1],t},e.rotate=function(t,e,i){var n=e[0],r=e[2],o=e[4],s=e[1],a=e[3],h=e[5],l=Math.sin(i),c=Math.cos(i);return t[0]=n*c+s*l,t[1]=-n*l+s*c,t[2]=r*c+a*l,t[3]=-r*l+c*a,t[4]=c*o+l*h,t[5]=c*h-l*o,t},e.scale=function(t,e,i){var n=i[0],r=i[1];return t[0]=e[0]*n,t[1]=e[1]*r,t[2]=e[2]*n,t[3]=e[3]*r,t[4]=e[4]*n,t[5]=e[5]*r,t},e.invert=function(t,e){var i=e[0],n=e[2],r=e[4],o=e[1],s=e[3],a=e[5],h=i*s-o*n;return h?(h=1/h,t[0]=s*h,t[1]=-o*h,t[2]=-n*h,t[3]=i*h,t[4]=(n*a-s*r)*h,t[5]=(o*r-i*a)*h,t):null}},function(t,e){var n="undefined"==typeof Float32Array?Array:Float32Array;function r(t){return Math.sqrt(o(t))}var i=r;function o(t){return t[0]*t[0]+t[1]*t[1]}var s=o;function a(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}var h=a;function l(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])}var c=l;e.create=function(t,e){var i=new n(2);return null==t&&(t=0),null==e&&(e=0),i[0]=t,i[1]=e,i},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},e.clone=function(t){var e=new n(2);return e[0]=t[0],e[1]=t[1],e},e.set=function(t,e,i){return t[0]=e,t[1]=i,t},e.add=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t},e.scaleAndAdd=function(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t},e.sub=function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t},e.len=r,e.length=i,e.lenSquare=o,e.lengthSquare=s,e.mul=function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t},e.div=function(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t},e.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},e.scale=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t},e.normalize=function(t,e){var i=r(e);return 0===i?(t[0]=0,t[1]=0):(t[0]=e[0]/i,t[1]=e[1]/i),t},e.distance=a,e.dist=h,e.distanceSquare=l,e.distSquare=c,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},e.lerp=function(t,e,i,n){return t[0]=e[0]+n*(i[0]-e[0]),t[1]=e[1]+n*(i[1]-e[1]),t},e.applyTransform=function(t,e,i){var n=e[0],r=e[1];return t[0]=i[0]*n+i[2]*r+i[4],t[1]=i[1]*n+i[3]*r+i[5],t},e.min=function(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t},e.max=function(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t}},function(t,e,i){function n(){this.animators=[]}var f=i(16),d=i(21),r=i(4),c=r.isString,u=r.isFunction,l=r.isObject,p=r.isArrayLike,g=r.indexOf;n.prototype={constructor:n,animate:function(t,e){var i,n=!1,r=this,o=this.__zr;if(t){var s=t.split("."),a=r;n="shape"===s[0];for(var h=0,l=s.length;h<l;h++)a=a&&a[s[h]];a&&(i=a)}else i=r;if(i){var c=r.animators,u=new f(i,e);return u.during(function(t){r.dirty(n)}).done(function(){c.splice(g(c,u),1)}),c.push(u),o&&o.animation.addAnimator(u),u}d('Property "'+t+'" is not existed in element '+r.id)},stopAnimation:function(t){for(var e=this.animators,i=e.length,n=0;n<i;n++)e[n].stop(t);return e.length=0,this},animateTo:function(t,e,i,n,r,o){c(i)?(r=n,n=i,i=0):u(n)?(r=n,n="linear",i=0):u(i)?(r=i,i=0):e=u(e)?(r=e,500):e||500,this.stopAnimation(),this._animateToShallow("",this,t,e,i);var s=this.animators.slice(),a=s.length;function h(){--a||r&&r()}a||r&&r();for(var l=0;l<s.length;l++)s[l].done(h).start(n,o)},_animateToShallow:function(t,e,i,n,r){var o={},s=0;for(var a in i)if(i.hasOwnProperty(a))if(null!=e[a])l(i[a])&&!p(i[a])?this._animateToShallow(t?t+"."+a:a,e[a],i[a],n,r):(o[a]=i[a],s++);else if(null!=i[a])if(t){var h={};h[t]={},h[t][a]=i[a],this.attr(h)}else this.attr(a,i[a]);return 0<s&&this.animate(t,!1).when(null==n?500:n,o).delay(r||0),this}};var o=n;t.exports=o},function(t,e,i){var A=i(17),N=i(19),z=i(4).isArrayLike,h=Array.prototype.slice;function r(t,e){return t[e]}function o(t,e,i){t[e]=i}function I(t,e,i){return(e-t)*i+t}function D(t,e,i){return.5<i?e:t}function B(t,e,i,n,r){var o=t.length;if(1==r)for(var s=0;s<o;s++)n[s]=I(t[s],e[s],i);else{var a=o&&t[0].length;for(s=0;s<o;s++)for(var h=0;h<a;h++)n[s][h]=I(t[s][h],e[s][h],i)}}function H(t,e,i){var n=t.length,r=e.length;if(n!==r)if(r<n)t.length=r;else for(var o=n;o<r;o++)t.push(1===i?e[o]:h.call(e[o]));var s=t[0]&&t[0].length;for(o=0;o<t.length;o++)if(1===i)isNaN(t[o])&&(t[o]=e[o]);else for(var a=0;a<s;a++)isNaN(t[o][a])&&(t[o][a]=e[o][a])}function F(t,e,i){if(t===e)return!0;var n=t.length;if(n!==e.length)return!1;if(1===i){for(var r=0;r<n;r++)if(t[r]!==e[r])return!1}else{var o=t[0].length;for(r=0;r<n;r++)for(var s=0;s<o;s++)if(t[r][s]!==e[r][s])return!1}return!0}function G(t,e,i,n,r,o,s,a,h){var l=t.length;if(1==h)for(var c=0;c<l;c++)a[c]=V(t[c],e[c],i[c],n[c],r,o,s);else{var u=t[0].length;for(c=0;c<l;c++)for(var f=0;f<u;f++)a[c][f]=V(t[c][f],e[c][f],i[c][f],n[c][f],r,o,s)}}function V(t,e,i,n,r,o,s){var a=.5*(i-t),h=.5*(n-e);return(2*(e-i)+a+h)*s+(-3*(e-i)-2*a-h)*o+a*r+e}function s(t){if(z(t)){var e=t.length;if(z(t[0])){for(var i=[],n=0;n<e;n++)i.push(h.call(t[n]));return i}return h.call(t)}return t}function Y(t){return t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.floor(t[2]),"rgba("+t.join(",")+")"}function l(t,e,i,n,o,r){var s=t._getter,a=t._setter,h="spline"===e,l=n.length;if(l){var c,u=n[0].value,f=z(u),d=!1,p=!1,g=f?function(t){var e=t[t.length-1].value;return z(e&&e[0])?2:1}(n):0;n.sort(function(t,e){return t.time-e.time}),c=n[l-1].time;for(var v=[],y=[],m=n[0].value,x=!0,_=0;_<l;_++){v.push(n[_].time/c);var b=n[_].value;if(f&&F(b,m,g)||!f&&b===m||(x=!1),"string"==typeof(m=b)){var w=N.parse(b);w?(b=w,d=!0):p=!0}y.push(b)}if(r||!x){var P=y[l-1];for(_=0;_<l-1;_++)f?H(y[_],P,g):!isNaN(y[_])||isNaN(P)||p||d||(y[_]=P);f&&H(s(t._target,o),P,g);var T,C,S,M,k,E=0,L=0;if(d)var R=[0,0,0,0];var O=new A({target:t._target,life:c,loop:t._loop,delay:t._delay,onframe:function(t,e){var i;if(e<0)i=0;else if(e<L){for(i=Math.min(E+1,l-1);0<=i&&!(v[i]<=e);i--);i=Math.min(i,l-2)}else{for(i=E;i<l&&!(v[i]>e);i++);i=Math.min(i-1,l-2)}L=e;var n=v[(E=i)+1]-v[i];if(0!=n)if(T=(e-v[i])/n,h)if(S=y[i],C=y[0===i?i:i-1],M=y[l-2<i?l-1:i+1],k=y[l-3<i?l-1:i+2],f)G(C,S,M,k,T,T*T,T*T*T,s(t,o),g);else{if(d)r=G(C,S,M,k,T,T*T,T*T*T,R,1),r=Y(R);else{if(p)return D(S,M,T);r=V(C,S,M,k,T,T*T,T*T*T)}a(t,o,r)}else if(f)B(y[i],y[i+1],T,s(t,o),g);else{var r;if(d)B(y[i],y[i+1],T,R,1),r=Y(R);else{if(p)return D(y[i],y[i+1],T);r=I(y[i],y[i+1],T)}a(t,o,r)}},ondestroy:i});return e&&"spline"!==e&&(O.easing=e),O}}}function n(t,e,i,n){this._tracks={},this._target=t,this._loop=e||!1,this._getter=i||r,this._setter=n||o,this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[]}n.prototype={when:function(t,e){var i=this._tracks;for(var n in e)if(e.hasOwnProperty(n)){if(!i[n]){i[n]=[];var r=this._getter(this._target,n);if(null==r)continue;0!==t&&i[n].push({time:0,value:s(r)})}i[n].push({time:t,value:e[n]})}return this},during:function(t){return this._onframeList.push(t),this},pause:function(){for(var t=0;t<this._clipList.length;t++)this._clipList[t].pause();this._paused=!0},resume:function(){for(var t=0;t<this._clipList.length;t++)this._clipList[t].resume();this._paused=!1},isPaused:function(){return!!this._paused},_doneCallback:function(){this._tracks={},this._clipList.length=0;for(var t=this._doneList,e=t.length,i=0;i<e;i++)t[i].call(this)},start:function(t,e){function i(){--o||r._doneCallback()}var n,r=this,o=0;for(var s in this._tracks)if(this._tracks.hasOwnProperty(s)){var a=l(this,t,i,this._tracks[s],s,e);a&&(this._clipList.push(a),o++,this.animation&&this.animation.addClip(a),n=a)}if(n){var h=n.onframe;n.onframe=function(t,e){h(t,e);for(var i=0;i<r._onframeList.length;i++)r._onframeList[i](t,e)}}return o||this._doneCallback(),this},stop:function(t){for(var e=this._clipList,i=this.animation,n=0;n<e.length;n++){var r=e[n];t&&r.onframe(this._target,1),i&&i.removeClip(r)}e.length=0},delay:function(t){return this._delay=t,this},done:function(t){return t&&this._doneList.push(t),this},getClips:function(){return this._clipList}};var a=n;t.exports=a},function(t,e,i){var s=i(18);function n(t){this._target=t.target,this._life=t.life||1e3,this._delay=t.delay||0,this._initialized=!1,this.loop=null!=t.loop&&t.loop,this.gap=t.gap||0,this.easing=t.easing||"Linear",this.onframe=t.onframe,this.ondestroy=t.ondestroy,this.onrestart=t.onrestart,this._pausedTime=0,this._paused=!1}n.prototype={constructor:n,step:function(t,e){if(this._initialized||(this._startTime=t+this._delay,this._initialized=!0),this._paused)this._pausedTime+=e;else{var i=(t-this._startTime-this._pausedTime)/this._life;if(!(i<0)){i=Math.min(i,1);var n=this.easing,r="string"==typeof n?s[n]:n,o="function"==typeof r?r(i):i;return this.fire("frame",o),1==i?this.loop?(this.restart(t),"restart"):(this._needsRemove=!0,"destroy"):null}}},restart:function(t){var e=(t-this._startTime-this._pausedTime)%this._life;this._startTime=t-e+this.gap,this._pausedTime=0,this._needsRemove=!1},fire:function(t,e){this[t="on"+t]&&this[t](this._target,e)},pause:function(){this._paused=!0},resume:function(){this._paused=!1}};var r=n;t.exports=r},function(t,e){var i={linear:function(t){return t},quadraticIn:function(t){return t*t},quadraticOut:function(t){return t*(2-t)},quadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},cubicIn:function(t){return t*t*t},cubicOut:function(t){return--t*t*t+1},cubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},quarticIn:function(t){return t*t*t*t},quarticOut:function(t){return 1- --t*t*t*t},quarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},quinticIn:function(t){return t*t*t*t*t},quinticOut:function(t){return--t*t*t*t*t+1},quinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},sinusoidalIn:function(t){return 1-Math.cos(t*Math.PI/2)},sinusoidalOut:function(t){return Math.sin(t*Math.PI/2)},sinusoidalInOut:function(t){return.5*(1-Math.cos(Math.PI*t))},exponentialIn:function(t){return 0===t?0:Math.pow(1024,t-1)},exponentialOut:function(t){return 1===t?1:1-Math.pow(2,-10*t)},exponentialInOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},circularIn:function(t){return 1-Math.sqrt(1-t*t)},circularOut:function(t){return Math.sqrt(1- --t*t)},circularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},elasticIn:function(t){var e,i=.1;return 0===t?0:1===t?1:(e=!i||i<1?(i=1,.1):.4*Math.asin(1/i)/(2*Math.PI),-i*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4))},elasticOut:function(t){var e,i=.1;return 0===t?0:1===t?1:(e=!i||i<1?(i=1,.1):.4*Math.asin(1/i)/(2*Math.PI),i*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/.4)+1)},elasticInOut:function(t){var e,i=.1;return 0===t?0:1===t?1:(e=!i||i<1?(i=1,.1):.4*Math.asin(1/i)/(2*Math.PI),(t*=2)<1?i*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*-.5:i*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*.5+1)},backIn:function(t){return t*t*(2.70158*t-1.70158)},backOut:function(t){return--t*t*(2.70158*t+1.70158)+1},backInOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((1+e)*t-e)*.5:.5*((t-=2)*t*((1+e)*t+e)+2)},bounceIn:function(t){return 1-i.bounceOut(1-t)},bounceOut:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bounceInOut:function(t){return t<.5?.5*i.bounceIn(2*t):.5*i.bounceOut(2*t-1)+.5}},n=i;t.exports=n},function(t,e,i){var n=i(20),c={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function u(t){return(t=Math.round(t))<0?0:255<t?255:t}function f(t){return t<0?0:1<t?1:t}function d(t){return t.length&&"%"===t.charAt(t.length-1)?u(parseFloat(t)/100*255):u(parseInt(t,10))}function p(t){return t.length&&"%"===t.charAt(t.length-1)?f(parseFloat(t)/100):f(parseFloat(t))}function a(t,e,i){return i<0?i+=1:1<i&&(i-=1),6*i<1?t+(e-t)*i*6:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}function g(t,e,i){return t+(e-t)*i}function v(t,e,i,n,r){return t[0]=e,t[1]=i,t[2]=n,t[3]=r,t}function y(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}var m=new n(20),r=null;function x(t,e){r&&y(r,e),r=m.put(t,r||e.slice())}function _(t,e){if(t){e=e||[];var i=m.get(t);if(i)return y(e,i);var n,r=(t+="").replace(/ /g,"").toLowerCase();if(r in c)return y(e,c[r]),x(t,e),e;if("#"===r.charAt(0))return 4===r.length?0<=(n=parseInt(r.substr(1),16))&&n<=4095?(v(e,(3840&n)>>4|(3840&n)>>8,240&n|(240&n)>>4,15&n|(15&n)<<4,1),x(t,e),e):void v(e,0,0,0,1):7===r.length?0<=(n=parseInt(r.substr(1),16))&&n<=16777215?(v(e,(16711680&n)>>16,(65280&n)>>8,255&n,1),x(t,e),e):void v(e,0,0,0,1):void 0;var o=r.indexOf("("),s=r.indexOf(")");if(-1!==o&&s+1===r.length){var a=r.substr(0,o),h=r.substr(o+1,s-(o+1)).split(","),l=1;switch(a){case"rgba":if(4!==h.length)return void v(e,0,0,0,1);l=p(h.pop());case"rgb":return 3!==h.length?void v(e,0,0,0,1):(v(e,d(h[0]),d(h[1]),d(h[2]),l),x(t,e),e);case"hsla":return 4!==h.length?void v(e,0,0,0,1):(h[3]=p(h[3]),b(h,e),x(t,e),e);case"hsl":return 3!==h.length?void v(e,0,0,0,1):(b(h,e),x(t,e),e);default:return}}v(e,0,0,0,1)}}function b(t,e){var i=(parseFloat(t[0])%360+360)%360/360,n=p(t[1]),r=p(t[2]),o=r<=.5?r*(n+1):r+n-r*n,s=2*r-o;return v(e=e||[],u(255*a(s,o,i+1/3)),u(255*a(s,o,i)),u(255*a(s,o,i-1/3)),1),4===t.length&&(e[3]=t[3]),e}function o(t,e,i){if(e&&e.length&&0<=t&&t<=1){i=i||[];var n=t*(e.length-1),r=Math.floor(n),o=Math.ceil(n),s=e[r],a=e[o],h=n-r;return i[0]=u(g(s[0],a[0],h)),i[1]=u(g(s[1],a[1],h)),i[2]=u(g(s[2],a[2],h)),i[3]=f(g(s[3],a[3],h)),i}}var s=o;function h(t,e,i){if(e&&e.length&&0<=t&&t<=1){var n=t*(e.length-1),r=Math.floor(n),o=Math.ceil(n),s=_(e[r]),a=_(e[o]),h=n-r,l=w([u(g(s[0],a[0],h)),u(g(s[1],a[1],h)),u(g(s[2],a[2],h)),f(g(s[3],a[3],h))],"rgba");return i?{color:l,leftIndex:r,rightIndex:o,value:n}:l}}var l=h;function w(t,e){if(t&&t.length){var i=t[0]+","+t[1]+","+t[2];return"rgba"!==e&&"hsva"!==e&&"hsla"!==e||(i+=","+t[3]),e+"("+i+")"}}e.parse=_,e.lift=function(t,e){var i=_(t);if(i){for(var n=0;n<3;n++)i[n]=e<0?i[n]*(1-e)|0:(255-i[n])*e+i[n]|0;return w(i,4===i.length?"rgba":"rgb")}},e.toHex=function(t){var e=_(t);if(e)return((1<<24)+(e[0]<<16)+(e[1]<<8)+ +e[2]).toString(16).slice(1)},e.fastLerp=o,e.fastMapToColor=s,e.lerp=h,e.mapToColor=l,e.modifyHSL=function(t,e,i,n){if(t=_(t))return t=function(t){if(t){var e,i,n=t[0]/255,r=t[1]/255,o=t[2]/255,s=Math.min(n,r,o),a=Math.max(n,r,o),h=a-s,l=(a+s)/2;if(0==h)i=e=0;else{i=l<.5?h/(a+s):h/(2-a-s);var c=((a-n)/6+h/2)/h,u=((a-r)/6+h/2)/h,f=((a-o)/6+h/2)/h;n===a?e=f-u:r===a?e=1/3+c-f:o===a&&(e=2/3+u-c),e<0&&(e+=1),1<e&&(e-=1)}var d=[360*e,i,l];return null!=t[3]&&d.push(t[3]),d}}(t),null!=e&&(t[0]=function(t){return(t=Math.round(t))<0?0:360<t?360:t}(e)),null!=i&&(t[1]=p(i)),null!=n&&(t[2]=p(n)),w(b(t),"rgba")},e.modifyAlpha=function(t,e){if((t=_(t))&&null!=e)return t[3]=f(e),w(t,"rgba")},e.stringify=w},function(t,e){function i(){this.head=null,this.tail=null,this._len=0}var n=i.prototype;n.insert=function(t){var e=new h(t);return this.insertEntry(e),e},n.insertEntry=function(t){this.head?((this.tail.next=t).prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},n.remove=function(t){var e=t.prev,i=t.next;e?e.next=i:this.head=i,i?i.prev=e:this.tail=e,t.next=t.prev=null,this._len--},n.len=function(){return this._len},n.clear=function(){this.head=this.tail=null,this._len=0};function r(t){this._list=new i,this._map={},this._maxSize=t||10,this._lastRemovedEntry=null}var h=function(t){this.value=t,this.next,this.prev},o=r.prototype;o.put=function(t,e){var i=this._list,n=this._map,r=null;if(null==n[t]){var o=i.len(),s=this._lastRemovedEntry;if(o>=this._maxSize&&0<o){var a=i.head;i.remove(a),delete n[a.key],r=a.value,this._lastRemovedEntry=a}s?s.value=e:s=new h(e),s.key=t,i.insertEntry(s),n[t]=s}return r},o.get=function(t){var e=this._map[t],i=this._list;if(null!=e)return e!==i.tail&&(i.remove(e),i.insertEntry(e)),e.value},o.clear=function(){this._list.clear(),this._map={}};var s=r;t.exports=s},function(t,e,i){var n=i(22).debugMode,r=function(){};1===n?r=function(){for(var t in arguments)throw new Error(arguments[t])}:1<n&&(r=function(){for(var t in arguments)console.log(arguments[t])});var o=r;t.exports=o},function(t,e){var i=1;"undefined"!=typeof window&&(i=Math.max(window.devicePixelRatio||1,1));var n=i;e.debugMode=0,e.devicePixelRatio=n},function(t,e,i){function n(){}var o=i(24),s=new(i(26));n.prototype={constructor:n,drawRectText:function(t,e){var i=this.style;e=i.textRect||e,this.__dirty&&o.normalizeTextStyle(i,!0);var n=i.text;if(null!=n&&(n+=""),o.needDrawText(n,i)){t.save();var r=this.transform;i.transformText?this.setTransform(t):r&&(s.copy(e),s.applyTransform(r),e=s),o.renderText(this,t,n,i,e),t.restore()}}};var r=n;t.exports=r},function(t,e,i){var n=i(4),g=n.retrieve2,v=n.retrieve3,r=n.each,o=n.normalizeCssArray,d=n.isString,p=n.isObject,L=i(25),y=i(28),m=i(27),s={left:1,right:1,center:1},a={top:1,bottom:1,middle:1};function h(t){if(t){t.font=L.makeFont(t);var e=t.textAlign;"middle"===e&&(e="center"),t.textAlign=null==e||s[e]?e:"left";var i=t.textVerticalAlign||t.textBaseline;"center"===i&&(i="middle"),t.textVerticalAlign=null==i||a[i]?i:"top",t.textPadding&&(t.textPadding=o(t.textPadding))}}function R(t,e,i,n,r){if(i&&e.textRotation){var o=e.textOrigin;"center"===o?(n=i.width/2+i.x,r=i.height/2+i.y):o&&(n=o[0]+i.x,r=o[1]+i.y),t.translate(n,r),t.rotate(-e.textRotation),t.translate(-n,-r)}}function O(t,e,i,n,r,o,s,a){var h=n.rich[i.styleName]||{},l=i.textVerticalAlign,c=o+r/2;"top"===l?c=o+i.height/2:"bottom"===l&&(c=o+r-i.height/2),!i.isLineHolder&&A(h)&&N(t,e,h,"right"===a?s-i.width:"center"===a?s-i.width/2:s,c-i.height/2,i.width,i.height);var u=i.textPadding;u&&(s=E(s,a,u),c-=i.height/2-u[2]-i.textHeight/2),S(e,"shadowBlur",v(h.textShadowBlur,n.textShadowBlur,0)),S(e,"shadowColor",h.textShadowColor||n.textShadowColor||"transparent"),S(e,"shadowOffsetX",v(h.textShadowOffsetX,n.textShadowOffsetX,0)),S(e,"shadowOffsetY",v(h.textShadowOffsetY,n.textShadowOffsetY,0)),S(e,"textAlign",a),S(e,"textBaseline","middle"),S(e,"font",i.font||L.DEFAULT_FONT);var f=M(h.textStroke||n.textStroke,p),d=k(h.textFill||n.textFill),p=g(h.textStrokeWidth,n.textStrokeWidth);f&&(S(e,"lineWidth",p),S(e,"strokeStyle",f),e.strokeText(i.text,s,c)),d&&(S(e,"fillStyle",d),e.fillText(i.text,s,c))}function A(t){return t.textBackgroundColor||t.textBorderWidth&&t.textBorderColor}function N(t,e,i,n,r,o,s){var a=i.textBackgroundColor,h=i.textBorderWidth,l=i.textBorderColor,c=d(a);if(S(e,"shadowBlur",i.textBoxShadowBlur||0),S(e,"shadowColor",i.textBoxShadowColor||"transparent"),S(e,"shadowOffsetX",i.textBoxShadowOffsetX||0),S(e,"shadowOffsetY",i.textBoxShadowOffsetY||0),c||h&&l){e.beginPath();var u=i.textBorderRadius;u?y.buildPath(e,{x:n,y:r,width:o,height:s,r:u}):e.rect(n,r,o,s),e.closePath()}if(c)S(e,"fillStyle",a),e.fill();else if(p(a)){var f=a.image;(f=m.createOrUpdateImage(f,null,t,x,a))&&m.isImageReady(f)&&e.drawImage(f,n,r,o,s)}h&&l&&(S(e,"lineWidth",h),S(e,"strokeStyle",l),e.stroke())}function x(t,e){e.image=t}function z(t,e,i){var n=e.x||0,r=e.y||0,o=e.textAlign,s=e.textVerticalAlign;if(i){var a=e.textPosition;if(a instanceof Array)n=i.x+c(a[0],i.width),r=i.y+c(a[1],i.height);else{var h=L.adjustTextPositionOnRect(a,i,e.textDistance);n=h.x,r=h.y,o=o||h.textAlign,s=s||h.textVerticalAlign}var l=e.textOffset;l&&(n+=l[0],r+=l[1])}return{baseX:n,baseY:r,textAlign:o,textVerticalAlign:s}}function S(t,e,i){return t[e]=i,t[e]}function M(t,e){return null==t||e<=0||"transparent"===t||"none"===t?null:t.image||t.colorStops?"#000":t}function k(t){return null==t||"none"===t?null:t.image||t.colorStops?"#000":t}function c(t,e){return"string"==typeof t?0<=t.lastIndexOf("%")?parseFloat(t)/100*e:parseFloat(t):t}function E(t,e,i){return"right"===e?t-i[1]:"center"===e?t+i[3]/2-i[1]/2:t+i[3]}e.normalizeTextStyle=function(t){return h(t),r(t.rich,h),t},e.renderText=function(t,e,i,n,r){n.rich?function(t,e,i,n,r){var o=t.__textCotentBlock;o&&!t.__dirty||(o=t.__textCotentBlock=L.parseRichText(i,n));!function(t,e,i,n,r){var o=i.width,s=i.outerWidth,a=i.outerHeight,h=n.textPadding,l=z(a,n,r),c=l.baseX,u=l.baseY,f=l.textAlign,d=l.textVerticalAlign;R(e,n,r,c,u);var p=L.adjustTextX(c,s,f),g=L.adjustTextY(u,a,d),v=p,y=g;h&&(v+=h[3],y+=h[0]);var m=v+o;A(n)&&N(t,e,n,p,g,s,a);for(var x=0;x<i.lines.length;x++){for(var _,b=i.lines[x],w=b.tokens,P=w.length,T=b.lineHeight,C=b.width,S=0,M=v,k=m,E=P-1;S<P&&(!(_=w[S]).textAlign||"left"===_.textAlign);)O(t,e,_,n,T,y,M,"left"),C-=_.width,M+=_.width,S++;for(;0<=E&&"right"===(_=w[E]).textAlign;)O(t,e,_,n,T,y,k,"right"),C-=_.width,k-=_.width,E--;for(M+=(o-(M-v)-(m-k)-C)/2;S<=E;)_=w[S],O(t,e,_,n,T,y,M+_.width/2,"center"),M+=_.width,S++;y+=T}}(t,e,o,n,r)}(t,e,i,n,r):function(t,e,i,n,r){var o=S(e,"font",n.font||L.DEFAULT_FONT),s=n.textPadding,a=t.__textCotentBlock;a&&!t.__dirty||(a=t.__textCotentBlock=L.parsePlainText(i,o,s,n.truncate));var h=a.outerHeight,l=a.lines,c=a.lineHeight,u=z(h,n,r),f=u.baseX,d=u.baseY,p=u.textAlign,g=u.textVerticalAlign;R(e,n,r,f,d);var v=L.adjustTextY(d,h,g),y=f,m=v,x=A(n);if(x||s){var _=L.getWidth(i,o);s&&(_+=s[1]+s[3]);var b=L.adjustTextX(f,_,p);x&&N(t,e,n,b,v,_,h),s&&(y=E(f,p,s),m+=s[0])}S(e,"textAlign",p||"left"),S(e,"textBaseline","middle"),S(e,"shadowBlur",n.textShadowBlur||0),S(e,"shadowColor",n.textShadowColor||"transparent"),S(e,"shadowOffsetX",n.textShadowOffsetX||0),S(e,"shadowOffsetY",n.textShadowOffsetY||0),m+=c/2;var w=n.textStrokeWidth,P=M(n.textStroke,w),T=k(n.textFill);P&&(S(e,"lineWidth",w),S(e,"strokeStyle",P));T&&S(e,"fillStyle",T);for(var C=0;C<l.length;C++)P&&e.strokeText(l[C],y,m),T&&e.fillText(l[C],y,m),m+=c}(t,e,i,n,r)},e.getStroke=M,e.getFill=k,e.needDrawText=function(t,e){return null!=t&&(t||e.textBackgroundColor||e.textBorderWidth&&e.textBorderColor||e.textPadding)}},function(t,e,i){var f=i(26),R=i(27),n=i(4),r=n.getContext,l=n.extend,O=n.retrieve2,A=n.retrieve3,a={},h=0,c=5e3,N=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g,u="12px sans-serif",o={};function z(t,e){var i=t+":"+(e=e||u);if(a[i])return a[i];for(var n=(t+"").split("\n"),r=0,o=0,s=n.length;o<s;o++)r=Math.max(m(n[o],e).width,r);return c<h&&(h=0,a={}),h++,a[i]=r}function d(t,e,i){return"right"===i?t-=e:"center"===i&&(t-=e/2),t}function p(t,e,i){return"middle"===i?t-=e/2:"bottom"===i&&(t-=e),t}function I(t,e,i,n,r){if(!e)return"";var o=(t+"").split("\n");r=g(e,i,n,r);for(var s=0,a=o.length;s<a;s++)o[s]=v(o[s],r);return o.join("\n")}function g(t,e,i,n){(n=l({},n)).font=e;i=O(i,"...");n.maxIterations=O(n.maxIterations,2);var r=n.minChar=O(n.minChar,0);n.cnCharWidth=z("",e);var o=n.ascCharWidth=z("a",e);n.placeholder=O(n.placeholder,"");for(var s=t=Math.max(0,t-1),a=0;a<r&&o<=s;a++)s-=o;var h=z(i);return s<h&&(i="",h=0),s=t-h,n.ellipsis=i,n.ellipsisWidth=h,n.contentWidth=s,n.containerWidth=t,n}function v(t,e){var i=e.containerWidth,n=e.font,r=e.contentWidth;if(!i)return"";var o=z(t,n);if(o<=i)return t;for(var s=0;;s++){if(o<=r||s>=e.maxIterations){t+=e.ellipsis;break}var a=0===s?y(t,r,e.ascCharWidth,e.cnCharWidth):0<o?Math.floor(t.length*r/o):0;o=z(t=t.substr(0,a),n)}return""===t&&(t=e.placeholder),t}function y(t,e,i,n){for(var r=0,o=0,s=t.length;o<s&&r<e;o++){var a=t.charCodeAt(o);r+=0<=a&&a<=127?i:n}return o}function D(t){return z("",t)}function m(t,e){return o.measureText(t,e)}function x(t,e,i,n){null!=t&&(t+="");var r=D(e),o=t?t.split("\n"):[],s=o.length*r,a=s;if(i&&(a+=i[0]+i[2]),t&&n){var h=n.outerHeight,l=n.outerWidth;if(null!=h&&h<a)t="",o=[];else if(null!=l)for(var c=g(l-(i?i[1]+i[3]:0),e,n.ellipsis,{minChar:n.minChar,placeholder:n.placeholder}),u=0,f=o.length;u<f;u++)o[u]=v(o[u],c)}return{lines:o,height:s,outerHeight:a,lineHeight:r}}function _(t,e){var i={lines:[],width:0,height:0};if(null!=t&&(t+=""),!t)return i;for(var n,r=N.lastIndex=0;null!=(n=N.exec(t));){var o=n.index;r<o&&B(i,t.substring(r,o)),B(i,n[2],n[1]),r=N.lastIndex}r<t.length&&B(i,t.substring(r,t.length));var s=i.lines,a=0,h=0,l=[],c=e.textPadding,u=e.truncate,f=u&&u.outerWidth,d=u&&u.outerHeight;c&&(null!=f&&(f-=c[1]+c[3]),null!=d&&(d-=c[0]+c[2]));for(var p=0;p<s.length;p++){for(var g=s[p],v=0,y=0,m=0;m<g.tokens.length;m++){var x=(E=g.tokens[m]).styleName&&e.rich[E.styleName]||{},_=E.textPadding=x.textPadding,b=E.font=x.font||e.font,w=E.textHeight=O(x.textHeight,D(b));if(_&&(w+=_[0]+_[2]),E.height=w,E.lineHeight=A(x.textLineHeight,e.textLineHeight,w),E.textAlign=x&&x.textAlign||e.textAlign,E.textVerticalAlign=x&&x.textVerticalAlign||"middle",null!=d&&a+E.lineHeight>d)return{lines:[],width:0,height:0};E.textWidth=z(E.text,b);var P=x.textWidth,T=null==P||"auto"===P;if("string"==typeof P&&"%"===P.charAt(P.length-1))E.percentWidth=P,l.push(E),P=0;else{if(T){P=E.textWidth;var C=x.textBackgroundColor,S=C&&C.image;S&&(S=R.findExistImage(S),R.isImageReady(S)&&(P=Math.max(P,S.width*w/S.height)))}var M=_?_[1]+_[3]:0;P+=M;var k=null!=f?f-y:null;null!=k&&k<P&&(!T||k<M?(E.text="",E.textWidth=P=0):(E.text=I(E.text,k-M,b,u.ellipsis,{minChar:u.minChar}),E.textWidth=z(E.text,b),P=E.textWidth+M))}y+=E.width=P,x&&(v=Math.max(v,E.lineHeight))}g.width=y,a+=g.lineHeight=v,h=Math.max(h,y)}i.outerWidth=i.width=O(e.textWidth,h),i.outerHeight=i.height=O(e.textHeight,a),c&&(i.outerWidth+=c[1]+c[3],i.outerHeight+=c[0]+c[2]);for(p=0;p<l.length;p++){var E,L=(E=l[p]).percentWidth;E.width=parseInt(L,10)/100*h}return i}function B(t,e,i){for(var n=""===e,r=e.split("\n"),o=t.lines,s=0;s<r.length;s++){var a=r[s],h={styleName:i,text:a,isLineHolder:!a&&!n};if(s)o.push({tokens:[h]});else{var l=(o[o.length-1]||(o[0]={tokens:[]})).tokens,c=l.length;1===c&&l[0].isLineHolder?l[0]=h:!a&&c&&!n||l.push(h)}}}o.measureText=function(t,e){var i=r();return i.font=e||u,i.measureText(t)},e.DEFAULT_FONT=u,e.$override=function(t,e){o[t]=e},e.getWidth=z,e.getBoundingRect=function(t,e,i,n,r,o,s){return o?function(t,e,i,n,r,o,s){var a=_(t,{rich:o,truncate:s,font:e,textAlign:i,textPadding:r}),h=a.outerWidth,l=a.outerHeight,c=d(0,h,i),u=p(0,l,n);return new f(c,u,h,l)}(t,e,i,n,r,o,s):function(t,e,i,n,r,o){var s=x(t,e,r,o),a=z(t,e);r&&(a+=r[1]+r[3]);var h=s.outerHeight,l=d(0,a,i),c=p(0,h,n),u=new f(l,c,a,h);return u.lineHeight=s.lineHeight,u}(t,e,i,n,r,s)},e.adjustTextX=d,e.adjustTextY=p,e.adjustTextPositionOnRect=function(t,e,i){var n=e.x,r=e.y,o=e.height,s=e.width,a=o/2,h="left",l="top";switch(t){case"left":n-=i,r+=a,h="right",l="middle";break;case"right":n+=i+s,r+=a,l="middle";break;case"top":n+=s/2,r-=i,h="center",l="bottom";break;case"bottom":n+=s/2,r+=o+i,h="center";break;case"inside":n+=s/2,r+=a,h="center",l="middle";break;case"insideLeft":n+=i,r+=a,l="middle";break;case"insideRight":n+=s-i,r+=a,h="right",l="middle";break;case"insideTop":n+=s/2,r+=i,h="center";break;case"insideBottom":n+=s/2,r+=o-i,h="center",l="bottom";break;case"insideTopLeft":n+=i,r+=i;break;case"insideTopRight":n+=s-i,r+=i,h="right";break;case"insideBottomLeft":n+=i,r+=o-i,l="bottom";break;case"insideBottomRight":n+=s-i,r+=o-i,h="right",l="bottom"}return{x:n,y:r,textAlign:h,textVerticalAlign:l}},e.truncateText=I,e.getLineHeight=D,e.measureText=m,e.parsePlainText=x,e.parseRichText=_,e.makeFont=function(t){return(t.fontSize||t.fontFamily)&&[t.fontStyle,t.fontWeight,(t.fontSize||12)+"px",t.fontFamily||"sans-serif"].join(" ")||t.textFont||t.font}},function(t,e,i){var n,r,o,s,a=i(14),h=i(13),l=a.applyTransform,c=Math.min,u=Math.max;function f(t,e,i,n){i<0&&(t+=i,i=-i),n<0&&(e+=n,n=-n),this.x=t,this.y=e,this.width=i,this.height=n}f.prototype={constructor:f,union:function(t){var e=c(t.x,this.x),i=c(t.y,this.y);this.width=u(t.x+t.width,this.x+this.width)-e,this.height=u(t.y+t.height,this.y+this.height)-i,this.x=e,this.y=i},applyTransform:(n=[],r=[],o=[],s=[],function(t){if(t){n[0]=o[0]=this.x,n[1]=s[1]=this.y,r[0]=s[0]=this.x+this.width,r[1]=o[1]=this.y+this.height,l(n,n,t),l(r,r,t),l(o,o,t),l(s,s,t),this.x=c(n[0],r[0],o[0],s[0]),this.y=c(n[1],r[1],o[1],s[1]);var e=u(n[0],r[0],o[0],s[0]),i=u(n[1],r[1],o[1],s[1]);this.width=e-this.x,this.height=i-this.y}}),calculateTransform:function(t){var e=t.width/this.width,i=t.height/this.height,n=h.create();return h.translate(n,n,[-this.x,-this.y]),h.scale(n,n,[e,i]),h.translate(n,n,[t.x,t.y]),n},intersect:function(t){if(!t)return!1;t instanceof f||(t=f.create(t));var e=this,i=e.x,n=e.x+e.width,r=e.y,o=e.y+e.height,s=t.x,a=t.x+t.width,h=t.y,l=t.y+t.height;return!(n<s||a<i||o<h||l<r)},contain:function(t,e){var i=this;return t>=i.x&&t<=i.x+i.width&&e>=i.y&&e<=i.y+i.height},clone:function(){return new f(this.x,this.y,this.width,this.height)},copy:function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height},plain:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}},f.create=function(t){return new f(t.x,t.y,t.width,t.height)};var d=f;t.exports=d},function(t,e,i){var a=new(i(20))(50);function h(){var t=this.__cachedImgObj;this.onload=this.__cachedImgObj=null;for(var e=0;e<t.pending.length;e++){var i=t.pending[e],n=i.cb;n&&n(this,i.cbPayload),i.hostEl.dirty()}t.pending.length=0}function l(t){return t&&t.width&&t.height}e.findExistImage=function(t){if("string"!=typeof t)return t;var e=a.get(t);return e&&e.image},e.createOrUpdateImage=function(t,e,i,n,r){if(t){if("string"!=typeof t)return t;if(e&&e.__zrImageSrc===t||!i)return e;var o=a.get(t),s={hostEl:i,cb:n,cbPayload:r};return o?l(e=o.image)||o.pending.push(s):((e=e||new Image).onload=h,a.put(t,e.__cachedImgObj={image:e,pending:[s]}),e.src=e.__zrImageSrc=t),e}return e},e.isImageReady=l},function(t,e){e.buildPath=function(t,e){var i,n,r,o,s,a=e.x,h=e.y,l=e.width,c=e.height,u=e.r;l<0&&(a+=l,l=-l),c<0&&(h+=c,c=-c),"number"==typeof u?i=n=r=o=u:u instanceof Array?1===u.length?i=n=r=o=u[0]:2===u.length?(i=r=u[0],n=o=u[1]):3===u.length?(i=u[0],n=o=u[1],r=u[2]):(i=u[0],n=u[1],r=u[2],o=u[3]):i=n=r=o=0,l<i+n&&(i*=l/(s=i+n),n*=l/s),l<r+o&&(r*=l/(s=r+o),o*=l/s),c<n+r&&(n*=c/(s=n+r),r*=c/s),c<i+o&&(i*=c/(s=i+o),o*=c/s),t.moveTo(a+i,h),t.lineTo(a+l-n,h),0!==n&&t.quadraticCurveTo(a+l,h,a+l,h+n),t.lineTo(a+l,h+c-r),0!==r&&t.quadraticCurveTo(a+l,h+c,a+l-r,h+c),t.lineTo(a+o,h+c),0!==o&&t.quadraticCurveTo(a,h+c,a,h+c-o),t.lineTo(a,h+i),0!==i&&t.quadraticCurveTo(a,h,a+i,h)}},function(t,e,i){function n(t){this._saveData=!t,this._saveData&&(this.data=[]),this._ctx=null}var w=i(30),v=i(14),y=i(31),m=i(26),r=i(22).devicePixelRatio,C={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},x=[],_=[],b=[],P=[],T=Math.min,S=Math.max,M=Math.cos,k=Math.sin,E=Math.sqrt,L=Math.abs,a="undefined"!=typeof Float32Array;n.prototype={constructor:n,_xi:0,_yi:0,_x0:0,_y0:0,_ux:0,_uy:0,_len:0,_lineDash:null,_dashOffset:0,_dashIdx:0,_dashSum:0,setScale:function(t,e){this._ux=L(1/r/t)||0,this._uy=L(1/r/e)||0},getContext:function(){return this._ctx},beginPath:function(t){return(this._ctx=t)&&t.beginPath(),t&&(this.dpr=t.dpr),this._saveData&&(this._len=0),this._lineDash&&(this._lineDash=null,this._dashOffset=0),this},moveTo:function(t,e){return this.addData(C.M,t,e),this._ctx&&this._ctx.moveTo(t,e),this._x0=t,this._y0=e,this._xi=t,this._yi=e,this},lineTo:function(t,e){var i=L(t-this._xi)>this._ux||L(e-this._yi)>this._uy||this._len<5;return this.addData(C.L,t,e),this._ctx&&i&&(this._needsDash()?this._dashedLineTo(t,e):this._ctx.lineTo(t,e)),i&&(this._xi=t,this._yi=e),this},bezierCurveTo:function(t,e,i,n,r,o){return this.addData(C.C,t,e,i,n,r,o),this._ctx&&(this._needsDash()?this._dashedBezierTo(t,e,i,n,r,o):this._ctx.bezierCurveTo(t,e,i,n,r,o)),this._xi=r,this._yi=o,this},quadraticCurveTo:function(t,e,i,n){return this.addData(C.Q,t,e,i,n),this._ctx&&(this._needsDash()?this._dashedQuadraticTo(t,e,i,n):this._ctx.quadraticCurveTo(t,e,i,n)),this._xi=i,this._yi=n,this},arc:function(t,e,i,n,r,o){return this.addData(C.A,t,e,i,i,n,r-n,0,o?0:1),this._ctx&&this._ctx.arc(t,e,i,n,r,o),this._xi=M(r)*i+t,this._yi=k(r)*i+t,this},arcTo:function(t,e,i,n,r){return this._ctx&&this._ctx.arcTo(t,e,i,n,r),this},rect:function(t,e,i,n){return this._ctx&&this._ctx.rect(t,e,i,n),this.addData(C.R,t,e,i,n),this},closePath:function(){this.addData(C.Z);var t=this._ctx,e=this._x0,i=this._y0;return t&&(this._needsDash()&&this._dashedLineTo(e,i),t.closePath()),this._xi=e,this._yi=i,this},fill:function(t){t&&t.fill(),this.toStatic()},stroke:function(t){t&&t.stroke(),this.toStatic()},setLineDash:function(t){if(t instanceof Array){this._lineDash=t;for(var e=this._dashIdx=0,i=0;i<t.length;i++)e+=t[i];this._dashSum=e}return this},setLineDashOffset:function(t){return this._dashOffset=t,this},len:function(){return this._len},setData:function(t){var e=t.length;this.data&&this.data.length==e||!a||(this.data=new Float32Array(e));for(var i=0;i<e;i++)this.data[i]=t[i];this._len=e},appendPath:function(t){t instanceof Array||(t=[t]);for(var e=t.length,i=0,n=this._len,r=0;r<e;r++)i+=t[r].len();a&&this.data instanceof Float32Array&&(this.data=new Float32Array(n+i));for(r=0;r<e;r++)for(var o=t[r].data,s=0;s<o.length;s++)this.data[n++]=o[s];this._len=n},addData:function(t){if(this._saveData){var e=this.data;this._len+arguments.length>e.length&&(this._expandData(),e=this.data);for(var i=0;i<arguments.length;i++)e[this._len++]=arguments[i];this._prevCmd=t}},_expandData:function(){if(!(this.data instanceof Array)){for(var t=[],e=0;e<this._len;e++)t[e]=this.data[e];this.data=t}},_needsDash:function(){return this._lineDash},_dashedLineTo:function(t,e){var i,n,r=this._dashSum,o=this._dashOffset,s=this._lineDash,a=this._ctx,h=this._xi,l=this._yi,c=t-h,u=e-l,f=E(c*c+u*u),d=h,p=l,g=s.length;for(o<0&&(o=r+o),d-=(o%=r)*(c/=f),p-=o*(u/=f);0<c&&d<=t||c<0&&t<=d||0==c&&(0<u&&p<=e||u<0&&e<=p);)d+=c*(i=s[n=this._dashIdx]),p+=u*i,this._dashIdx=(n+1)%g,0<c&&d<h||c<0&&h<d||0<u&&p<l||u<0&&l<p||a[n%2?"moveTo":"lineTo"](0<=c?T(d,t):S(d,t),0<=u?T(p,e):S(p,e));c=d-t,u=p-e,this._dashOffset=-E(c*c+u*u)},_dashedBezierTo:function(t,e,i,n,r,o){var s,a,h,l,c,u=this._dashSum,f=this._dashOffset,d=this._lineDash,p=this._ctx,g=this._xi,v=this._yi,y=w.cubicAt,m=0,x=this._dashIdx,_=d.length,b=0;for(f<0&&(f=u+f),f%=u,s=0;s<1;s+=.1)a=y(g,t,i,r,s+.1)-y(g,t,i,r,s),h=y(v,e,n,o,s+.1)-y(v,e,n,o,s),m+=E(a*a+h*h);for(;x<_&&!(f<(b+=d[x]));x++);for(s=(b-f)/m;s<=1;)l=y(g,t,i,r,s),c=y(v,e,n,o,s),x%2?p.moveTo(l,c):p.lineTo(l,c),s+=d[x]/m,x=(x+1)%_;x%2!=0&&p.lineTo(r,o),a=r-l,h=o-c,this._dashOffset=-E(a*a+h*h)},_dashedQuadraticTo:function(t,e,i,n){var r=i,o=n;i=(i+2*t)/3,n=(n+2*e)/3,t=(this._xi+2*t)/3,e=(this._yi+2*e)/3,this._dashedBezierTo(t,e,i,n,r,o)},toStatic:function(){var t=this.data;t instanceof Array&&(t.length=this._len,a&&(this.data=new Float32Array(t)))},getBoundingRect:function(){x[0]=x[1]=b[0]=b[1]=Number.MAX_VALUE,_[0]=_[1]=P[0]=P[1]=-Number.MAX_VALUE;for(var t=this.data,e=0,i=0,n=0,r=0,o=0;o<t.length;){var s=t[o++];switch(1==o&&(n=e=t[o],r=i=t[o+1]),s){case C.M:e=n=t[o++],i=r=t[o++],b[0]=n,b[1]=r,P[0]=n,P[1]=r;break;case C.L:y.fromLine(e,i,t[o],t[o+1],b,P),e=t[o++],i=t[o++];break;case C.C:y.fromCubic(e,i,t[o++],t[o++],t[o++],t[o++],t[o],t[o+1],b,P),e=t[o++],i=t[o++];break;case C.Q:y.fromQuadratic(e,i,t[o++],t[o++],t[o],t[o+1],b,P),e=t[o++],i=t[o++];break;case C.A:var a=t[o++],h=t[o++],l=t[o++],c=t[o++],u=t[o++],f=t[o++]+u,d=(t[o++],1-t[o++]);1==o&&(n=M(u)*l+a,r=k(u)*c+h),y.fromArc(a,h,l,c,u,f,d,b,P),e=M(f)*l+a,i=k(f)*c+h;break;case C.R:n=e=t[o++],r=i=t[o++];var p=t[o++],g=t[o++];y.fromLine(n,r,n+p,r+g,b,P);break;case C.Z:e=n,i=r}v.min(x,x,b),v.max(_,_,P)}return 0===o&&(x[0]=x[1]=_[0]=_[1]=0),new m(x[0],x[1],_[0]-x[0],_[1]-x[1])},rebuildPath:function(t){for(var e,i,n,r,o,s,a=this.data,h=this._ux,l=this._uy,c=this._len,u=0;u<c;){var f=a[u++];switch(1==u&&(e=n=a[u],i=r=a[u+1]),f){case C.M:e=n=a[u++],i=r=a[u++],t.moveTo(n,r);break;case C.L:o=a[u++],s=a[u++],(L(o-n)>h||L(s-r)>l||u===c-1)&&(t.lineTo(o,s),n=o,r=s);break;case C.C:t.bezierCurveTo(a[u++],a[u++],a[u++],a[u++],a[u++],a[u++]),n=a[u-2],r=a[u-1];break;case C.Q:t.quadraticCurveTo(a[u++],a[u++],a[u++],a[u++]),n=a[u-2],r=a[u-1];break;case C.A:var d=a[u++],p=a[u++],g=a[u++],v=a[u++],y=a[u++],m=a[u++],x=a[u++],_=a[u++],b=v<g?g:v,w=v<g?1:g/v,P=v<g?v/g:1,T=y+m;.001<Math.abs(g-v)?(t.translate(d,p),t.rotate(x),t.scale(w,P),t.arc(0,0,b,y,T,1-_),t.scale(1/w,1/P),t.rotate(-x),t.translate(-d,-p)):t.arc(d,p,b,y,T,1-_),1==u&&(e=M(y)*g+d,i=k(y)*v+p),n=M(T)*g+d,r=k(T)*v+p;break;case C.R:e=n=a[u],i=r=a[u+1],t.rect(a[u++],a[u++],a[u++],a[u++]);break;case C.Z:t.closePath(),n=e,r=i}}}},n.CMD=C;var o=n;t.exports=o},function(t,e,i){var n=i(14),r=n.create,_=n.distSquare,S=Math.pow,M=Math.sqrt,o=1e-8,k=M(3),b=r(),w=r(),P=r();function E(t){return-o<t&&t<o}function d(t){return o<t||t<-o}function T(t,e,i,n,r){var o=1-r;return o*o*(o*t+3*r*e)+r*r*(r*n+3*o*i)}function m(t,e,i,n){var r=1-n;return r*(r*t+2*n*e)+n*n*i}e.cubicAt=T,e.cubicDerivativeAt=function(t,e,i,n,r){var o=1-r;return 3*(((e-t)*o+2*(i-e)*r)*o+(n-i)*r*r)},e.cubicRootAt=function(t,e,i,n,r,o){var s=n+3*(e-i)-t,a=3*(i-2*e+t),h=3*(e-t),l=t-r,c=a*a-3*s*h,u=a*h-9*s*l,f=h*h-3*a*l,d=0;if(E(c)&&E(u)){if(E(a))o[0]=0;else 0<=(T=-h/a)&&T<=1&&(o[d++]=T)}else{var p=u*u-4*c*f;if(E(p)){var g=u/c,v=-g/2;0<=(T=-a/s+g)&&T<=1&&(o[d++]=T),0<=v&&v<=1&&(o[d++]=v)}else if(0<p){var y=M(p),m=c*a+1.5*s*(-u+y),x=c*a+1.5*s*(-u-y);0<=(T=(-a-((m=m<0?-S(-m,1/3):S(m,1/3))+(x=x<0?-S(-x,1/3):S(x,1/3))))/(3*s))&&T<=1&&(o[d++]=T)}else{var _=(2*c*a-3*s*u)/(2*M(c*c*c)),b=Math.acos(_)/3,w=M(c),P=Math.cos(b),T=(-a-2*w*P)/(3*s),C=(v=(-a+w*(P+k*Math.sin(b)))/(3*s),(-a+w*(P-k*Math.sin(b)))/(3*s));0<=T&&T<=1&&(o[d++]=T),0<=v&&v<=1&&(o[d++]=v),0<=C&&C<=1&&(o[d++]=C)}}return d},e.cubicExtrema=function(t,e,i,n,r){var o=6*i-12*e+6*t,s=9*e+3*n-3*t-9*i,a=3*e-3*t,h=0;if(E(s)){if(d(o))0<=(c=-a/o)&&c<=1&&(r[h++]=c)}else{var l=o*o-4*s*a;if(E(l))r[0]=-o/(2*s);else if(0<l){var c,u=M(l),f=(-o-u)/(2*s);0<=(c=(-o+u)/(2*s))&&c<=1&&(r[h++]=c),0<=f&&f<=1&&(r[h++]=f)}}return h},e.cubicSubdivide=function(t,e,i,n,r,o){var s=(e-t)*r+t,a=(i-e)*r+e,h=(n-i)*r+i,l=(a-s)*r+s,c=(h-a)*r+a,u=(c-l)*r+l;o[0]=t,o[1]=s,o[2]=l,o[3]=u,o[4]=u,o[5]=c,o[6]=h,o[7]=n},e.cubicProjectPoint=function(t,e,i,n,r,o,s,a,h,l,c){var u,f,d,p,g,v=.005,y=1/0;b[0]=h,b[1]=l;for(var m=0;m<1;m+=.05)w[0]=T(t,i,r,s,m),w[1]=T(e,n,o,a,m),(p=_(b,w))<y&&(u=m,y=p);y=1/0;for(var x=0;x<32&&!(v<1e-4);x++)f=u-v,d=u+v,w[0]=T(t,i,r,s,f),w[1]=T(e,n,o,a,f),p=_(w,b),0<=f&&p<y?(u=f,y=p):(P[0]=T(t,i,r,s,d),P[1]=T(e,n,o,a,d),g=_(P,b),d<=1&&g<y?(u=d,y=g):v*=.5);return c&&(c[0]=T(t,i,r,s,u),c[1]=T(e,n,o,a,u)),M(y)},e.quadraticAt=m,e.quadraticDerivativeAt=function(t,e,i,n){return 2*((1-n)*(e-t)+n*(i-e))},e.quadraticRootAt=function(t,e,i,n,r){var o=t-2*e+i,s=2*(e-t),a=t-n,h=0;if(E(o)){if(d(s))0<=(c=-a/s)&&c<=1&&(r[h++]=c)}else{var l=s*s-4*o*a;if(E(l))0<=(c=-s/(2*o))&&c<=1&&(r[h++]=c);else if(0<l){var c,u=M(l),f=(-s-u)/(2*o);0<=(c=(-s+u)/(2*o))&&c<=1&&(r[h++]=c),0<=f&&f<=1&&(r[h++]=f)}}return h},e.quadraticExtremum=function(t,e,i){var n=t+i-2*e;return 0==n?.5:(t-e)/n},e.quadraticSubdivide=function(t,e,i,n,r){var o=(e-t)*n+t,s=(i-e)*n+e,a=(s-o)*n+o;r[0]=t,r[1]=o,r[2]=a,r[3]=a,r[4]=s,r[5]=i},e.quadraticProjectPoint=function(t,e,i,n,r,o,s,a,h){var l,c=.005,u=1/0;b[0]=s,b[1]=a;for(var f=0;f<1;f+=.05){w[0]=m(t,i,r,f),w[1]=m(e,n,o,f),(v=_(b,w))<u&&(l=f,u=v)}u=1/0;for(var d=0;d<32&&!(c<1e-4);d++){var p=l-c,g=l+c;w[0]=m(t,i,r,p),w[1]=m(e,n,o,p);var v=_(w,b);if(0<=p&&v<u)l=p,u=v;else{P[0]=m(t,i,r,g),P[1]=m(e,n,o,g);var y=_(P,b);g<=1&&y<u?(l=g,u=y):c*=.5}}return h&&(h[0]=m(t,i,r,l),h[1]=m(e,n,o,l)),M(u)}},function(t,e,i){var p=i(14),v=i(30),y=Math.min,m=Math.max,g=Math.sin,x=Math.cos,_=2*Math.PI,b=p.create(),w=p.create(),P=p.create();var T=[],C=[];e.fromPoints=function(t,e,i){if(0!==t.length){var n,r=t[0],o=r[0],s=r[0],a=r[1],h=r[1];for(n=1;n<t.length;n++)r=t[n],o=y(o,r[0]),s=m(s,r[0]),a=y(a,r[1]),h=m(h,r[1]);e[0]=o,e[1]=a,i[0]=s,i[1]=h}},e.fromLine=function(t,e,i,n,r,o){r[0]=y(t,i),r[1]=y(e,n),o[0]=m(t,i),o[1]=m(e,n)},e.fromCubic=function(t,e,i,n,r,o,s,a,h,l){var c,u=v.cubicExtrema,f=v.cubicAt,d=u(t,i,r,s,T);for(h[0]=1/0,h[1]=1/0,l[0]=-1/0,l[1]=-1/0,c=0;c<d;c++){var p=f(t,i,r,s,T[c]);h[0]=y(p,h[0]),l[0]=m(p,l[0])}for(d=u(e,n,o,a,C),c=0;c<d;c++){var g=f(e,n,o,a,C[c]);h[1]=y(g,h[1]),l[1]=m(g,l[1])}h[0]=y(t,h[0]),l[0]=m(t,l[0]),h[0]=y(s,h[0]),l[0]=m(s,l[0]),h[1]=y(e,h[1]),l[1]=m(e,l[1]),h[1]=y(a,h[1]),l[1]=m(a,l[1])},e.fromQuadratic=function(t,e,i,n,r,o,s,a){var h=v.quadraticExtremum,l=v.quadraticAt,c=m(y(h(t,i,r),1),0),u=m(y(h(e,n,o),1),0),f=l(t,i,r,c),d=l(e,n,o,u);s[0]=y(t,r,f),s[1]=y(e,o,d),a[0]=m(t,r,f),a[1]=m(e,o,d)},e.fromArc=function(t,e,i,n,r,o,s,a,h){var l=p.min,c=p.max,u=Math.abs(r-o);if(u%_<1e-4&&1e-4<u)return a[0]=t-i,a[1]=e-n,h[0]=t+i,void(h[1]=e+n);if(b[0]=x(r)*i+t,b[1]=g(r)*n+e,w[0]=x(o)*i+t,w[1]=g(o)*n+e,l(a,b,w),c(h,b,w),(r%=_)<0&&(r+=_),(o%=_)<0&&(o+=_),o<r&&!s?o+=_:r<o&&s&&(r+=_),s){var f=o;o=r,r=f}for(var d=0;d<o;d+=Math.PI/2)r<d&&(P[0]=x(d)*i+t,P[1]=g(d)*n+e,l(a,P,a),c(h,P,h))}},function(t,e,i){var n=i(29),w=i(33),P=i(34),T=i(35),C=i(36),g=i(37).normalizeRadian,x=i(30),S=i(38),M=n.CMD,v=2*Math.PI,k=1e-4;var _=[-1,-1,-1],b=[-1,-1];function E(t,e,i,n,r,o,s,a,h,l){if(e<l&&n<l&&o<l&&a<l||l<e&&l<n&&l<o&&l<a)return 0;var c,u=x.cubicRootAt(e,n,o,a,l,_);if(0===u)return 0;for(var f,d,p=0,g=-1,v=0;v<u;v++){var y=_[v],m=0===y||1===y?.5:1;x.cubicAt(t,i,r,s,y)<h||(g<0&&(g=x.cubicExtrema(e,n,o,a,b),b[1]<b[0]&&1<g&&(void 0,c=b[0],b[0]=b[1],b[1]=c),f=x.cubicAt(e,n,o,a,b[0]),1<g&&(d=x.cubicAt(e,n,o,a,b[1]))),2==g?y<b[0]?p+=f<e?m:-m:y<b[1]?p+=d<f?m:-m:p+=a<d?m:-m:y<b[0]?p+=f<e?m:-m:p+=a<f?m:-m)}return p}function L(t,e,i,n,r,o,s,a){if(e<a&&n<a&&o<a||a<e&&a<n&&a<o)return 0;var h=x.quadraticRootAt(e,n,o,a,_);if(0===h)return 0;var l=x.quadraticExtremum(e,n,o);if(0<=l&&l<=1){for(var c=0,u=x.quadraticAt(e,n,o,l),f=0;f<h;f++){var d=0===_[f]||1===_[f]?.5:1;x.quadraticAt(t,i,r,_[f])<s||(_[f]<l?c+=u<e?d:-d:c+=o<u?d:-d)}return c}d=0===_[0]||1===_[0]?.5:1;return x.quadraticAt(t,i,r,_[0])<s?0:o<e?d:-d}function R(t,e,i,n,r,o,s,a){if(i<(a-=e)||a<-i)return 0;var h=Math.sqrt(i*i-a*a);_[0]=-h,_[1]=h;var l=Math.abs(n-r);if(l<1e-4)return 0;if(l%v<1e-4){r=v;var c=o?1:-1;return s>=_[n=0]+t&&s<=_[1]+t?c:0}if(o){h=n;n=g(r),r=g(h)}else n=g(n),r=g(r);r<n&&(r+=v);for(var u=0,f=0;f<2;f++){var d=_[f];if(s<d+t){var p=Math.atan2(a,d);c=o?1:-1;p<0&&(p=v+p),(n<=p&&p<=r||n<=p+v&&p+v<=r)&&(p>Math.PI/2&&p<1.5*Math.PI&&(c=-c),u+=c)}}return u}function r(t,e,i,n,r){for(var o=0,s=0,a=0,h=0,l=0,c=0;c<t.length;){var u=t[c++];switch(u===M.M&&1<c&&(i||(o+=S(s,a,h,l,n,r))),1==c&&(h=s=t[c],l=a=t[c+1]),u){case M.M:s=h=t[c++],a=l=t[c++];break;case M.L:if(i){if(w.containStroke(s,a,t[c],t[c+1],e,n,r))return!0}else o+=S(s,a,t[c],t[c+1],n,r)||0;s=t[c++],a=t[c++];break;case M.C:if(i){if(P.containStroke(s,a,t[c++],t[c++],t[c++],t[c++],t[c],t[c+1],e,n,r))return!0}else o+=E(s,a,t[c++],t[c++],t[c++],t[c++],t[c],t[c+1],n,r)||0;s=t[c++],a=t[c++];break;case M.Q:if(i){if(T.containStroke(s,a,t[c++],t[c++],t[c],t[c+1],e,n,r))return!0}else o+=L(s,a,t[c++],t[c++],t[c],t[c+1],n,r)||0;s=t[c++],a=t[c++];break;case M.A:var f=t[c++],d=t[c++],p=t[c++],g=t[c++],v=t[c++],y=t[c++],m=(t[c++],1-t[c++]),x=Math.cos(v)*p+f,_=Math.sin(v)*g+d;1<c?o+=S(s,a,x,_,n,r):(h=x,l=_);var b=(n-f)*g/p+f;if(i){if(C.containStroke(f,d,g,v,v+y,m,e,b,r))return!0}else o+=R(f,d,g,v,v+y,m,b,r);s=Math.cos(v+y)*p+f,a=Math.sin(v+y)*g+d;break;case M.R:h=s=t[c++],l=a=t[c++];x=h+t[c++],_=l+t[c++];if(i){if(w.containStroke(h,l,x,l,e,n,r)||w.containStroke(x,l,x,_,e,n,r)||w.containStroke(x,_,h,_,e,n,r)||w.containStroke(h,_,h,l,e,n,r))return!0}else o+=S(x,l,x,_,n,r),o+=S(h,_,h,l,n,r);break;case M.Z:if(i){if(w.containStroke(s,a,h,l,e,n,r))return!0}else o+=S(s,a,h,l,n,r);s=h,a=l}}return i||function(t,e){return Math.abs(t-e)<k}(a,l)||(o+=S(s,a,h,l,n,r)||0),0!==o}e.contain=function(t,e,i){return r(t,0,!1,e,i)},e.containStroke=function(t,e,i,n){return r(t,e,!0,i,n)}},function(t,e){e.containStroke=function(t,e,i,n,r,o,s){if(0===r)return!1;var a=r,h=0;if(e+a<s&&n+a<s||s<e-a&&s<n-a||t+a<o&&i+a<o||o<t-a&&o<i-a)return!1;if(t===i)return Math.abs(o-t)<=a/2;var l=(h=(e-n)/(t-i))*o-s+(t*n-i*e)/(t-i);return l*l/(h*h+1)<=a/2*a/2}},function(t,e,i){var f=i(30);e.containStroke=function(t,e,i,n,r,o,s,a,h,l,c){if(0===h)return!1;var u=h;return!(e+u<c&&n+u<c&&o+u<c&&a+u<c||c<e-u&&c<n-u&&c<o-u&&c<a-u||t+u<l&&i+u<l&&r+u<l&&s+u<l||l<t-u&&l<i-u&&l<r-u&&l<s-u)&&f.cubicProjectPoint(t,e,i,n,r,o,s,a,l,c,null)<=u/2}},function(t,e,i){var c=i(30).quadraticProjectPoint;e.containStroke=function(t,e,i,n,r,o,s,a,h){if(0===s)return!1;var l=s;return!(e+l<h&&n+l<h&&o+l<h||h<e-l&&h<n-l&&h<o-l||t+l<a&&i+l<a&&r+l<a||a<t-l&&a<i-l&&a<r-l)&&c(t,e,i,n,r,o,a,h,null)<=l/2}},function(t,e,i){var d=i(37).normalizeRadian,p=2*Math.PI;e.containStroke=function(t,e,i,n,r,o,s,a,h){if(0===s)return!1;var l=s;a-=t,h-=e;var c=Math.sqrt(a*a+h*h);if(i<c-l||c+l<i)return!1;if(Math.abs(n-r)%p<1e-4)return!0;if(o){var u=n;n=d(r),r=d(u)}else n=d(n),r=d(r);r<n&&(r+=p);var f=Math.atan2(h,a);return f<0&&(f+=p),n<=f&&f<=r||n<=f+p&&f+p<=r}},function(t,e){var i=2*Math.PI;e.normalizeRadian=function(t){return(t%=i)<0&&(t+=i),t}},function(t,e){t.exports=function(t,e,i,n,r,o){if(e<o&&n<o||o<e&&o<n)return 0;if(n===e)return 0;var s=n<e?1:-1,a=(o-e)/(n-e);return 1!=a&&0!=a||(s=n<e?.5:-.5),r<a*(i-t)+t?s:0}},function(t,e){function i(t,e){this.image=t,this.repeat=e,this.type="pattern"}i.prototype.getCanvasPattern=function(t){return t.createPattern(this.image,this.repeat||"repeat")};var n=i;t.exports=n},function(t,e,i){var n=i(29),_=i(14).applyTransform,b=n.CMD,w=[[],[],[]],P=Math.sqrt,T=Math.atan2;t.exports=function(t,e){var i,n,r,o,s,a=t.data,h=b.M,l=b.C,c=b.L,u=b.R,f=b.A,d=b.Q;for(o=r=0;r<a.length;){switch(i=a[r++],o=r,n=0,i){case h:case c:n=1;break;case l:n=3;break;case d:n=2;break;case f:var p=e[4],g=e[5],v=P(e[0]*e[0]+e[1]*e[1]),y=P(e[2]*e[2]+e[3]*e[3]),m=T(-e[1]/y,e[0]/v);a[r]*=v,a[r++]+=p,a[r]*=y,a[r++]+=g,a[r++]*=v,a[r++]*=y,a[r++]+=m,a[r++]+=m,o=r+=2;break;case u:x[0]=a[r++],x[1]=a[r++],_(x,x,e),a[o++]=x[0],a[o++]=x[1],x[0]+=a[r++],x[1]+=a[r++],_(x,x,e),a[o++]=x[0],a[o++]=x[1]}for(s=0;s<n;s++){var x;(x=w[s])[0]=a[r++],x[1]=a[r++],_(x,x,e),a[o++]=x[0],a[o++]=x[1]}}}},function(t,e){function i(t){this.colorStops=t||[]}i.prototype={constructor:i,addColorStop:function(t,e){this.colorStops.push({offset:t,color:e})}};var n=i;t.exports=n},function(t,e){function i(){this.on("mousedown",this._dragStart,this),this.on("mousemove",this._drag,this),this.on("mouseup",this._dragEnd,this),this.on("globalout",this._dragEnd,this)}function h(t,e){return{target:t,topTarget:e&&e.topTarget}}i.prototype={constructor:i,_dragStart:function(t){var e=t.target;e&&e.draggable&&((this._draggingTarget=e).dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.dispatchToElement(h(e,t),"dragstart",t.event))},_drag:function(t){var e=this._draggingTarget;if(e){var i=t.offsetX,n=t.offsetY,r=i-this._x,o=n-this._y;this._x=i,this._y=n,e.drift(r,o,t),this.dispatchToElement(h(e,t),"drag",t.event);var s=this.findHover(i,n,e).target,a=this._dropTarget;e!==(this._dropTarget=s)&&(a&&s!==a&&this.dispatchToElement(h(a,t),"dragleave",t.event),s&&s!==a&&this.dispatchToElement(h(s,t),"dragenter",t.event))}},_dragEnd:function(t){var e=this._draggingTarget;e&&(e.dragging=!1),this.dispatchToElement(h(e,t),"dragend",t.event),this._dropTarget&&this.dispatchToElement(h(this._dropTarget,t),"drop",t.event),this._draggingTarget=null,this._dropTarget=null}};var n=i;t.exports=n},function(t,e,i){function o(t){for(var e in t=t||{},n.call(this,t),t)t.hasOwnProperty(e)&&(this[e]=t[e]);this._children=[],this.__storage=null,this.__dirty=!0}var s=i(4),n=i(9),l=i(26);o.prototype={constructor:o,isGroup:!0,type:"group",silent:!1,children:function(){return this._children.slice()},childAt:function(t){return this._children[t]},childOfName:function(t){for(var e=this._children,i=0;i<e.length;i++)if(e[i].name===t)return e[i]},childCount:function(){return this._children.length},add:function(t){return t&&t!==this&&t.parent!==this&&(this._children.push(t),this._doAdd(t)),this},addBefore:function(t,e){if(t&&t!==this&&t.parent!==this&&e&&e.parent===this){var i=this._children,n=i.indexOf(e);0<=n&&(i.splice(n,0,t),this._doAdd(t))}return this},_doAdd:function(t){t.parent&&t.parent.remove(t);var e=(t.parent=this).__storage,i=this.__zr;e&&e!==t.__storage&&(e.addToStorage(t),t instanceof o&&t.addChildrenToStorage(e)),i&&i.refresh()},remove:function(t){var e=this.__zr,i=this.__storage,n=this._children,r=s.indexOf(n,t);return r<0||(n.splice(r,1),t.parent=null,i&&(i.delFromStorage(t),t instanceof o&&t.delChildrenFromStorage(i)),e&&e.refresh()),this},removeAll:function(){var t,e,i=this._children,n=this.__storage;for(e=0;e<i.length;e++)t=i[e],n&&(n.delFromStorage(t),t instanceof o&&t.delChildrenFromStorage(n)),t.parent=null;return i.length=0,this},eachChild:function(t,e){for(var i=this._children,n=0;n<i.length;n++){var r=i[n];t.call(e,r,n)}return this},traverse:function(t,e){for(var i=0;i<this._children.length;i++){var n=this._children[i];t.call(e,n),"group"===n.type&&n.traverse(t,e)}return this},addChildrenToStorage:function(t){for(var e=0;e<this._children.length;e++){var i=this._children[e];t.addToStorage(i),i instanceof o&&i.addChildrenToStorage(t)}},delChildrenFromStorage:function(t){for(var e=0;e<this._children.length;e++){var i=this._children[e];t.delFromStorage(i),i instanceof o&&i.delChildrenFromStorage(t)}},dirty:function(){return this.__dirty=!0,this.__zr&&this.__zr.refresh(),this},getBoundingRect:function(t){for(var e=null,i=new l(0,0,0,0),n=t||this._children,r=[],o=0;o<n.length;o++){var s=n[o];if(!s.ignore&&!s.invisible){var a=s.getBoundingRect(),h=s.getLocalTransform(r);h?(i.copy(a),i.applyTransform(h),(e=e||i.clone()).union(i)):(e=e||a.clone()).union(a)}}return e||i}},s.inherits(o,n);var r=o;t.exports=r},function(t,e,i){var n=i(7),r=i(26),o=i(4),p=i(27);function s(t){n.call(this,t)}s.prototype={constructor:s,type:"image",brush:function(t,e){var i=this.style,n=i.image;i.bind(t,this,e);var r=this._image=p.createOrUpdateImage(n,this._image,this,this.onload);if(r&&p.isImageReady(r)){var o=i.x||0,s=i.y||0,a=i.width,h=i.height,l=r.width/r.height;if(null==a&&null!=h?a=h*l:null==h&&null!=a?h=a/l:null==a&&null==h&&(a=r.width,h=r.height),this.setTransform(t),i.sWidth&&i.sHeight){var c=i.sx||0,u=i.sy||0;t.drawImage(r,c,u,i.sWidth,i.sHeight,o,s,a,h)}else if(i.sx&&i.sy){var f=a-(c=i.sx),d=h-(u=i.sy);t.drawImage(r,c,u,f,d,o,s,a,h)}else t.drawImage(r,o,s,a,h);this.restoreTransform(t),null!=i.text&&this.drawRectText(t,this.getBoundingRect())}},getBoundingRect:function(){var t=this.style;return this._rect||(this._rect=new r(t.x||0,t.y||0,t.width||0,t.height||0)),this._rect}},o.inherits(s,n);var a=s;t.exports=a},function(t,e,i){function n(t){r.call(this,t)}var r=i(7),o=i(4),s=i(25),a=i(24);n.prototype={constructor:n,type:"text",brush:function(t,e){var i=this.style;this.__dirty&&a.normalizeTextStyle(i,!0),i.fill=i.stroke=i.shadowBlur=i.shadowColor=i.shadowOffsetX=i.shadowOffsetY=null;var n=i.text;null!=n&&(n+=""),i.bind(t,this,e),a.needDrawText(n,i)&&(this.setTransform(t),a.renderText(this,t,n,i),this.restoreTransform(t))},getBoundingRect:function(){var t=this.style;if(this.__dirty&&a.normalizeTextStyle(t,!0),!this._rect){var e=t.text;null!=e?e+="":e="";var i=s.getBoundingRect(t.text+"",t.font,t.textAlign,t.textVerticalAlign,t.textPadding,t.rich);if(i.x+=t.x||0,i.y+=t.y||0,a.getStroke(t.textStroke,t.textStrokeWidth)){var n=t.textStrokeWidth;i.x-=n/2,i.y-=n/2,i.width+=n,i.height+=n}this._rect=i}return this._rect}},o.inherits(n,r);var h=n;t.exports=h},function(t,e,i){var n=i(6).extend({type:"circle",shape:{cx:0,cy:0,r:0},buildPath:function(t,e,i){i&&t.moveTo(e.cx+e.r,e.cy),t.arc(e.cx,e.cy,e.r,0,2*Math.PI,!0)}});t.exports=n},function(t,e,i){var n=i(6),r=i(48),o=n.extend({type:"sector",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},brush:r(n.prototype.brush),buildPath:function(t,e){var i=e.cx,n=e.cy,r=Math.max(e.r0||0,0),o=Math.max(e.r,0),s=e.startAngle,a=e.endAngle,h=e.clockwise,l=Math.cos(s),c=Math.sin(s);t.moveTo(l*r+i,c*r+n),t.lineTo(l*o+i,c*o+n),t.arc(i,n,o,s,a,!h),t.lineTo(Math.cos(a)*r+i,Math.sin(a)*r+n),0!==r&&t.arc(i,n,r,a,s,h),t.closePath()}});t.exports=o},function(t,e,i){var n=i(49),l=[["shadowBlur",0],["shadowColor","#000"],["shadowOffsetX",0],["shadowOffsetY",0]];t.exports=function(h){return n.browser.ie&&11<=n.browser.version?function(){var t,e=this.__clipPaths,i=this.style;if(e)for(var n=0;n<e.length;n++){var r=e[n],o=r&&r.shape,s=r&&r.type;if(o&&("sector"===s&&o.startAngle===o.endAngle||"rect"===s&&(!o.width||!o.height))){for(var a=0;a<l.length;a++)l[a][2]=i[l[a][0]],i[l[a][0]]=l[a][1];t=!0;break}}if(h.apply(this,arguments),t)for(a=0;a<l.length;a++)i[l[a][0]]=l[a][2]}:h}},function(t,e){var i="undefined"==typeof navigator?{browser:{},os:{},node:!0,canvasSupported:!0,svgSupported:!0}:function(t){var e={},i=t.match(/Firefox\/([\d.]+)/),n=t.match(/MSIE\s([\d.]+)/)||t.match(/Trident\/.+?rv:(([\d.]+))/),r=t.match(/Edge\/([\d.]+)/),o=/micromessenger/i.test(t);i&&(e.firefox=!0,e.version=i[1]);n&&(e.ie=!0,e.version=n[1]);r&&(e.edge=!0,e.version=r[1]);o&&(e.weChat=!0);return{browser:e,os:{},node:!1,canvasSupported:!!document.createElement("canvas").getContext,svgSupported:"undefined"!=typeof SVGRect,touchEventsSupported:"ontouchstart"in window&&!e.ie&&!e.edge,pointerEventsSupported:"onpointerdown"in window&&(e.edge||e.ie&&11<=e.version)}}(navigator.userAgent);t.exports=i},function(t,e,i){var n=i(6).extend({type:"ring",shape:{cx:0,cy:0,r:0,r0:0},buildPath:function(t,e){var i=e.cx,n=e.cy,r=2*Math.PI;t.moveTo(i+e.r,n),t.arc(i,n,e.r,0,r,!1),t.moveTo(i+e.r0,n),t.arc(i,n,e.r0,0,r,!0)}});t.exports=n},function(t,e,i){var n=i(6),r=i(52),o=n.extend({type:"polygon",shape:{points:null,smooth:!1,smoothConstraint:null},buildPath:function(t,e){r.buildPath(t,e,!0)}});t.exports=o},function(t,e,i){var f=i(53),d=i(54);e.buildPath=function(t,e,i){var n=e.points,r=e.smooth;if(n&&2<=n.length){if(r&&"spline"!==r){var o=d(n,r,i,e.smoothConstraint);t.moveTo(n[0][0],n[0][1]);for(var s=n.length,a=0;a<(i?s:s-1);a++){var h=o[2*a],l=o[2*a+1],c=n[(a+1)%s];t.bezierCurveTo(h[0],h[1],l[0],l[1],c[0],c[1])}}else{"spline"===r&&(n=f(n,i)),t.moveTo(n[0][0],n[0][1]);a=1;for(var u=n.length;a<u;a++)t.lineTo(n[a][0],n[a][1])}i&&t.closePath()}}},function(t,e,i){var v=i(14).distance;function y(t,e,i,n,r,o,s){var a=.5*(i-t),h=.5*(n-e);return(2*(e-i)+a+h)*s+(-3*(e-i)-2*a-h)*o+a*r+e}t.exports=function(t,e){for(var i=t.length,n=[],r=0,o=1;o<i;o++)r+=v(t[o-1],t[o]);var s=r/2;for(s=s<i?i:s,o=0;o<s;o++){var a,h,l,c=o/(s-1)*(e?i:i-1),u=Math.floor(c),f=c-u,d=t[u%i];l=e?(a=t[(u-1+i)%i],h=t[(u+1)%i],t[(u+2)%i]):(a=t[0===u?u:u-1],h=t[i-2<u?i-1:u+1],t[i-3<u?i-1:u+2]);var p=f*f,g=f*p;n.push([y(a[0],d[0],h[0],l[0],f,p,g),y(a[1],d[1],h[1],l[1],f,p,g)])}return n}},function(t,e,i){var n=i(14),_=n.min,b=n.max,w=n.scale,P=n.distance,T=n.add,C=n.clone,S=n.sub;t.exports=function(t,e,i,n){var r,o,s,a,h=[],l=[],c=[],u=[];if(n){s=[1/0,1/0],a=[-1/0,-1/0];for(var f=0,d=t.length;f<d;f++)_(s,s,t[f]),b(a,a,t[f]);_(s,s,n[0]),b(a,a,n[1])}for(f=0,d=t.length;f<d;f++){var p=t[f];if(i)r=t[f?f-1:d-1],o=t[(f+1)%d];else{if(0===f||f===d-1){h.push(C(t[f]));continue}r=t[f-1],o=t[f+1]}S(l,o,r),w(l,l,e);var g=P(p,r),v=P(p,o),y=g+v;0!==y&&(g/=y,v/=y),w(c,l,-g),w(u,l,v);var m=T([],p,c),x=T([],p,u);n&&(b(m,m,s),_(m,m,a),b(x,x,s),_(x,x,a)),h.push(m),h.push(x)}return i&&h.push(h.shift()),h}},function(t,e,i){var n=i(6),r=i(52),o=n.extend({type:"polyline",shape:{points:null,smooth:!1,smoothConstraint:null},style:{stroke:"#000",fill:null},buildPath:function(t,e){r.buildPath(t,e,!1)}});t.exports=o},function(t,e,i){var n=i(6),s=i(28),r=n.extend({type:"rect",shape:{r:0,x:0,y:0,width:0,height:0},buildPath:function(t,e){var i=e.x,n=e.y,r=e.width,o=e.height;e.r?s.buildPath(t,e):t.rect(i,n,r,o),t.closePath()}});t.exports=r},function(t,e,i){var n=i(6).extend({type:"line",shape:{x1:0,y1:0,x2:0,y2:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(t,e){var i=e.x1,n=e.y1,r=e.x2,o=e.y2,s=e.percent;0!==s&&(t.moveTo(i,n),s<1&&(r=i*(1-s)+r*s,o=n*(1-s)+o*s),t.lineTo(r,o))},pointAt:function(t){var e=this.shape;return[e.x1*(1-t)+e.x2*t,e.y1*(1-t)+e.y2*t]}});t.exports=n},function(t,e,i){var n=i(6),r=i(14),o=i(30),u=o.quadraticSubdivide,f=o.cubicSubdivide,s=o.quadraticAt,a=o.cubicAt,h=o.quadraticDerivativeAt,l=o.cubicDerivativeAt,d=[];function c(t,e,i){var n=t.cpx2,r=t.cpy2;return null===n||null===r?[(i?l:a)(t.x1,t.cpx1,t.cpx2,t.x2,e),(i?l:a)(t.y1,t.cpy1,t.cpy2,t.y2,e)]:[(i?h:s)(t.x1,t.cpx1,t.x2,e),(i?h:s)(t.y1,t.cpy1,t.y2,e)]}var p=n.extend({type:"bezier-curve",shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(t,e){var i=e.x1,n=e.y1,r=e.x2,o=e.y2,s=e.cpx1,a=e.cpy1,h=e.cpx2,l=e.cpy2,c=e.percent;0!==c&&(t.moveTo(i,n),null==h||null==l?(c<1&&(u(i,s,r,c,d),s=d[1],r=d[2],u(n,a,o,c,d),a=d[1],o=d[2]),t.quadraticCurveTo(s,a,r,o)):(c<1&&(f(i,s,h,r,c,d),s=d[1],h=d[2],r=d[3],f(n,a,l,o,c,d),a=d[1],l=d[2],o=d[3]),t.bezierCurveTo(s,a,h,l,r,o)))},pointAt:function(t){return c(this.shape,t,!1)},tangentAt:function(t){var e=c(this.shape,t,!0);return r.normalize(e,e)}});t.exports=p},function(t,e,i){var n=i(6).extend({type:"arc",shape:{cx:0,cy:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},style:{stroke:"#000",fill:null},buildPath:function(t,e){var i=e.cx,n=e.cy,r=Math.max(e.r,0),o=e.startAngle,s=e.endAngle,a=e.clockwise,h=Math.cos(o),l=Math.sin(o);t.moveTo(h*r+i,l*r+n),t.arc(i,n,r,o,s,!a)}});t.exports=n},function(t,e,i){function n(t,e,i,n,r,o){this.x=null==t?0:t,this.y=null==e?0:e,this.x2=null==i?1:i,this.y2=null==n?0:n,this.type="linear",this.global=o||!1,s.call(this,r)}var r=i(4),s=i(41);n.prototype={constructor:n},r.inherits(n,s);var o=n;t.exports=o},function(t,e,i){function n(t,e,i,n,r){this.x=null==t?.5:t,this.y=null==e?.5:e,this.r=null==i?.5:i,this.type="radial",this.global=r||!1,o.call(this,n)}var r=i(4),o=i(41);n.prototype={constructor:n},r.inherits(n,o);var s=n;t.exports=s},function(t,e,i){function n(t){"string"==typeof t?this._fromStr(t):t&&(t.property&&(this.property=t.property),null!=t.duration&&(this.duration=t.duration),t.easing&&(this.easing=t.easing),t.delay&&(this.delay=t.delay)),"*"!==this.property?this.property=this.property.split(","):this.property=r}var f=i(4),a=i(8),h=i(14).copy,r=["position","rotation","scale","style","shape"];n.prototype={constructor:n,property:"*",easing:"Linear",duration:500,delay:0,_fromStr:function(t){var e=t.split(/\s+/g);this.property=e[0],this.duration=+e[1],this.delay=+e[2],this.easing=e[3]}};function o(t){t=t||{},this._states={},this._el=t.el,this._subStates=[],this._transitionAnimators=[],t.initialState&&(this._initialState=t.initialState);var e=t.states;if(e)for(var i in e)if(e.hasOwnProperty(i)){var n=e[i];this._addState(i,n)}this.setState(this._initialState)}o.prototype={constructor:o,_initialState:"normal",_currentState:"",el:function(){return this._el},_addState:function(t,e){if((this._states[t]=e).transition&&(e.transition=new n(e.transition)),t!==this._initialState)this._extendFromInitial(e);else{var i=this._el;for(var t in f.merge(e.style,i.style,!1,!1),e.shape?f.merge(e.shape,i.shape,!1,!0):e.shape=f.clone(i.shape,!0),this._states)this._states.hasOwnProperty(t)&&this._extendFromInitial(this._states[t])}},_extendFromInitial:function(t){var e=this._states[this._initialState];e&&t!==e&&f.merge(t,e,!1,!0)},setState:function(t,e){if(t!==this._currentState||this.transiting()){var i=this._states[t];if(i){if(this._stopTransition(),!e){var n=this._states[this._currentState];n&&n.onleave&&n.onleave.call(this),i.onenter&&i.onenter.call(this)}if(this._currentState=t,this._el){var r=this._el;if(null!=i.zlevel&&(r.zlevel=i.zlevel),null!=i.z&&(r.z=i.z),i.position&&h(r.position,i.position),i.scale&&h(r.scale,i.scale),null!=i.rotation&&(r.rotation=i.rotation),i.style){var o=this._states[this._initialState];r.style=new a,o&&r.style.extendFrom(o.style,!1),t!=this._initialState&&o.style!==i.style&&r.style.extendFrom(i.style,!0)}i.shape&&(r.shape=f.clone(i.shape,!0)),r.dirty()}}for(var s=0;s<this._subStates.length;s++)this._subStates.setState(t)}},getState:function(){return this._currentState},transitionState:function(t,e){if(t!==this._currentState||this.transiting()){var i=this._states[t],n=/$[style|shape]\./,r=this,o={};if(i){r._stopTransition();var s=r._el;if(i.transition&&s&&s.__zr){function a(){0===--c&&(r.setState(t),e&&e())}for(var h=i.transition,l=h.property,c=0,u=0;u<l.length;u++){var f=l[u];if("style"===f||"shape"===f){if(i[f])for(var d in i[f])if(i[f].hasOwnProperty(d)){var p=f+"."+d;o[p]||(o[p]=1,c+=r._animProp(i,f,d,h,a))}}else{if(o[f])continue;if(o[f]=1,f.match(n)){var g=f.slice(0,5);f=f.slice(6),c+=r._animProp(i,g,f,h,a)}else c+=r._animProp(i,"",f,h,a)}}0===c&&(r.setState(t),e&&e())}else r.setState(t),e&&e()}var v=r._subStates;for(u=0;u<v.length;u++)v.transitionState(t)}},_animProp:function(t,e,i,n,r){var o=this._el,s=e?t[e]:t,a=e?o[e]:o,h=s&&i in s&&a&&i in a,l=this._transitionAnimators;if(h){var c={};if(s[i]===a[i])return 0;c[i]=s[i];var u=o.animate(e).when(n.duration,c).delay(n.dealy).done(function(){var t=f.indexOf(l,1);0<t&&l.splice(t,1),r()}).start(n.easing);return l.push(u),1}return 0},_stopTransition:function(){for(var t=this._transitionAnimators,e=0;e<t.length;e++)t[e].stop();t.length=0},transiting:function(){return 0<this._transitionAnimators.length},addSubStates:function(t){this._subStates.push(t)},removeSubStates:function(t){0<=f.indexOf(this._subStates,t)&&this._subStates.splice(t,1)}};var s=o;t.exports=s},function(t,e,i){var f=i(64),l=i(65),c=i(26),d=i(4);function r(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function u(t,e){if(t.startPoint.x==t.endPoint.x&&e.startPoint.x==e.endPoint.x)return t.startPoint.x==e.startPoint.x&&(t.contains(e.startPoint.x,e.startPoint.y)||t.contains(e.endPoint.x,e.endPoint.y));if(t.startPoint.x==t.endPoint.x||e.startPoint.x==e.endPoint.x){if(t.startPoint.x==t.endPoint.x){var i=t;t=e,e=i}var n=(t.endPoint.y-t.startPoint.y)/(t.endPoint.x-t.startPoint.x),r=t.startPoint.y-n*t.startPoint.x,o=e.startPoint.x,s=n*o+r;return t.contains(o,s)&&e.contains(o,s)}var a=(t.endPoint.y-t.startPoint.y)/(t.endPoint.x-t.startPoint.x),h=t.startPoint.y-a*t.startPoint.x,l=(e.endPoint.y-e.startPoint.y)/(e.endPoint.x-e.startPoint.x),c=e.startPoint.y-l*e.startPoint.x;return a==l?h==c&&(t.contains(e.startPoint.x,e.startPoint.y)||t.contains(e.endPoint.x,e.endPoint.y)):(s=a*(o=(c-h)/(a-l))+h,t.contains(o,s)&&e.contains(o,s))}function n(t){return 0<t?1:t<0?-1:0}function o(t,e){return[[1,0,t],[0,1,e],[0,0,1]]}function s(t,e){return Math.round(t*Math.pow(10,e))/Math.pow(10,e)}function p(t,e,i){return e=e||"type",i=i||"GroupNode",t.parent&&t.parent[e]===i?t.position[0]+p(t.parent):t.position[0]}function g(t,e,i){return e=e||"type",i=i||"GroupNode",t.parent&&t.parent[e]===i?t.position[1]+g(t.parent):t.position[1]}function a(t,e){var i=t.clipPath,n=t.getBoundingRect();i&&(n=i.getBoundingRect());var r=[];r[0]=[-n.width/2,-n.height/2],r[1]=[n.width/2,-n.height/2],r[2]=[n.width/2,n.height/2],r[3]=[-n.width/2,n.height/2],r[4]=[-n.width/2,-n.height/2];var o=t.position[0],s=t.position[1];t.parent&&e&&("GroupNode"!==t.parent.type&&"SubProcess"!==t.parent.nodeType||(o+=p(t.parent),s+=g(t.parent)));var a=new c(Number(o+n.x),Number(s+n.y),Number(n.width),Number(n.height)),h=Number(o)+Number(n.width)/2+Number(n.x),l=Number(s)+Number(n.height)/2+Number(n.y);return{x:Number(h),y:Number(l),width:Number(n.width),height:Number(n.height),points:r,boundingRect:a}}var h={createNew:function(){var r=[];return{add:function(t,e){this.get(t).push(e)},getsimilar:function(t){var i=[],n=t.split(",");return r.forEach(function(t){var e=t.key.split(",");-1<e[0].indexOf(n[0])&&-1<e[1].indexOf(n[1])&&(i=i.concat(t.value))}),i.length<=0&&r.push({key:t,value:i}),i},get:function(t){for(var e=0;e<r.length;e++)if(t==r[e].key)return r[e].value;var i=[];return r.push({key:t,value:i}),i},keys:function(){for(var t=[],e=0;e<r.length;e++)t.push(r[e].key);return t},top:function(){return r[r.length-1]},remove:function(t){for(var e=-1,i=0;i<r.length;i++)if(t==r[i].key){e=i;break}return r.splice(e,1)[0]},removeItem:function(t,e){var i=this.get(t),n=d.indexOf(i,e);i.splice(n,1)},removeTop:function(){return r.splice(r.length-1,1)[0]},length:function(){return r.length},clear:function(){r.splice(0,r.length)}}}};function v(t){return"\\"+x[t]}var y={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},m=/(.)^/,x={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},_=/\\|'|\r|\n|\u2028|\u2029/g;function b(){}b.extend=function(t){function e(){}var i,n,r=this,o=t&&t.init?t.init:function(){r.apply(this,arguments)};for(i in e.prototype=r.prototype,n=o.fn=o.prototype=new e,t)null!=t[i]&&t[i].constructor===Object?n[i]=d.mergeAll([{},e.prototype[i],t[i]],!0):n[i]=t[i];return(n.constructor=o).extend=r.extend,o},t.exports={inherits:function(t,e){var i=t.prototype;function n(){}for(var r in n.prototype=e.prototype,t.prototype=new n,i)t.prototype[r]=i[r];(t.prototype.constructor=t).superClass=e},getUUID:function(){for(var t,e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=new Array(36),n=0,r=0;r<36;r++)8==r||13==r||18==r||23==r?i[r]="-":14==r?i[r]="4":(n<=2&&(n=33554432+16777216*Math.random()|0),t=15&n,n>>=4,i[r]=e[19==r?3&t|8:t]);return"sid-"+i.join("")},distance:r,getPolylineLength:function(t){for(var e=0,i=0;i<t.length-1;i++)e+=r(t[i],t[i+1]);return e},max:function(t){if(0==t.lenght)return NaN;for(var e=t[0],i=0;i<t.length;i++)e<t[i]&&(e=t[i]);return e},min:function(t){if(0==t.lenght)return NaN;for(var e=t[0],i=0;i<t.length;i++)e>t[i]&&(e=t[i]);return e},isEmpty:function(t){return null==t||(d.isArrayLike(t)&&(d.isArray(t)||d.isString(t))?0===t.length:void 0)},mergeOpt:function t(e,i,n,r){if(!d.isObject(i)||!d.isObject(e))return n?d.clone(i):e;for(var o in i)if(i.hasOwnProperty(o)){var s=e[o],a=i[o];!d.isObject(a)||!d.isObject(s)||d.isArray(a)||d.isArray(s)||d.isDom(a)||d.isDom(s)||d.isBuiltInObject(a)||d.isBuiltInObject(s)||d.isPrimitive(a)||d.isPrimitive(s)?!n&&o in e||o!==r&&(e[o]=d.clone(i[o],!0)):t(s,a,n,r)}return e},orthogonalPath:function(t){if(t.length<=1)return!0;for(var e=0;e<t.length-1;e++)if(t[e].x!=t[e+1].x&&t[e].y!=t[e+1].y)return!1;return!0},polylineIntersectsRectangle:function(t,e,i){var n=[];n.push(new l(new f(e[0],e[1]),new f(e[2],e[1]))),n.push(new l(new f(e[2],e[1]),new f(e[2],e[3]))),n.push(new l(new f(e[2],e[3]),new f(e[0],e[3]))),n.push(new l(new f(e[0],e[3]),new f(e[0],e[1])));for(var r=0;r<t.length-1;r++)for(var o=new l(t[r],t[r+1]),s=0;s<n.length;s++)if(u(o,n[s]))return!0;if(i)for(var a=new l(t[t.length-1],t[0]),h=0;h<n.length;h++)if(u(a,n[h]))return!0;return!1},scorePath:function(t){if(t.length<=2)return-1;for(var e=0,i=1;i<t.length-1;i++)if(t[i-1].x==t[i].x&&t[i].x==t[i+1].x){if(n(t[i+1].y-t[i].y)!=n(t[i].y-t[i-1].y))return-1;e++}else if(t[i-1].y==t[i].y&&t[i].y==t[i+1].y){if(n(t[i+1].x-t[i].x)!=n(t[i].x-t[i-1].x))return-1;e++}else e--;return e},forwardPath:function(t){if(t.length<=2)return!0;for(var e=0;e<t.length-2;e++)if(t[e].x==t[e+1].x&&t[e+1].x==t[e+2].x){if(0!=n(t[e+1].y-t[e].y)&&n(t[e+1].y-t[e].y)==-1*n(t[e+2].y-t[e+1].y))return!1}else if(t[e].y==t[e+1].y&&t[e+1].y==t[e+2].y&&0!=n(t[e+1].x-t[e].x)&&n(t[e+1].x-t[e].x)==-1*n(t[e+2].x-t[e+1].x))return!1;return!0},traslatePoints:function(t,e){var i=[];if(e){for(var n=0;n<t.length;n++){var r=t[n];i.push(new f(r[0],r[1]))}return i}for(var o=0;o<t.length;o++){var s=t[o];i.push([s.x,s.y])}return i},getEndPoint:function(t,e,i){var n=t.clone();return n.transform(o(-t.x,-t.y)),n.y-=e,n.transform(function(t){return[[Math.cos(t),-Math.sin(t),0],[Math.sin(t),Math.cos(t),0],[0,0,1]]}(i)),n.transform(o(t.x,t.y)),n},getConnectorPoints:function(t,e){e=e||{};var i=d.clone(t.boundingRect||t),h=e.rotation,l={left:new f(i.x,i.y+i.height/2),top:new f(i.x+i.width/2,i.y),right:new f(i.x+i.width,i.y+i.height/2),bottom:new f(i.x+i.width/2,i.y+i.height),center:new f(i.x+i.width/2,i.y+i.height/2)};if(0<Object.keys(e).length&&0<Math.abs(h)){var n=t.boundingRect?t:a(e),c=n.x,u=n.y;Object.keys(l).forEach(function(t){var e=l[t],i=c-e.x,n=u-e.y,r=Math.sin(-h),o=Math.cos(-h),s=c-(i*o-n*r),a=u-(i*r+n*o);l[t].x=s,l[t].y=a})}return l},getConnectorControls:function(t,e){e=e||{};var i=d.clone(t.boundingRect),h=e.rotation,l={tl:new f(i.x,i.y),tc:new f(i.x+i.width/2,i.y-4),tr:new f(i.x+i.width,i.y),bl:new f(i.x,i.y+i.height),br:new f(i.x+i.width,i.y+i.height),mtr:new f(i.x+i.width/2,i.y-20)};if(0<Object.keys(e).length&&0<Math.abs(h)){var n=t,c=n.x,u=n.y;Object.keys(l).forEach(function(t){var e=l[t],i=c-e.x,n=u-e.y,r=Math.sin(-h),o=Math.cos(-h),s=c-(i*o-n*r),a=u-(i*r+n*o);l[t].x=s,l[t].y=a})}return l},calculatePoints:function(t,e,i){var n=Array.isArray(t)?t[0]:t.x,r=Array.isArray(t)?t[1]:t.y,o=e.x-n,s=e.y-r,a=Math.sin(-i),h=Math.cos(-i),l=e.x-(o*h-s*a),c=e.y-(o*a+s*h);return Array.isArray(t)?[l,c]:{x:l,y:c}},tangentRotation:function(t,e){return-Math.PI/2-Math.atan2(e.y-t.y,e.x-t.x)},collinearity:function(t,e,i,n){var r=t.x*e.y+t.y*i.x+e.x*i.y-(e.y*i.x+t.y*e.x+t.x*i.y);return n?Math.abs(r)<=n:0==r},translationMatrix:o,scaleMatrix:function(t,e){return null==e&&(e=t),[[t,0,0],[0,e,0],[0,0,1]]},round:s,getLength:function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},getAngle:function(t,e,i){t.x=s(t.x,5),t.y=s(t.y,5),e.x=s(e.x,5),e.y=s(e.y,5);var n=Math.atan((e.x-t.x)/(e.y-t.y));for(n=-n,e.x>=t.x&&e.y>=t.y?n+=Math.PI:e.x<=t.x&&e.y>=t.y?n+=Math.PI:e.x<=t.x&&e.y<=t.y&&(n+=2*Math.PI);n>=2*Math.PI;)n-=2*Math.PI;return isNaN(n)&&(n=0),i&&(n=Math.round(n/i)*i),n},getParentX:p,getParentY:g,getRect:a,StackedMap:h,getMaxLineLength:function(t){for(var e=r(t[0],t[1]),i=[t[0],t[1]],n=1;n<t.length-1;n++)e<r(t[n],t[n+1])&&(e=r(t[n],t[n+1]),i=[t[n],t[n+1]]);return i},randomColor:function(){for(var t=["0","2","3","4","5","6","7","8","9","a","b","c","d"],e="#",i=0;i<6;i++)e+=t[Math.round(15*Math.random())];return e},template:function(o,t,e){!t&&e&&(t=e),t=t||{},t=d.defaults(t,y,!0);var i=RegExp([(t.escape||m).source,(t.interpolate||m).source,(t.evaluate||m).source].join("|")+"|$","g"),s=0,a="__p+='";o.replace(i,function(t,e,i,n,r){return a+=o.slice(s,r).replace(_,v),s=r+t.length,e?a+="'+\n((__t=("+e+"))==null?'':_.escape(__t))+\n'":i?a+="'+\n((__t=("+i+"))==null?'':__t)+\n'":n&&(a+="';\n"+n+"\n__p+='"),t}),a+="';\n",t.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{var n=new Function(t.variable||"obj",a)}catch(t){throw t.source=a,t}function r(t){return n.call(this,t)}var h=t.variable||"obj";return r.source="function("+h+"){\n"+a+"}",r},isUndefined:function(t){return void 0===t},getSoltPoints:function(t){return[[10*Math.round(t.getRect().width/3/10),0],[10*Math.round(2*t.getRect().width/3/10),0],[t.getRect().width,10*Math.round(t.getRect().height/3/10)],[t.getRect().width,10*Math.round(2*t.getRect().height/3/10)],[10*Math.round(t.getRect().width/3/10),t.getRect().height],[10*Math.round(2*t.getRect().width/3/10),t.getRect().height],[0,10*Math.round(t.getRect().height/3/10)],[0,10*Math.round(2*t.getRect().height/3/10)]]},collinearReduction:function(t){var e=[];if(t.length<3)return f.cloneArray(t);e.push(t[0].clone());for(var i=1;i<t.length-1;i++)t[i-1].x==t[i].x&&t[i].x==t[i+1].x||t[i-1].y==t[i].y&&t[i].y==t[i+1].y||e.push(t[i].clone());return e.push(t[t.length-1].clone()),e},Class:b}},function(t,e){function n(t,e){this.x=t,this.y=e}n.load=function(t){return new n(Number(t.x),Number(t.y))},n.loadArray=function(t){for(var e=[],i=0;i<t.length;i++)e.push(n.load(t[i]));return e},n.cloneArray=function(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i].clone());return e},n.prototype={constructor:n,transform:function(t){var e=this.x,i=this.y;this.x=t[0][0]*e+t[0][1]*i+t[0][2],this.y=t[1][0]*e+t[1][1]*i+t[1][2]},equals:function(t){return t instanceof n&&(this.x==t.x&&this.y==t.y)},clone:function(){return new n(this.x,this.y)},add:function(t){return this.x=this.x+t.x,this.y=this.y+t.y,this},near:function(t,e,i){return Math.sqrt(Math.pow(this.x-t,2)+Math.pow(this.y-e,2))<=i},contains:function(t,e){return this.x==t&&this.y==e},toString:function(){return"["+this.x+","+this.y+"]"},getPoints:function(){return[this]}},t.exports=n},function(t,e){function i(t,e){this.startPoint=t,this.endPoint=e,this.oType="Line"}i.load=function(t){return new i(Point.load(t.startPoint),Point.load(t.endPoint))},i.prototype={contructor:i,clone:function(){return new i(this.startPoint.clone(),this.endPoint.clone())},equals:function(t){return!(!t instanceof i)&&(this.startPoint.equals(t.startPoint)&&this.endPoint.equals(t.endPoint))},contains:function(t,e){if(Math.min(this.startPoint.x,this.endPoint.x)<=t&&t<=Math.max(this.startPoint.x,this.endPoint.x)&&Math.min(this.startPoint.y,this.endPoint.y)<=e&&e<=Math.max(this.startPoint.y,this.endPoint.y)){if(this.startPoint.x==this.endPoint.x)return t==this.startPoint.x;var i=(this.endPoint.y-this.startPoint.y)/(this.endPoint.x-this.startPoint.x);return e==i*t+(this.startPoint.y-i*this.startPoint.x)}return!1},near:function(t,e,i){if(this.endPoint.x===this.startPoint.x)return(this.startPoint.y-i<=e&&this.endPoint.y+i>=e||this.endPoint.y-i<=e&&this.startPoint.y+i>=e)&&t>this.startPoint.x-i&&t<this.startPoint.x+i;if(this.startPoint.y===this.endPoint.y)return(this.startPoint.x-i<=t&&this.endPoint.x+i>=t||this.endPoint.x-i<=t&&this.startPoint.x+i>=t)&&e>this.startPoint.y-i&&e<this.startPoint.y+i;var n=Math.min(this.endPoint.x,this.startPoint.x),r=Math.min(this.endPoint.y,this.startPoint.y),o=Math.max(this.endPoint.x,this.startPoint.x),s=Math.max(this.endPoint.y,this.startPoint.y),a=this.endPoint.y-this.startPoint.y,h=this.startPoint.x-this.endPoint.x,l=-(this.startPoint.x*this.endPoint.y-this.endPoint.x*this.startPoint.y),c=Math.abs((a*t+h*e+l)/Math.sqrt(Math.pow(a,2)+Math.pow(h,2))),u=(h*(h*t-a*e)-a*l)/(Math.pow(a,2)+Math.pow(h,2)),f=(a*(-h*t+a*e)-h*l)/(Math.pow(a,2)+Math.pow(h,2));return c<=i&&u<=o&&n<=u&&f<=s&&r<=f||this.startPoint.near(t,e,i)||this.endPoint.near(t,e,i)},getPoints:function(){var t=[];return t.push(this.startPoint),t.push(this.endPoint),t},getPoint:function(t){var e=t*(this.endPoint.x-this.startPoint.x)+this.startPoint.x,i=t*(this.endPoint.y-this.startPoint.y)+this.startPoint.y;return new Point(e,i)},toString:function(){return"line("+this.startPoint+","+this.endPoint+")"}},t.exports=i},function(t,e,i){"use strict";var n=i(4),r=["getDom","getZr","getWidth","getHeight","dispatchAction","on","off","trigger","getDataURL","getConnectedDataURL","getModel","getOption"];t.exports=function(e){n.each(r,function(t){this[t]=n.bind(e[t],e)},this)}},function(t,e,i){var n=i(10),c=i(49),u=i(4),f=i(68),d=i(69),r=i(71),p=i(74),g=i(76),v=!c.canvasSupported,y={canvas:r},o={};function s(t,e,i){i=i||{},this.dom=e,this.id=t;var n=this,r=new d,o=i.renderer;if(v){if(!y.vml)throw new Error("You need to require 'zrender/vml/vml' to support IE8");o="vml"}else o&&y[o]||(o="canvas");var s=new y[o](e,r,i);this.storage=r,this.painter=s;var a=c.node?null:new g(s.getViewportRoot());this.handler=new f(r,s,a,s.root),this.animation=new p({stage:{update:u.bind(this.flush,this)}}),this.animation.start(),this._needsRefresh;var h=r.delFromStorage,l=r.addToStorage;r.delFromStorage=function(t){h.call(r,t),t&&t.removeSelfFromZr(n)},r.addToStorage=function(t){l.call(r,t),t.addSelfToZr(n)}}s.prototype={constructor:s,getId:function(){return this.id},add:function(t){this.storage.addRoot(t),this._needsRefresh=!0},remove:function(t){this.storage.delRoot(t),this._needsRefresh=!0},configLayer:function(t,e){this.painter.configLayer(t,e),this._needsRefresh=!0},refreshImmediately:function(){this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},refresh:function(){this._needsRefresh=!0},flush:function(){this._needsRefresh&&this.refreshImmediately(),this._needsRefreshHover&&this.refreshHoverImmediately()},addHover:function(t,e){this.painter.addHover&&(this.painter.addHover(t,e),this.refreshHover())},removeHover:function(t){this.painter.removeHover&&(this.painter.removeHover(t),this.refreshHover())},clearHover:function(){this.painter.clearHover&&(this.painter.clearHover(),this.refreshHover())},refreshHover:function(){this._needsRefreshHover=!0},refreshHoverImmediately:function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.refreshHover()},resize:function(t){t=t||{},this.painter.resize(t.width,t.height),this.handler.resize()},clearAnimation:function(){this.animation.clear()},getWidth:function(){return this.painter.getWidth()},getHeight:function(){return this.painter.getHeight()},pathToImage:function(t,e){return this.painter.pathToImage(t,e)},setCursorStyle:function(t){this.handler.setCursorStyle(t)},findHover:function(t,e){return this.handler.findHover(t,e)},on:function(t,e,i){this.handler.on(t,e,i)},off:function(t,e){this.handler.off(t,e)},trigger:function(t,e){this.handler.trigger(t,e)},clear:function(){this.storage.delRoot(),this.painter.clear()},dispose:function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,function(t){delete o[t]}(this.id)}},e.version="3.7.4",e.init=function(t,e){var i=new s(n(),t,e);return o[i.id]=i},e.dispose=function(t){if(t)t.dispose();else{for(var e in o)o.hasOwnProperty(e)&&o[e].dispose();o={}}return this},e.getInstance=function(t){return o[t]},e.registerPainter=function(t,e){y[t]=e}},function(t,e,i){var r=i(4),o=i(14),s=i(42),a=i(11),h="silent";function l(){}l.prototype.dispose=function(){};function c(t,e,i,n){a.call(this),this.storage=t,this.painter=e,this.painterRoot=n,i=i||new l,((this.proxy=i).handler=this)._hovered={},this._lastTouchMoment,this._lastX,this._lastY,s.call(this),r.each(u,function(t){i.on&&i.on(t,this[t],this)},this)}var u=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"];function f(t,e,i){if(t[t.rectHover?"rectContain":"contain"](e,i)){for(var n,r=t;r;){if(r.clipPath&&!r.clipPath.contain(e,i))return!1;r.silent&&(n=!0),r=r.parent}return!n||h}return!1}c.prototype={constructor:c,mousemove:function(t){var e=t.zrX,i=t.zrY,n=this._hovered,r=n.target;r&&!r.__zr&&(r=(n=this.findHover(n.x,n.y)).target);var o=this._hovered=this.findHover(e,i),s=o.target,a=this.proxy;a.setCursor&&a.setCursor(s?s.cursor:"default"),r&&s!==r&&this.dispatchToElement(n,"mouseout",t),this.dispatchToElement(o,"mousemove",t),s&&s!==r&&this.dispatchToElement(o,"mouseover",t)},mouseout:function(t){this.dispatchToElement(this._hovered,"mouseout",t);for(var e,i=t.toElement||t.relatedTarget;(i=i&&i.parentNode)&&9!=i.nodeType&&!(e=i===this.painterRoot););e||this.trigger("globalout",{event:t})},resize:function(t){this._hovered={}},dispatch:function(t,e){var i=this[t];i&&i.call(this,e)},dispose:function(){this.proxy.dispose(),this.storage=this.proxy=this.painter=null},setCursorStyle:function(t){var e=this.proxy;e.setCursor&&e.setCursor(t)},dispatchToElement:function(t,e,i){var n=(t=t||{}).target;if(!n||!n.silent){for(var r="on"+e,o=function(t,e,i){return{type:t,event:i,target:e.target,topTarget:e.topTarget,cancelBubble:!1,offsetX:i.zrX,offsetY:i.zrY,gestureEvent:i.gestureEvent,pinchX:i.pinchX,pinchY:i.pinchY,pinchScale:i.pinchScale,wheelDelta:i.zrDelta,zrByTouch:i.zrByTouch,which:i.which}}(e,t,i);n&&(n[r]&&(o.cancelBubble=n[r].call(n,o)),n.trigger(e,o),n=n.parent,!o.cancelBubble););o.cancelBubble||(this.trigger(e,o),this.painter&&this.painter.eachOtherLayer(function(t){"function"==typeof t[r]&&t[r].call(t,o),t.trigger&&t.trigger(e,o)}))}},findHover:function(t,e,i){for(var n=this.storage.getDisplayList(),r={x:t,y:e},o=n.length-1;0<=o;o--){var s;if(n[o]!==i&&!n[o].ignore&&(s=f(n[o],t,e))&&(r.topTarget||(r.topTarget=n[o]),s!==h)){r.target=n[o];break}}return r}},r.each(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(n){c.prototype[n]=function(t){var e=this.findHover(t.zrX,t.zrY),i=e.target;if("mousedown"===n)this._downEl=i,this._downPoint=[t.zrX,t.zrY],this._upEl=i;else if("mosueup"===n)this._upEl=i;else if("click"===n){if(this._downEl!==this._upEl||!this._downPoint||4<o.dist(this._downPoint,[t.zrX,t.zrY]))return;this._downPoint=null}this.dispatchToElement(e,n,t)}}),r.mixin(c,a),r.mixin(c,s);var n=c;t.exports=n},function(t,e,i){var o=i(4),s=i(49),a=i(43),h=i(70);function l(t,e){return t.zlevel===e.zlevel?t.z===e.z?t.z2-e.z2:t.z-e.z:t.zlevel-e.zlevel}function n(){this._roots=[],this._displayList=[],this._displayListLen=0}n.prototype={constructor:n,traverse:function(t,e){for(var i=0;i<this._roots.length;i++)this._roots[i].traverse(t,e)},getDisplayList:function(t,e){return e=e||!1,t&&this.updateDisplayList(e),this._displayList},updateDisplayList:function(t){this._displayListLen=0;for(var e=this._roots,i=this._displayList,n=0,r=e.length;n<r;n++)this._updateAndAddDisplayable(e[n],null,t);i.length=this._displayListLen,s.canvasSupported&&h(i,l)},_updateAndAddDisplayable:function(t,e,i){if(!t.ignore||i){t.beforeUpdate(),t.__dirty&&t.update(),t.afterUpdate();var n=t.clipPath;if(n){e=e?e.slice():[];for(var r=n,o=t;r;)r.parent=o,r.updateTransform(),e.push(r),r=(o=r).clipPath}if(t.isGroup){for(var s=t._children,a=0;a<s.length;a++){var h=s[a];t.__dirty&&(h.__dirty=!0),this._updateAndAddDisplayable(h,e,i)}t.__dirty=!1}else t.__clipPaths=e,this._displayList[this._displayListLen++]=t}},addRoot:function(t){t.__storage!==this&&(t instanceof a&&t.addChildrenToStorage(this),this.addToStorage(t),this._roots.push(t))},delRoot:function(t){if(null==t){for(var e=0;e<this._roots.length;e++){var i=this._roots[e];i instanceof a&&i.delChildrenFromStorage(this)}return this._roots=[],this._displayList=[],void(this._displayListLen=0)}if(t instanceof Array){e=0;for(var n=t.length;e<n;e++)this.delRoot(t[e])}else{var r=o.indexOf(this._roots,t);0<=r&&(this.delFromStorage(t),this._roots.splice(r,1),t instanceof a&&t.delChildrenFromStorage(this))}},addToStorage:function(t){return t.__storage=this,t.dirty(!1),this},delFromStorage:function(t){return t&&(t.__storage=null),this},dispose:function(){this._renderList=this._roots=null},displayableSortFunc:l};var r=n;t.exports=r},function(t,e){var l=32,m=7;function c(t,e,i,n){var r=e+1;if(r===i)return 1;if(n(t[r++],t[e])<0){for(;r<i&&n(t[r],t[r-1])<0;)r++;!function(t,e,i){i--;for(;e<i;){var n=t[e];t[e++]=t[i],t[i--]=n}}(t,e,r)}else for(;r<i&&0<=n(t[r],t[r-1]);)r++;return r-e}function u(t,e,i,n,r){for(n===e&&n++;n<i;n++){for(var o,s=t[n],a=e,h=n;a<h;)r(s,t[o=a+h>>>1])<0?h=o:a=1+o;var l=n-a;switch(l){case 3:t[a+3]=t[a+2];case 2:t[a+2]=t[a+1];case 1:t[a+1]=t[a];break;default:for(;0<l;)t[a+l]=t[a+l-1],l--}t[a]=s}}function x(t,e,i,n,r,o){var s=0,a=0,h=1;if(0<o(t,e[i+r])){for(a=n-r;h<a&&0<o(t,e[i+r+h]);)(h=1+((s=h)<<1))<=0&&(h=a);a<h&&(h=a),s+=r,h+=r}else{for(a=r+1;h<a&&o(t,e[i+r-h])<=0;)(h=1+((s=h)<<1))<=0&&(h=a);a<h&&(h=a);var l=s;s=r-h,h=r-l}for(s++;s<h;){var c=s+(h-s>>>1);0<o(t,e[i+c])?s=c+1:h=c}return h}function _(t,e,i,n,r,o){var s=0,a=0,h=1;if(o(t,e[i+r])<0){for(a=r+1;h<a&&o(t,e[i+r-h])<0;)(h=1+((s=h)<<1))<=0&&(h=a);a<h&&(h=a);var l=s;s=r-h,h=r-l}else{for(a=n-r;h<a&&0<=o(t,e[i+r+h]);)(h=1+((s=h)<<1))<=0&&(h=a);a<h&&(h=a),s+=r,h+=r}for(s++;s<h;){var c=s+(h-s>>>1);o(t,e[i+c])<0?h=c:s=c+1}return h}function f(p,g){var t,s,a,v=m,h=0;t=p.length;var y=[];function e(t){var e=s[t],i=a[t],n=s[t+1],r=a[t+1];a[t]=i+r,t===h-3&&(s[t+1]=s[t+2],a[t+1]=a[t+2]),h--;var o=_(p[n],p,e,i,0,g);e+=o,0!==(i-=o)&&0!==(r=x(p[e+i-1],p,n,r,r-1,g))&&(i<=r?function(t,e,i,n){var r=0;for(r=0;r<e;r++)y[r]=p[t+r];var o=0,s=i,a=t;if(p[a++]=p[s++],0==--n){for(r=0;r<e;r++)p[a+r]=y[o+r];return}if(1===e){for(r=0;r<n;r++)p[a+r]=p[s+r];return p[a+n]=y[o]}var h,l,c,u=v;for(;;){l=h=0,c=!1;do{if(g(p[s],y[o])<0){if(p[a++]=p[s++],l++,(h=0)==--n){c=!0;break}}else if(p[a++]=y[o++],h++,l=0,1==--e){c=!0;break}}while((h|l)<u);if(c)break;do{if(0!==(h=_(p[s],y,o,e,0,g))){for(r=0;r<h;r++)p[a+r]=y[o+r];if(a+=h,o+=h,(e-=h)<=1){c=!0;break}}if(p[a++]=p[s++],0==--n){c=!0;break}if(0!==(l=x(y[o],p,s,n,0,g))){for(r=0;r<l;r++)p[a+r]=p[s+r];if(a+=l,s+=l,0===(n-=l)){c=!0;break}}if(p[a++]=y[o++],1==--e){c=!0;break}u--}while(m<=h||m<=l);if(c)break;u<0&&(u=0),u+=2}if((v=u)<1&&(v=1),1===e){for(r=0;r<n;r++)p[a+r]=p[s+r];p[a+n]=y[o]}else{if(0===e)throw new Error;for(r=0;r<e;r++)p[a+r]=y[o+r]}}(e,i,n,r):function(t,e,i,n){var r=0;for(r=0;r<n;r++)y[r]=p[i+r];var o=t+e-1,s=n-1,a=i+n-1,h=0,l=0;if(p[a--]=p[o--],0==--e){for(h=a-(n-1),r=0;r<n;r++)p[h+r]=y[r];return}if(1===n){for(l=(a-=e)+1,h=(o-=e)+1,r=e-1;0<=r;r--)p[l+r]=p[h+r];return p[a]=y[s]}var c=v;for(;;){var u=0,f=0,d=!1;do{if(g(y[s],p[o])<0){if(p[a--]=p[o--],u++,(f=0)==--e){d=!0;break}}else if(p[a--]=y[s--],f++,u=0,1==--n){d=!0;break}}while((u|f)<c);if(d)break;do{if(0!==(u=e-_(y[s],p,t,e,e-1,g))){for(e-=u,l=(a-=u)+1,h=(o-=u)+1,r=u-1;0<=r;r--)p[l+r]=p[h+r];if(0===e){d=!0;break}}if(p[a--]=y[s--],1==--n){d=!0;break}if(0!==(f=n-x(p[o],y,0,n,n-1,g))){for(n-=f,l=(a-=f)+1,h=(s-=f)+1,r=0;r<f;r++)p[l+r]=y[h+r];if(n<=1){d=!0;break}}if(p[a--]=p[o--],0==--e){d=!0;break}c--}while(m<=u||m<=f);if(d)break;c<0&&(c=0),c+=2}(v=c)<1&&(v=1);if(1===n){for(l=(a-=e)+1,h=(o-=e)+1,r=e-1;0<=r;r--)p[l+r]=p[h+r];p[a]=y[s]}else{if(0===n)throw new Error;for(h=a-(n-1),r=0;r<n;r++)p[h+r]=y[r]}}(e,i,n,r))}s=[],a=[],this.mergeRuns=function(){for(;1<h;){var t=h-2;if(1<=t&&a[t-1]<=a[t]+a[t+1]||2<=t&&a[t-2]<=a[t]+a[t-1])a[t-1]<a[t+1]&&t--;else if(a[t]>a[t+1])break;e(t)}},this.forceMergeRuns=function(){for(;1<h;){var t=h-2;0<t&&a[t-1]<a[t+1]&&t--,e(t)}},this.pushRun=function(t,e){s[h]=t,a[h]=e,h+=1}}t.exports=function(t,e,i,n){i=i||0;var r=(n=n||t.length)-i;if(!(r<2)){var o=0;if(r<l)u(t,i,n,i+(o=c(t,i,n,e)),e);else{var s=new f(t,e),a=function(t){for(var e=0;l<=t;)e|=1&t,t>>=1;return t+e}(r);do{if((o=c(t,i,n,e))<a){var h=r;a<h&&(h=a),u(t,i,i+h,i+o,e),o=h}s.pushRun(i,o),s.mergeRuns(),r-=o,i+=o}while(0!==r);s.forceMergeRuns()}}}},function(t,e,i){var u=i(22).devicePixelRatio,m=i(4),x=i(21),n=i(26),a=i(70),v=i(72),r=i(73),_=i(44);function h(t){return parseInt(t,10)}function o(t){t.__unusedCount++}function s(t){1==t.__unusedCount&&t.clear()}var l=new n(0,0,0,0),c=new n(0,0,0,0);function f(t,e,i){this.type="canvas";var n=!t.nodeName||"CANVAS"===t.nodeName.toUpperCase();this._opts=i=m.extend({},i||{}),this.dpr=i.devicePixelRatio||u,this._singleCanvas=n;var r=(this.root=t).style;r&&(r["-webkit-tap-highlight-color"]="transparent",r["-webkit-user-select"]=r["user-select"]=r["-webkit-touch-callout"]="none",t.innerHTML=""),this.storage=e;var o=this._zlevelList=[],s=this._layers={};if(this._layerConfig={},n){null!=i.width&&(t.width=i.width),null!=i.height&&(t.height=i.height);var a=t.width,h=t.height;this._width=a,this._height=h;var l=new v(t,this,1);l.initContext(),s[0]=l,o.push(0),this._domRoot=t}else{this._width=this._getSize(0),this._height=this._getSize(1);var c=this._domRoot=function(t,e){var i=document.createElement("div");return i.style.cssText=["position:relative","overflow:hidden","width:"+t+"px","height:"+e+"px","padding:0","margin:0","border-width:0"].join(";")+";",i}(this._width,this._height);t.appendChild(c)}this._progressiveLayers=[],this._hoverlayer,this._hoverElements=[]}f.prototype={constructor:f,getType:function(){return"canvas"},isSingleCanvas:function(){return this._singleCanvas},getViewportRoot:function(){return this._domRoot},getViewportRootOffset:function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},refresh:function(t){var e=this.storage.getDisplayList(!0),i=this._zlevelList;this._paintList(e,t);for(var n=0;n<i.length;n++){var r=i[n],o=this._layers[r];!o.__builtin__&&o.refresh&&o.refresh()}return this.refreshHover(),this._progressiveLayers.length&&this._startProgessive(),this},addHover:function(t,e){if(!t.__hoverMir){var i=new t.constructor({style:t.style,shape:t.shape});((i.__from=t).__hoverMir=i).setStyle(e),this._hoverElements.push(i)}},removeHover:function(t){var e=t.__hoverMir,i=this._hoverElements,n=m.indexOf(i,e);0<=n&&i.splice(n,1),t.__hoverMir=null},clearHover:function(t){for(var e=this._hoverElements,i=0;i<e.length;i++){var n=e[i].__from;n&&(n.__hoverMir=null)}e.length=0},refreshHover:function(){var t=this._hoverElements,e=t.length,i=this._hoverlayer;if(i&&i.clear(),e){a(t,this.storage.displayableSortFunc);var n={};(i=i||(this._hoverlayer=this.getLayer(1e5))).ctx.save();for(var r=0;r<e;){var o=t[r],s=o.__from;s&&s.__zr?(r++,s.invisible||(o.transform=s.transform,o.invTransform=s.invTransform,o.__clipPaths=s.__clipPaths,this._doPaintEl(o,i,!0,n))):(t.splice(r,1),s.__hoverMir=null,e--)}i.ctx.restore()}},_startProgessive:function(){var e=this;if(e._furtherProgressive){var i=e._progressiveToken=+new Date;e._progress++,r(function t(){i===e._progressiveToken&&e.storage&&(e._doPaintList(e.storage.getDisplayList()),e._furtherProgressive?(e._progress++,r(t)):e._progressiveToken=-1)})}},_clearProgressive:function(){this._progressiveToken=-1,this._progress=0,m.each(this._progressiveLayers,function(t){t.__dirty&&t.clear()})},_paintList:function(t,e){null==e&&(e=!1),this._updateLayerStatus(t),this._clearProgressive(),this.eachBuiltinLayer(o),this._doPaintList(t,e),this.eachBuiltinLayer(s)},_doPaintList:function(t,e){var i,n,r,o,s,a,h=0,l=this._width,c=this._height,u=this._progress;function f(t){var e=r.dpr||1;r.save(),r.globalAlpha=1,r.shadowBlur=0,i.__dirty=!0,r.setTransform(1,0,0,1,0,0),r.drawImage(t.dom,0,0,l*e,c*e),r.restore()}for(var d=0,p=t.length;d<p;d++){var g=t[d],v=this._singleCanvas?0:g.zlevel,y=g.__frame;if(y<0&&s&&(f(s),s=null),n!==v&&(r&&r.restore(),o={},n=v,(i=this.getLayer(n)).__builtin__||x("ZLevel "+n+" has been used by unkown layer "+i.id),(r=i.ctx).save(),i.__unusedCount=0,(i.__dirty||e)&&i.clear()),i.__dirty||e){if(0<=y){if(!s){if((s=this._progressiveLayers[Math.min(h++,4)]).ctx.save(),s.renderScope={},s&&s.__progress>s.__maxProgress){d=s.__nextIdxNotProg-1;continue}a=s.__progress,s.__dirty||(u=a),s.__progress=u+1}y===u&&this._doPaintEl(g,s,!0,s.renderScope)}else this._doPaintEl(g,i,e,o);g.__dirty=!1}}s&&f(s),r&&r.restore(),this._furtherProgressive=!1,m.each(this._progressiveLayers,function(t){t.__maxProgress>=t.__progress&&(this._furtherProgressive=!0)},this)},_doPaintEl:function(t,e,i,n){var r=e.ctx,o=t.transform;if((e.__dirty||i)&&!t.invisible&&0!==t.style.opacity&&(!o||o[0]||o[3])&&(!t.culling||!function(t,e,i){return l.copy(t.getBoundingRect()),t.transform&&l.applyTransform(t.transform),c.width=e,c.height=i,!l.intersect(c)}(t,this._width,this._height))){var s=t.__clipPaths;n.prevClipLayer===e&&!function(t,e){if(t==e)return!1;if(!t||!e||t.length!==e.length)return!0;for(var i=0;i<t.length;i++)if(t[i]!==e[i])return!0}(s,n.prevElClipPaths)||(n.prevElClipPaths&&(n.prevClipLayer.ctx.restore(),n.prevClipLayer=n.prevElClipPaths=null,n.prevEl=null),s&&(r.save(),function(t,e){for(var i=0;i<t.length;i++){var n=t[i];n.setTransform(e),e.beginPath(),n.buildPath(e,n.shape),e.clip(),n.restoreTransform(e)}}(s,r),n.prevClipLayer=e,n.prevElClipPaths=s)),t.beforeBrush&&t.beforeBrush(r),t.brush(r,n.prevEl||null),(n.prevEl=t).afterBrush&&t.afterBrush(r)}},getLayer:function(t){if(this._singleCanvas)return this._layers[0];var e=this._layers[t];return e||((e=new v("zr_"+t,this,this.dpr)).__builtin__=!0,this._layerConfig[t]&&m.merge(e,this._layerConfig[t],!0),this.insertLayer(t,e),e.initContext()),e},insertLayer:function(t,e){var i=this._layers,n=this._zlevelList,r=n.length,o=null,s=-1,a=this._domRoot;if(i[t])x("ZLevel "+t+" has been used already");else if(function(t){return!!t&&(!!t.__builtin__||"function"==typeof t.resize&&"function"==typeof t.refresh)}(e)){if(0<r&&t>n[0]){for(s=0;s<r-1&&!(n[s]<t&&n[s+1]>t);s++);o=i[n[s]]}if(n.splice(s+1,0,t),!(i[t]=e).virtual)if(o){var h=o.dom;h.nextSibling?a.insertBefore(e.dom,h.nextSibling):a.appendChild(e.dom)}else a.firstChild?a.insertBefore(e.dom,a.firstChild):a.appendChild(e.dom)}else x("Layer of zlevel "+t+" is not valid")},eachLayer:function(t,e){var i,n,r=this._zlevelList;for(n=0;n<r.length;n++)i=r[n],t.call(e,this._layers[i],i)},eachBuiltinLayer:function(t,e){var i,n,r,o=this._zlevelList;for(r=0;r<o.length;r++)n=o[r],(i=this._layers[n]).__builtin__&&t.call(e,i,n)},eachOtherLayer:function(t,e){var i,n,r,o=this._zlevelList;for(r=0;r<o.length;r++)n=o[r],(i=this._layers[n]).__builtin__||t.call(e,i,n)},getLayers:function(){return this._layers},_updateLayerStatus:function(t){var e=this._layers,i=this._progressiveLayers,n={},r={};this.eachBuiltinLayer(function(t,e){n[e]=t.elCount,t.elCount=0,t.__dirty=!1}),m.each(i,function(t,e){r[e]=t.elCount,t.elCount=0,t.__dirty=!1});for(var o,s,a=0,h=0,l=0,c=t.length;l<c;l++){var u=t[l],f=e[this._singleCanvas?0:u.zlevel],d=u.progressive;if(f&&(f.elCount++,f.__dirty=f.__dirty||u.__dirty),0<=d){s!==d&&(s=d,h++);var p=u.__frame=h-1;if(!o){var g=Math.min(a,4);(o=i[g])||(o=i[g]=new v("progressive",this,this.dpr)).initContext(),o.__maxProgress=0}o.__dirty=o.__dirty||u.__dirty,o.elCount++,o.__maxProgress=Math.max(o.__maxProgress,p),o.__maxProgress>=o.__progress&&(f.__dirty=!0)}else u.__frame=-1,o&&(o.__nextIdxNotProg=l,a++,o=null)}o&&(a++,o.__nextIdxNotProg=l),this.eachBuiltinLayer(function(t,e){n[e]!==t.elCount&&(t.__dirty=!0)}),i.length=Math.min(a,5),m.each(i,function(t,e){r[e]!==t.elCount&&(u.__dirty=!0),t.__dirty&&(t.__progress=0)})},clear:function(){return this.eachBuiltinLayer(this._clearLayer),this},_clearLayer:function(t){t.clear()},configLayer:function(t,e){if(e){var i=this._layerConfig;i[t]?m.merge(i[t],e,!0):i[t]=e;var n=this._layers[t];n&&m.merge(n,i[t],!0)}},delLayer:function(t){var e=this._layers,i=this._zlevelList,n=e[t];n&&(n.dom.parentNode.removeChild(n.dom),delete e[t],i.splice(m.indexOf(i,t),1))},resize:function(e,i){var t=this._domRoot;t.style.display="none";var n=this._opts;if(null!=e&&(n.width=e),null!=i&&(n.height=i),e=this._getSize(0),i=this._getSize(1),t.style.display="",this._width!=e||i!=this._height){for(var r in t.style.width=e+"px",t.style.height=i+"px",this._layers)this._layers.hasOwnProperty(r)&&this._layers[r].resize(e,i);m.each(this._progressiveLayers,function(t){t.resize(e,i)}),this.refresh(!0)}return this._width=e,this._height=i,this},clearLayer:function(t){var e=this._layers[t];e&&e.clear()},dispose:function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},getRenderedCanvas:function(t){if(t=t||{},this._singleCanvas)return this._layers[0].dom;var a=new v("image",this,t.pixelRatio||this.dpr);a.initContext(),a.clearColor=t.backgroundColor,a.clear();var e,i=this.storage.getDisplayList(!0),n={},h=this;function r(t,e){var i,n=h._zlevelList;null==t&&(t=-1/0);for(var r=0;r<n.length;r++){var o=n[r],s=h._layers[o];if(!s.__builtin__&&t<o&&o<e){i=s;break}}i&&i.renderToCanvas&&(a.ctx.save(),i.renderToCanvas(a.ctx),a.ctx.restore())}for(var o=0;o<i.length;o++){var s=i[o];s.zlevel!==e&&(r(e,s.zlevel),e=s.zlevel),this._doPaintEl(s,a,!0,n)}return r(e,1/0),a.dom},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(t){var e=this._opts,i=["width","height"][t],n=["clientWidth","clientHeight"][t],r=["paddingLeft","paddingTop"][t],o=["paddingRight","paddingBottom"][t];if(null!=e[i]&&"auto"!==e[i])return parseFloat(e[i]);var s=this.root,a=document.defaultView.getComputedStyle(s);return(s[n]||h(a[i])||h(s.style[i]))-(h(a[r])||0)-(h(a[o])||0)|0},pathToImage:function(t,e){e=e||this.dpr;var i=document.createElement("canvas"),n=i.getContext("2d"),r=t.getBoundingRect(),o=t.style,s=o.shadowBlur,a=o.shadowOffsetX,h=o.shadowOffsetY,l=o.hasStroke()?o.lineWidth:0,c=Math.max(l/2,-a+s),u=Math.max(l/2,a+s),f=Math.max(l/2,-h+s),d=Math.max(l/2,h+s),p=r.width+c+u,g=r.height+f+d;i.width=p*e,i.height=g*e,n.scale(e,e),n.clearRect(0,0,p,g),n.dpr=e;var v={position:t.position,rotation:t.rotation,scale:t.scale};t.position=[c-r.x,f-r.y],t.rotation=0,t.scale=[1,1],t.updateTransform(),t&&t.brush(n);var y=new _({style:{x:0,y:0,image:i}});return null!=v.position&&(y.position=t.position=v.position),null!=v.rotation&&(y.rotation=t.rotation=v.rotation),null!=v.scale&&(y.scale=t.scale=v.scale),y}};var d=f;t.exports=d},function(t,e,i){var a=i(4),o=i(22).devicePixelRatio,u=i(8),f=i(39);function s(){return!1}function h(t,e,i){var n=a.createCanvas(),r=e.getWidth(),o=e.getHeight(),s=n.style;return s.position="absolute",s.left=0,s.top=0,s.width=r+"px",s.height=o+"px",n.width=r*i,n.height=o*i,n.setAttribute("data-zr-dom-id",t),n}function n(t,e,i){var n;i=i||o,"string"==typeof t?n=h(t,e,i):a.isObject(t)&&(t=(n=t).id),this.id=t;var r=(this.dom=n).style;r&&(n.onselectstart=s,r["-webkit-user-select"]="none",r["user-select"]="none",r["-webkit-touch-callout"]="none",r["-webkit-tap-highlight-color"]="rgba(0,0,0,0)",r.padding=0,r.margin=0,r["border-width"]=0),this.domBack=null,this.ctxBack=null,this.painter=e,this.config=null,this.clearColor=0,this.motionBlur=!1,this.lastFrameAlpha=.7,this.dpr=i}n.prototype={constructor:n,elCount:0,__dirty:!0,initContext:function(){this.ctx=this.dom.getContext("2d"),this.ctx.__currentValues={},this.ctx.dpr=this.dpr},createBackBuffer:function(){var t=this.dpr;this.domBack=h("back-"+this.id,this.painter,t),this.ctxBack=this.domBack.getContext("2d"),this.ctxBack.__currentValues={},1!=t&&this.ctxBack.scale(t,t)},resize:function(t,e){var i=this.dpr,n=this.dom,r=n.style,o=this.domBack;r.width=t+"px",r.height=e+"px",n.width=t*i,n.height=e*i,o&&(o.width=t*i,o.height=e*i,1!=i&&this.ctxBack.scale(i,i))},clear:function(t){var e,i=this.dom,n=this.ctx,r=i.width,o=i.height,s=this.clearColor,a=this.motionBlur&&!t,h=this.lastFrameAlpha,l=this.dpr;a&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(i,0,0,r/l,o/l)),n.clearRect(0,0,r,o),s&&(s.colorStops?(e=s.__canvasGradient||u.getGradient(n,s,{x:0,y:0,width:r,height:o}),s.__canvasGradient=e):s.image&&(e=f.prototype.getCanvasPattern.call(s,n)),n.save(),n.fillStyle=e||s,n.fillRect(0,0,r,o),n.restore());if(a){var c=this.domBack;n.save(),n.globalAlpha=h,n.drawImage(c,0,0,r,o),n.restore()}}};var r=n;t.exports=r},function(t,e){var i="undefined"!=typeof window&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(t){setTimeout(t,16)};t.exports=i},function(t,e,i){function n(t){t=t||{},this.stage=t.stage||{},this.onframe=t.onframe||function(){},this._clips=[],this._running=!1,this._time,this._pausedTime,this._pauseStart,this._paused=!1,o.call(this)}var r=i(4),o=i(75).Dispatcher,s=i(73),a=i(16);n.prototype={constructor:n,addClip:function(t){this._clips.push(t)},addAnimator:function(t){t.animation=this;for(var e=t.getClips(),i=0;i<e.length;i++)this.addClip(e[i])},removeClip:function(t){var e=r.indexOf(this._clips,t);0<=e&&this._clips.splice(e,1)},removeAnimator:function(t){for(var e=t.getClips(),i=0;i<e.length;i++)this.removeClip(e[i]);t.animation=null},_update:function(){for(var t=(new Date).getTime()-this._pausedTime,e=t-this._time,i=this._clips,n=i.length,r=[],o=[],s=0;s<n;s++){var a=i[s],h=a.step(t,e);h&&(r.push(h),o.push(a))}for(s=0;s<n;)i[s]._needsRemove?(i[s]=i[n-1],i.pop(),n--):s++;n=r.length;for(s=0;s<n;s++)o[s].fire(r[s]);this._time=t,this.onframe(e),this.trigger("frame",e),this.stage.update&&this.stage.update()},_startLoop:function(){var e=this;this._running=!0,s(function t(){e._running&&(s(t),e._paused||e._update())})},start:function(){this._time=(new Date).getTime(),this._pausedTime=0,this._startLoop()},stop:function(){this._running=!1},pause:function(){this._paused||(this._pauseStart=(new Date).getTime(),this._paused=!0)},resume:function(){this._paused&&(this._pausedTime+=(new Date).getTime()-this._pauseStart,this._paused=!1)},clear:function(){this._clips=[]},animate:function(t,e){var i=new a(t,(e=e||{}).loop,e.getter,e.setter);return this.addAnimator(i),i}},r.mixin(n,o);var h=n;t.exports=h},function(t,e,i){var n=i(11);e.Dispatcher=n;var r=i(49),o="undefined"!=typeof window&&!!window.addEventListener,s=/^(?:mouse|pointer|contextmenu|drag|drop)|click/;function a(t,e,i,n){return i=i||{},n||!r.canvasSupported?h(t,e,i):r.browser.firefox&&null!=e.layerX&&e.layerX!==e.offsetX?(i.zrX=e.layerX,i.zrY=e.layerY):null!=e.offsetX?(i.zrX=e.offsetX,i.zrY=e.offsetY):h(t,e,i),i}function h(t,e,i){var n=function(t){return t.getBoundingClientRect?t.getBoundingClientRect():{left:0,top:0}}(t);i.zrX=e.clientX-n.left,i.zrY=e.clientY-n.top}var l=o?function(t){t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0}:function(t){t.returnValue=!1,t.cancelBubble=!0};e.clientToLocal=a,e.normalizeEvent=function(t,e,i){if(null!=(e=e||window.event).zrX)return e;var n=e.type;if(n&&0<=n.indexOf("touch")){var r="touchend"!=n?e.targetTouches[0]:e.changedTouches[0];r&&a(t,r,e,i)}else a(t,e,e,i),e.zrDelta=e.wheelDelta?e.wheelDelta/120:-(e.detail||0)/3;var o=e.button;return null==e.which&&void 0!==o&&s.test(e.type)&&(e.which=1&o?1:2&o?3:4&o?2:0),e},e.addEventListener=function(t,e,i){o?t.addEventListener(e,i):t.attachEvent("on"+e,i)},e.removeEventListener=function(t,e,i){o?t.removeEventListener(e,i):t.detachEvent("on"+e,i)},e.stop=l,e.notLeftMouse=function(t){return 1<t.which}},function(t,e,i){var n=i(75),r=n.addEventListener,o=n.removeEventListener,s=n.normalizeEvent,a=i(4),h=i(11),l=i(49),c=i(77),u=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],f=["touchstart","touchend","touchmove"],d={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},p=a.map(u,function(t){var e=t.replace("mouse","pointer");return d[e]?e:t});function g(t){return"mousewheel"===t&&l.browser.firefox?"DOMMouseScroll":t}function v(t,e,i){var n=t._gestureMgr;"start"===i&&n.clear();var r=n.recognize(e,t.handler.findHover(e.zrX,e.zrY,null).target,t.dom);if("end"===i&&n.clear(),r){var o=r.type;e.gestureEvent=o,t.handler.dispatchToElement({target:r.target},o,r.event)}}function y(t){t._touching=!0,clearTimeout(t._touchTimer),t._touchTimer=setTimeout(function(){t._touching=!1},700)}var m={mousemove:function(t){t=s(this.dom,t),this.trigger("mousemove",t)},mouseout:function(t){var e=(t=s(this.dom,t)).toElement||t.relatedTarget;if(e!=this.dom)for(;e&&9!=e.nodeType;){if(e===this.dom)return;e=e.parentNode}this.trigger("mouseout",t)},touchstart:function(t){(t=s(this.dom,t)).zrByTouch=!0,this._lastTouchMoment=new Date,v(this,t,"start"),m.mousemove.call(this,t),m.mousedown.call(this,t),y(this)},touchmove:function(t){(t=s(this.dom,t)).zrByTouch=!0,v(this,t,"change"),m.mousemove.call(this,t),y(this)},touchend:function(t){(t=s(this.dom,t)).zrByTouch=!0,v(this,t,"end"),m.mouseup.call(this,t),+new Date-this._lastTouchMoment<300&&m.click.call(this,t),y(this)},pointerdown:function(t){m.mousedown.call(this,t)},pointermove:function(t){x(t)||m.mousemove.call(this,t)},pointerup:function(t){m.mouseup.call(this,t)},pointerout:function(t){x(t)||m.mouseout.call(this,t)}};function x(t){var e=t.pointerType;return"pen"===e||"touch"===e}function _(e){a.each(f,function(t){e._handlers[t]=a.bind(m[t],e)}),a.each(p,function(t){e._handlers[t]=a.bind(m[t],e)}),a.each(u,function(t){e._handlers[t]=function(t,e){return function(){if(!e._touching)return t.apply(e,arguments)}}(m[t],e)})}function b(i){function t(t,e){a.each(t,function(t){r(i,g(t),e._handlers[t])},e)}h.call(this),this.dom=i,this._touching=!1,this._touchTimer,this._gestureMgr=new c,this._handlers={},_(this),l.pointerEventsSupported?t(p,this):(l.touchEventsSupported&&t(f,this),t(u,this))}a.each(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(e){m[e]=function(t){t=s(this.dom,t),this.trigger(e,t)}});var w=b.prototype;w.dispose=function(){for(var t=u.concat(f),e=0;e<t.length;e++){var i=t[e];o(this.dom,g(i),this._handlers[i])}},w.setCursor=function(t){this.dom.style.cursor=t||"default"},a.mixin(b,h);var P=b;t.exports=P},function(t,e,i){function n(){this._track=[]}var l=i(75);function a(t){var e=t[1][0]-t[0][0],i=t[1][1]-t[0][1];return Math.sqrt(e*e+i*i)}n.prototype={constructor:n,recognize:function(t,e,i){return this._doTrack(t,e,i),this._recognize(t)},clear:function(){return this._track.length=0,this},_doTrack:function(t,e,i){var n=t.touches;if(n){for(var r={points:[],touches:[],target:e,event:t},o=0,s=n.length;o<s;o++){var a=n[o],h=l.clientToLocal(i,a,{});r.points.push([h.zrX,h.zrY]),r.touches.push(a)}this._track.push(r)}},_recognize:function(t){for(var e in r)if(r.hasOwnProperty(e)){var i=r[e](this._track,t);if(i)return i}}};var r={pinch:function(t,e){var i=t.length;if(i){var n=(t[i-1]||{}).points,r=(t[i-2]||{}).points||n;if(r&&1<r.length&&n&&1<n.length){var o=a(n)/a(r);isFinite(o)||(o=1),e.pinchScale=o;var s=function(t){return[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]}(n);return e.pinchX=s[0],e.pinchY=s[1],{type:"pinch",target:t[0].target,event:e}}}}},o=n;t.exports=o},function(t,e,i){var r=i(79),a=i(4),h=i(63),o=i(3),s=i(80),n=(i(49),i(87)),l=i(81);function c(t,e,i,n){r.call(this),this.node=t,this.zr=e,this.forbidEdit=n,this._api=i,this.render()}c.ARROW_DRAGEND="OperationNode:dragendArrow",c.ARROW_DRAG="OperationNode:dragArrow",c.ARROW_DRAGSTART="OperationNode:dragstartArrow",c.DELETE_CLICK="OperationNode:deleteClick",c.DEL="DEL",c.COMMENT_CLICK="OperationNode:commentClick",c.COMMENT="COMMENT",c.opicons={STRAIGHT:n.STRAIGHT_SVG,JAGGED:n.JAGGED_SVG,CURVE:n.CURVE_SVG,DEL:n.DEL_SVG,COMMENT:n.COMMENT_SVG},c.prototype.render=function(){this.renderBase(),this.forbidEdit||this.renderOther()},c.prototype.renderBase=function(){this.createOperation()},c.prototype.createOperation=function(){var r=this,t=this.node.operationIcons;this.node.parent&&"dragSelect"===this.node.parent.type&&(t=!1),this.node.selectStyle?"ZPath"===this.node.type?(this.node._zCloneStyle=this.node.style.clone(),this.node.setStyle(this.node.selectStyle)):this.node.setOrCancelSelectStyle?this.node.setOrCancelSelectStyle(!0):this._api.getZr().addHover(this.node,this.node.selectStyle):(this.virtualRect=new o.Polyline({style:{lineDash:[2]}}),this.virtualRect.isSelfComputePos=!0,this.add(this.virtualRect)),t&&a.each(this.node.operationIcons,function(n){var t=null,e=c.opicons[n.name.toUpperCase()+""];if(e){if(this.forbidEdit)return;if(n.hidden)return;if(n.name==c.DEL)t=o.makePath(e,{style:{fill:"#aaaaac"},z:r.node.z+1,rectHover:!0},{x:0,y:0,width:10,height:15}),n.callback?t.on("click",function(t){t.data=n,t.node=r.node,n.callback&&n.callback(t)}):t.on("click",function(t){var e={};e.event=t,e.target=this,e.type=c.DELETE_CLICK,r.trigger(e.type,e)});else if(n.name==c.COMMENT){(t=o.makePath(e,{style:{fill:"#aaaaac"},z:r.node.z+2,rectHover:!0},{x:0,y:0,width:16,height:16})).on("click",function(t){var e={};e.event=t,e.target=this,e.type=c.COMMENT_CLICK,r.trigger(e.type,e)})}else{t=o.makePath(e,{style:{fill:"#aaaaac"},draggable:!0,z:r.node.z+2,lineType:s["TYPE_"+n.name.toUpperCase()],rectHover:!0},{x:0,y:0,width:15,height:15});a.each(["dragstart","drag","dragend"],function(i){t.on(i,function(t){var e={};e.event=t,e.data=n.options,e.type="OperationNode:"+i+"Arrow",r.trigger(e.type,e)})})}}else(t=l.createSymbol(n.iconPath,0,0,n.width||15,n.height||15,r.node.z+1,n.color||"#000")).on("click",function(t){t.data=n,t.node=r.node,n.callback&&n.callback(t);var e={event:t,type:"OperationNode:"+n.name+"Click"};r._api.trigger(e.type,e)});t.name=n.name,r.add(t)})},c.prototype.refreshPostion=function(t,e){var i=0,n=a.clone(e.points[2]),r=t.rotation,o=r/(Math.PI/180);if(0<Math.abs(r)){var s=h.getConnectorControls(e,t).br;n=[s.x-e.x,s.y-e.y]}this.virtualRect&&(this.virtualRect.setShape({points:e.points}),t.parent&&t.parent.childDraggable&&this.virtualRect.attr("z",t.parent.z+1),this.virtualRect.attr("rotation",r)),this.eachChild(function(t){t.isSelfComputePos||t.attr("position",[0<=o?n[0]+8+20*i++:n[0]-20-20*i++,n[1]-10])}),this.refreshPositionOther(t,e)},c.prototype.renderOther=function(){},c.prototype.refreshPositionOther=function(t,e){if(t.parent&&t.parent.isBg&&1==t.parent.isBg||"GroupNode"===t.parent.type)this.attr("position",[e.x,e.y]);else{var i=t.shape?t.shape.x:0,n=t.shape?t.shape.y:0;this.attr("position",[e.x+t.parent.position[0]+i,e.y+t.parent.position[1]+n])}},c.prototype.cleanup=function(){this.node.selectStyle&&("ZPath"===this.node.type?this.node.setStyle(this.node._zCloneStyle):this.node.setOrCancelSelectStyle?this.node.setOrCancelSelectStyle(!1):this._api.getZr().removeHover(this.node))},a.inherits(c,r),t.exports=c},function(t,e,i){var a=i(3),n=i(63);function r(){this.resourceId=n.getUUID(),a.Group.call(this)}r.prototype.render=function(){},r.prototype.getRect=function(t){},r.prototype.drawText=function(t,e,i){var n,r,o=this.bpmnInfo.name;null!=t&&(o=t);var s=new a.Text({style:{text:o,color:e||this.options.text.color,textFont:"12px Microsoft YaHei"},zlevel:20});switch(i=i||"init"){case"init":n=this.getRect().x-this.position[0]-s.getBoundingRect().width/2,r=this.getRect().y-this.position[1]+this.getBoundingRect().height/2+6;break;case"center":n=this.getRect().x-this.position[0]-s.getBoundingRect().width/2,r=this.getRect().y-this.position[1]-6;break;case"left":n=this.getRect().x-this.position[0]-s.getBoundingRect().width+6,r=this.getRect().y-this.position[1]-6}return s.attr("style",{x:n,y:r}),{text:s,rect:s.getBoundingRect()}},r.prototype.refreshText=function(t){var e,i,n=this.childOfName("Title");switch(t=t||"init"){case"init":e=this.getRect().x-this.position[0]-n.getBoundingRect().width/2,i=this.getRect().y-this.position[1]+this.getBoundingRect().height/2+6;break;case"center":e=this.getRect().x-this.position[0]-n.getBoundingRect().width/2,i=this.getRect().y-this.position[1]-6;break;case"left":e=2,i=this.getRect().y-this.position[1]-6}n.attr("style",{x:e,y:i})},r.prototype.toJSON=function(){},a.Util.inherits(r,a.Group),t.exports=r},function(t,e,i){var b=i(63),w=i(4),a=i(14),f=i(3),n=i(79),s=i(81),c=i(82),h=i(83),r=i(84),P=i(64),o=i(85);function T(t){n.call(this),this.opt=t||{},this.opt.model?(this.resourceId=this.opt.model.get("resourceId"),this.model=this.opt.model,this.opt=this.opt.model.option):(this.resourceId=b.getUUID(),this.model=new o({}));var e={symbol:{type:"arrow",size:10,color:T.NORMAL_COLOR,both:!1,offset:0},style:{lineWidth:1,stroke:T.NORMAL_COLOR,lineType:T.TYPE_STRAIGHT},hoverStyle:{lineWidth:2,stroke:T.SELECTED_COLOR},arrowHoverStyle:{fill:T.SELECTED_COLOR},shape:{points:null,smooth:!1,smoothConstraint:null},position:{startPos:null,endPos:null,startOffset:[0,0],endOffset:[0,0],escapeDistance:[30,30],points:null},autoChangePosition:!1,textContextMenu:null,isEdit:!0,text:{text:null,textFill:"#000000",textFont:"12px Microsoft YaHei",textPos:"center",textRotateable:!0},image:{image:null,width:50,height:50,imagePos:"center",imageRotateable:!0},z:0};this.options=b.mergeOpt(e,this.opt,!0,"textContextMenu"),this.handles=[],this.conPointsGroup=new f.Group,this.startNode=null,this.endNode=null,this.line=null,this.groupCurve=new f.Group,this.icons=[],this.render()}T.TYPE_STRAIGHT="straight",T.TYPE_JAGGED="jagged",T.TYPE_CURVE="curve",T.TYPE_CHAIN="chain",T.RADIUS=3,T.START_NODE="startNode",T.END_NODE="endNode",T.LEFT="left",T.RIGHT="right",T.TOP="top",T.BOTTOM=T.BOTTOM="bottom",T.SEPERATOR="-",T.NORMAL_COLOR="#000",T.SELECTED_COLOR="#74B7E0",T.CHILD_NAME=["lineText","lineImage"],T.prototype.createLineNode=function(t,r){var o=this,e=null;r=r||"text";var s=w.find(T.CHILD_NAME,function(t){return-1<t.toLocaleLowerCase().indexOf(r)});w.isArray(t[r])&&this.options.style.lineType==T.TYPE_CHAIN?t[r].forEach(function(t,e){var i=o.drawText(s+"-"+e,t,0,0,r);if(w.isString(t)){var n={};n[r]=t,n[r+"Id"]=i.text.id,o.options[r][r][e]=n}else o.options[r][r][e].textId=i.text.id;o.add(i.text),o.createNodeContextMenu(i.text)}):(e=this.drawText(s,t,0,0,r),this.add(e.text)),e&&o.createNodeContextMenu(e.text)},T.prototype.ifLineNodeRotateable=function(t){return t=t||"text",!(this.options.style.lineType!=T.TYPE_STRAIGHT||!("text"===t&&this.options.text.textRotateable||"image"===t&&this.options.image.imageRotateable))},T.prototype.refreshLineNode=function(t,l,c){var u=this,i=[],n=T.CHILD_NAME[0];if(c=c||"text",n=w.find(T.CHILD_NAME,function(t){return-1<t.toLocaleLowerCase().indexOf(c)}),this.options.style.lineType==T.TYPE_CHAIN&&w.isArray(l[c]))l[c].forEach(function(t,e){i.push(u.childOfName(n+"-"+e))});else if(!t&&l[c]){var e=this.drawText(n,l,0,0,c);this.add(e.text),t=this.childOfName(n)}if(0<i.length){var r=i.length,o=this.turningPoints[1].x-this.turningPoints[0].x,f=parseInt(o/r),d=-f*parseInt(r/2);i.forEach(function(t,e){var i=u.getTextPostion(l,t),n="",r=u.getTextRotation(i,t);0===Math.abs(r)?r=0:n=0<r?"plus":"minus";var o=180*(r=Math.abs(r))/Math.PI,s=null,a=null;if("text"===c){t.setStyle("text",w.isString(l[c][e])?l[c][e]:l[c][e].text);var h=u.getTextBoundingRect(t.style);t.setShape({width:h.width,height:h.height})}s=n?(s=90<o?(o-45)*Math.PI/180:(45+o)*Math.PI/180,"minus"===n?-s:s):45*Math.PI/180,t.attr("rotation",s),90==o?i[1]-=d:(i[0]+=d,0!==r&&(a=Math.tan(o*Math.PI/180)*d,0<d?i[1]-="plus"===n?a:-a:i[1]+="plus"===n?-a:a)),t.attr("position",i),d+=f})}if(t){if("text"===c){t.setStyle("text",l[c]);var s=this.getTextBoundingRect(l);t.setShape({width:s.width,height:s.height})}var a=this.getTextPostion(l,t);this.ifLineNodeRotateable(c)&&t.attr("rotation",this.getTextRotation(a,t)),t.attr("position",a)}},T.prototype.refresh=function(t){var n=this;t&&(this.turningPoints=t);var e=b.traslatePoints(this.turningPoints);this.options.style.lineType==T.TYPE_CURVE&&2<e.length?this.modifyCurve(this.turningPoints):this.line.attr("shape",{points:e}),T.CHILD_NAME.forEach(function(t){var e=n.childOfName(t),i=t===T.CHILD_NAME[0]?"text":"image";n.refreshLineNode(e,n.options[i],i)}),this.refreshFromToSymbol(e),this.refreshHandles()},T.prototype.createNodeContextMenu=function(t){if(t&&this.opt.textContextMenu){var e=this.opt.textContextMenu;t.on("contextmenu",function(t){t.event.preventDefault(),t.event.stopPropagation(),e.buildMenu(t.event,this)})}},T.prototype.render=function(){var n=this;this.renderFromToSymbol(),this.curveLine=new f.BezierCurve({style:this.options.style,z:this.options.z}),this.groupCurve.add(this.curveLine),this.add(this.groupCurve),this.add(this.conPointsGroup),this.polyLine=new f.Polyline({shape:this.options.shape,style:this.options.style,z:this.options.z}),this.add(this.polyLine),this.options.style.lineType==T.TYPE_CURVE?(this.line=this.groupCurve,this.createHoverStyle(this.curveLine),this.polyLine.hide()):(this.line=this.polyLine,this.createHoverStyle(this.polyLine),this.curveLine.hide());w.each(["dblclick","click"],function(i){this.line.on(i,w.bind(function(t){t.cancelBubble=!0;var e={};e.event=t,e.type="Connector:"+i,e.target=n,this.trigger(e.type,e),0!=this.options.isEdit&&(n.setSelectedStyle(this),this.handles.length<1&&this.shapeSetHandle())},this))},this),this.options.text.text&&this.createLineNode(this.options.text,"text"),this.options.image.image&&this.createLineNode(this.options.image,"image")},T.prototype.renderFromToSymbol=function(t){var e=this.createSymbol("toSymbol",this.options);if(e&&this.add(e),this.options.symbol.both){var i=this.createSymbol("fromSymbol",this.options);i&&this.add(i)}},T.prototype.refreshFromToSymbol=function(t){var e=this.childOfName("toSymbol"),i=this.childOfName("fromSymbol"),n=[],r=this.options.symbol.offset;if(e)if(this.options.effect&&this.options.effect.show)new h(e,this.options,this.groupCurve,this.polyLine);else{if(n=t[t.length-1],this.options.style.lineType!==T.TYPE_CURVE){var o=a.distance(t[t.length-1],t[t.length-2]);n=r<=o?a.lerp([],t[t.length-1],t[t.length-2],r/o):t[t.length-1]}e.attr("position",n),e.attr("rotation",b.tangentRotation(this.turningPoints[this.turningPoints.length-2],this.turningPoints[this.turningPoints.length-1]))}if(i){if(n=t[0],this.options.style.lineType!==T.TYPE_CURVE){var s=a.distance(t[0],t[1]);n=r<=s?a.lerp([],t[0],t[1],r/s):t[0]}i.attr("position",n),i.attr("rotation",b.tangentRotation(this.turningPoints[1],this.turningPoints[0]))}},T.prototype.setStyle=function(e,t){var i={},n=null,r=["text","image","symbol"];if(e.text){var o=this.childOfName(T.CHILD_NAME[0]);if(!o&&e.text.text){var s=this.drawText(T.CHILD_NAME[0],e.text,0,0);this.add(s.text),o=this.childOfName(T.CHILD_NAME[0])}!e.text.text&&""!=e.text.text||(o.setStyle("text",e.text.text),this.options.text.text=e.text.text);var a=this.getTextPostion(e.text);o.attr("position",a),e.text.textPos&&(this.options.text.textPos=e.text.textPos),e.text.offset&&(this.options.text.offset=e.text.offset),e.text.color&&(o.attr("style",{textFill:e.text.color}),this.options.text.textFill=e.text.color),e.text.textFont&&(o.attr("style",{textFont:e.text.textFont}),this.options.text.textFont=e.text.textFont),e.text.textFill&&(o.attr("style",{textFill:e.text.textFill}),this.options.text.textFill=e.text.textFill),this.model.set("options.text",e.text)}if(e.image){var h=this.childOfName(T.CHILD_NAME[1]);if(!h&&e.image.image){var l=this.drawText(T.CHILD_NAME[1],e.image,0,0,"image");this.add(l.text),h=this.childOfName(T.CHILD_NAME[1])}var c=this.getTextPostion(e.image,h);h.attr("position",c),Object.keys(e).forEach(function(t){this.options.image[t]=e[t]}.bind(this)),e.image.offset&&(this.options.image.offset=e.image.offset),this.model.set("options.image",e.image)}if(e.symbol){e.symbol.type&&(this.options.symbol.type=e.symbol.type,this.model.set("options.symbol.type",e.symbol.type)),e.symbol.size&&(this.options.symbol.size=e.symbol.size,this.model.set("options.symbol.size",e.symbol.size)),e.symbol.color&&(this.options.symbol.color=e.symbol.color,this.model.set("options.symbol.color",e.symbol.color)),e.symbol.z&&(this.options.symbol.z=e.symbol.z,this.model.set("options.symbol.z",e.symbol.z)),(n=this.childOfName("toSymbol"))&&this.remove(n);var u=this.createSymbol("toSymbol",this.model.get("options"));u&&this.add(u)}Object.keys(e).forEach(function(t){r.indexOf(t)<0&&(i[t]=e[t])}),"{}"!==JSON.stringify(i)&&(i.color&&(i.stroke=i.color),i.stroke&&(i.color=i.stroke),this.options.style.lineType==T.TYPE_CURVE?this.groupCurve.eachChild(function(t){t.attr("style",i),f.setNormalStyle(t,i)}):(this.polyLine.attr("style",i),f.setNormalStyle(this.polyLine,i)),(n=this.childOfName("toSymbol"))&&i.color&&(n.attr("style",{fill:i.color}),f.setNormalStyle(n,{fill:i.color})),t||(Object.keys(i).forEach(function(t){this.options.style[t]=i[t],this.model.set("options.style"+t,i[t])}.bind(this)),i.color&&(this.options.symbol.color=i.color))),this.refresh()},T.prototype.setSelectedStyle=function(){var t;this.setStyle(this.options.hoverStyle,!0),this.options.style.lineType==T.TYPE_CURVE?this.groupCurve.eachChild(function(t){t.attr("z",this.options.z+2)}.bind(this)):this.polyLine.attr("z",this.options.z+2),(t=this.childOfName("toSymbol"))&&t.attr("z",this.options.z+2)},T.prototype.removeSelectedStyle=function(){var t;this.setStyle({color:this.options.style.stroke,lineWidth:this.options.style.lineWidth},!0),this.options.style.lineType==T.TYPE_CURVE?this.groupCurve.eachChild(function(t){t.attr("z",this.options.z)}.bind(this)):this.polyLine.attr("z",this.options.z),(t=this.childOfName("toSymbol"))&&t.attr("z",this.options.z)},T.prototype.getTextPostion=function(t,e){var i,n=[],r=t.image&&e?e.getBoundingRect():this.getTextBoundingRect(t),o=r.width,s=r.height||12;if(t&&(t.textPos||t.imagePos)){var a=t.offset||0,h=a;i=t.textPos||t.imagePos,w.isArray(a)||(h=[a,0]);var l,c,u=b.getMaxLineLength([this.turningPoints[this.turningPoints.length-2],this.turningPoints[this.turningPoints.length-1]]),f=[],d=[],p=b.getAngle(u[0],u[1]);switch(this.options.style.lineType==T.TYPE_CURVE&&(d=this.getPointsFromCurve()),u.forEach(function(t){var e=new P(t.x,u[1].x>=u[0].x?t.y-s/2:t.y+s/2);f.push(e)}),i){case"start":n=this.options.style.lineType===T.TYPE_STRAIGHT?(l=h[0],[(c=b.getEndPoint(f[0],l,p)).x,c.y+h[1]]):[this.turningPoints[0].x-o/2+h[0],this.turningPoints[0].y+h[1]-s/2];break;case"end":n=this.options.style.lineType!==T.TYPE_STRAIGHT||this.options.text.textRotateable?(l=b.distance(f[0],f[1])-o+h[0],[(c=b.getEndPoint(f[0],l,p)).x,c.y+h[1]]):(l=b.distance(f[0],f[1]),[(c=b.getEndPoint(f[0],l,p)).x-o+h[0],c.y+h[1]]);break;default:var g=this.middle(t);if(this.ifLineNodeRotateable(t.image?"image":"text")){var v=this.getTextRotation(t),y=[g[0]-o/2,g[1]-s/2];n=b.calculatePoints(y,{x:g[0],y:g[1]},v)}else if(this.options.style.lineType==T.TYPE_CURVE){var m=[];d.forEach(function(t){m=m.concat(t)});var x=Math.round(m.length/2);n=[m[x].x-o/2,m[x].y-s/2]}else n=[g[0]+h[0],g[1]+h[1]],this.options.style.lineType!==T.TYPE_CHAIN&&(n=[n[0]-o/2,n[1]-s/2])}}else{var _=this.middle(t);n=[_[0]-o/2,_[1]]}return n},T.prototype.getTextRotation=function(t){var e=b.getMaxLineLength(this.turningPoints),i=this.middle(t);return-Math.atan2(e[1].y-i[1],e[1].x-i[0])},T.prototype.createHoverStyle=function(o){if(this.options.hoverStyle&&this.options.isEdit){f.setElementHoverStl(o,this.options.hoverStyle);var t=this.childOfName("toSymbol");t&&f.setElementHoverStl(t,this.options.arrowHoverStyle),o.on("mouseover",w.bind(function(){f.doEnterHover(o),t&&f.doEnterHover(t),this.groupCurve.eachChild(function(t){f.doEnterHover(t)})},this)).on("mousemove",w.bind(function(t){var e=this.turningPoints[0],i=this.turningPoints[this.turningPoints.length-1],n=Math.abs(t.event.offsetX-e.x)+Math.abs(t.event.offsetY-e.y),r=Math.abs(t.event.offsetX-i.x)+Math.abs(t.event.offsetY-i.y);n<=15||r<=15?(o.cursor="move",o.draggable=!0):(o.cursor="pointer",o.draggable=!1)},this)).on("mouseout",w.bind(function(){f.doLeaveHover(o),t&&f.doLeaveHover(t),this.groupCurve.eachChild(function(t){f.doLeaveHover(t)})},this))}},T.prototype.createAllconnectionPoint=function(){this.connectionPointCreate(this,this.turningPoints[0].clone(),r.TYPE_CONNECTOR),this.connectionPointCreate(this,this.turningPoints[this.turningPoints.length-1].clone(),r.TYPE_CONNECTOR)},T.prototype.connectionPointCreate=function(t,e,i){var n=new r(this,e,i,this.options);this.conPointsGroup.add(n.shape)},T.prototype.clearHandles=function(){for(var t=0;t<this.handles.length;t++)this.remove(this.handles[t].handleShape);this.handles=[],this.conPointsGroup&&this.conPointsGroup.removeAll(),this.removeSelectedStyle()},T.prototype.refreshHandles=function(){var i,n,r,t=this.turningPoints,e=[];if(0<this.handles.length){this.options.style.lineType==T.TYPE_CURVE&&(e=this.getPointsFromCurve());for(var o=0;o<this.handles.length;o++){var s=this.handles[o].associatedPoint;r=this.handles[o].type;var a=t.findIndex(function(t){return t.x==s.x&&t.y==s.y});if(1<a){if("h"==r?(i=t[a-1].x,n=(t[a-1].y+t[a].y)/2):"v"==r&&(i=(t[a-1].x+t[a].x)/2,n=t[a-1].y),this.options.style.lineType==T.TYPE_CURVE&&0<e.length){var h=w.find(e[a-2],function(t){var e;return"h"===r?e=Math.abs(t.y-n):"v"===r&&(e=Math.abs(t.x-i)),e<1});h&&(i=h.x,n=h.y)}this.handles[o].update(i,n)}}}},T.prototype.shapeSetHandle=function(){for(var i,t=this.turningPoints,e=this.getPointsFromCurve(),n=1;n<t.length-2;n++){var r,o,s,a=b.collinearity(t[n-1],t[n],t[n+1]),h=b.collinearity(t[n],t[n+1],t[n+2]);if(!a&&(!h||t[n+1].equals(t[n+2]))||(!a||t[n-1].equals(t[n]))&&!h){if(t[n].x===t[n+1].x?(o=t[n].x,s=(t[n].y+t[n+1].y)/2,i="h"):t[n].y===t[n+1].y&&(o=(t[n].x+t[n+1].x)/2,s=t[n].y,i="v"),o&&s){if(this.options.style.lineType==T.TYPE_CURVE&&0<e.length){var l=w.find(e[n-1],function(t){var e;return"h"===i?e=Math.abs(t.y-s):"v"===i&&(e=Math.abs(t.x-o)),e<1});l&&(o=l.x,s=l.y)}(r=new c(i,o,s,this)).associatedPoint=t[n+1]}r&&(this.add(r.handleShape),this.handles.push(r))}}},T.prototype.createSymbol=function(t,e){var i=e.symbol.type,n=e.symbol.size;if("none"!==i){w.isArray(n)||(n=[n,n]);var r=e.z;e.symbol.z&&(r=e.symbol.z);var o=s.createSymbol(i,-n[0]/2,-n[1]/2,n[0],n[1],r,e.symbol.color);return o.name=t,o}},T.prototype.draw=function(t,e){},T.prototype.drawText=function(t,e,i,n,r){r=r||"text";var o,s=w.isString(e)?"text"===r?{text:e,x:i,y:n}:{image:e,x:i,y:n}:w.defaults({x:i,y:n},e,!0),a=w.defaults(w.clone(this.options.text),s,!0);if("text"===r){var h=this.getTextBoundingRect(a);a=w.defaults(a,{fill:"#F9F9F9",transformText:!0},!0),o=new f.Rect({shape:{width:h.width,height:h.height},style:a,zlevel:20,name:t})}else o=new f.Image({type:"LinkImage",style:a,zlevel:20,name:t});return{text:o,rect:o.getBoundingRect()}},T.prototype.getTextBoundingRect=function(t){var e=f.textContain.getBoundingRect(t.text,t.textFont);return{width:f.textContain.getWidth(t.text,t.textFont),height:e.height||12}},T.prototype.middle=function(){if(this.options.style.lineType==T.TYPE_STRAIGHT||this.options.style.lineType==T.TYPE_CHAIN){var t=b.getMaxLineLength(this.turningPoints);return[(t[0].x+t[1].x)/2,(t[0].y+t[1].y)/2]}if(this.options.style.lineType==T.TYPE_JAGGED){for(var e=this.getLength(),i=-1,n=0,r=0;r<this.turningPoints.length-1;r++){i=r;var o=b.getLength(this.turningPoints[r],this.turningPoints[r+1]);if(!(n+o<e/2))break;n+=o}if(-1!=i){var s=e/2-n;if(b.round(this.turningPoints[i].x,3)==b.round(this.turningPoints[i+1].x,3))return[this.turningPoints[i].x,Math.min(this.turningPoints[i].y,this.turningPoints[i+1].y)+s];if(b.round(this.turningPoints[i].y,3)==b.round(this.turningPoints[i+1].y,3))return[Math.min(this.turningPoints[i].x,this.turningPoints[i+1].x)+s,this.turningPoints[i].y];console.error("Connector:middle() - this should never happen "+this.turningPoints[i]+" "+this.turningPoints[i+1]+" nr of points "+this.turningPoints.length)}}else if(this.options.style.lineType==T.TYPE_CURVE){for(var a=this.getLength(),h=0,l=0;l<this.turningPoints.length-1&&!(h+b.distance(this.turningPoints[l],this.turningPoints[l+1])>.5*a);l++)h+=b.distance(this.turningPoints[l],this.turningPoints[l+1]);var c=(.5*a-h)/b.distance(this.turningPoints[l],this.turningPoints[l+1]);return[c*(this.turningPoints[l+1].x-this.turningPoints[l].x)+this.turningPoints[l].x,c*(this.turningPoints[l+1].y-this.turningPoints[l].y)+this.turningPoints[l].y]}return null},T.prototype.getLength=function(){for(var t=0,e=0;e<this.turningPoints.length-1;e++)t+=b.getLength(this.turningPoints[e],this.turningPoints[e+1]);return t},T.prototype.toJSON=function(){return this.model.set("resourceId",this.resourceId),this.model.set("properties.type",14),this.model.set("bounds.upperLeft.x",this.position[0]),this.model.set("bounds.upperLeft.y",this.position[1]),this.model.set("bounds.lowerRight.x",parseInt(this.position[0]+this.getBoundingRect().width)),this.model.set("bounds.lowerRight.y",parseInt(this.position[1]+this.getBoundingRect().height)),this.model.set("style.sPos",this.options.position.startPos),this.model.set("style.ePos",this.options.position.endPos),this.model.set("style.lineDash",this.options.style.lineDash),this.model.set("style.stroke",this.options.style.stroke),this.model.set("symbol.type",this.options.symbol.type),this.model.set("dockers",this.turningPoints),this.model.option},T.prototype.refreshModel=function(){this.model.set("options",w.clone(this.options)),this.model.set("options.dockers",this.turningPoints);for(var t=[],e=0;e<this.icons.length;e++){var i=this.icons[e],n=[i.key,{icon:i.style.image,width:i.style.width,height:i.style.height}];t.push(n)}this.model.set("icons",t)},T.prototype.modifyCurve=function(t){for(var e=this.getCurvePoint(t),i=[],n=e.length,r=this.groupCurve.childCount();n<r;n++)i.push(this.groupCurve.childAt(n));w.each(i,function(t){this.groupCurve.remove(t)},this);for(var o=0;o<e.length;o++){var s=this.groupCurve.childAt(o);if(s)s.attr("shape",e[o]);else{var a=new f.BezierCurve({style:this.options.style,shape:e[o],z:this.options.z});this.groupCurve.add(a),this.createHoverStyle(a)}}},T.prototype.getBezierPoints=function(t,e){var i=[],n=null,r=t.start,o=t.cp1,s=t.cp2,a=t.end;(!e||e<=50)&&(e=50),o||s?o&&!s?n=this.twoBezier:o&&s&&(n=this.threeBezier):n=this.oneBezier;for(var h=0;h<e;h++)i.push(n(h/e,r,o,s,a));return i.push(a),i},T.prototype.oneBezier=function(t,e,i,n,r){var o=e.x1,s=e.y1;return{x:o+(r.x2-o)*t,y:s+(r.y2-s)*t}},T.prototype.twoBezier=function(t,e,i,n,r){var o=e.x1,s=e.y1,a=r.x2,h=r.y2;return{x:(1-t)*(1-t)*o+2*t*(1-t)*i.cpx1+t*t*a,y:(1-t)*(1-t)*s+2*t*(1-t)*i.cpy1+t*t*h}},T.prototype.threeBezier=function(t,e,i,n,r){var o=e.x1,s=e.y1,a=r.x2,h=r.y2,l=i.cpx1,c=i.cpy1;return{x:o*(1-t)*(1-t)*(1-t)+3*l*t*(1-t)*(1-t)+3*n.cpx2*t*t*(1-t)+a*t*t*t,y:s*(1-t)*(1-t)*(1-t)+3*c*t*(1-t)*(1-t)+3*n.cpy2*t*t*(1-t)+h*t*t*t}},T.prototype.getPointsFromCurve=function(){var e,i=this,t=this.turningPoints,n=b.getMaxLineLength(t),r=[];if(e=parseInt(n[0].x-n[1].x),this.options.style.lineType==T.TYPE_CURVE&&2<t.length){var o=this.transformCurvePoint(this.getCurvePoint(t));0<o.length&&o.forEach(function(t){r.push(i.getBezierPoints(t,e))})}return r},T.prototype.transformCurvePoint=function(t){var i=[];return t.forEach(function(t){var e={};t.x1&&t.y1&&(e.start={x1:t.x1,y1:t.y1}),t.cpx1&&t.cpy1&&(e.cp1={cpx1:t.cpx1,cpy1:t.cpy1}),t.cpx2&&t.cpy2&&(e.cp2={cpx2:t.cpx2,cpy2:t.cpy2}),t.x2&&t.y2&&(e.end={x2:t.x2,y2:t.y2}),i.push(e)}),i},T.prototype.getCurvePoint=function(t){var e=t.length,i=[];if(3===e)return i.push({x1:t[0].x,y1:t[0].y,cpx1:t[1].x,cpy1:t[1].y,x2:t[2].x,y2:t[2].y}),i;if(4===e)return i.push({x1:t[0].x,y1:t[0].y,cpx1:t[1].x,cpy1:t[1].y,cpx2:t[2].x,cpy2:t[2].y,x2:t[3].x,y2:t[3].y}),i;function n(t,e){return new P(t.x+e.x,t.y+e.y)}function r(t,e){if(0==e)throw"Division by zero not allowed (yet :) "+this.callee;return new P(t.x/e,t.y/e)}function o(t,e){return new P(t.x*e,t.y*e)}var s,a=[0,0,0];for(s=0;s<=e-3;s++)a.push(s);a.push(e-3,e-3);for(var h=1;h<=e-3;h++){var l=r(n(o(t[h],a[h+4]-a[h+2]),o(t[h+1],a[h+2]-a[h+1])),a[h+4]-a[h+1]),c=(a[h+3]-a[h+2])/(a[h+3]-a[h+1]),u=r(n(o(t[h-1],a[h+3]-a[h+2]),o(t[h],a[h+2]-a[h])),a[h+3]-a[h]),f=o(l,(a[h+2]-a[h+1])/(a[h+3]-a[h+1])),d=n(o(u,c),f),p=r(n(o(t[h],a[h+4]-a[h+3]),o(t[h+1],a[h+3]-a[h+1])),a[h+4]-a[h+1]),g=(a[h+3]-a[h+2])/(a[h+4]-a[h+2]),v=r(n(o(t[h+1],a[h+5]-a[h+3]),o(t[h+2],a[h+3]-a[h+2])),a[h+5]-a[h+2]),y=o(p,(a[h+4]-a[h+3])/(a[h+4]-a[h+2])),m=n(o(v,g),y);i.push({x1:d.x,y1:d.y,cpx1:l.x,cpy1:l.y,cpx2:p.x,cpy2:p.y,x2:m.x,y2:m.y})}return i},b.inherits(T,n),t.exports=T},function(t,e,i){"use strict";var l=i(3),c=i(26),n=l.extendShape({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var i=e.cx,n=e.cy,r=e.width/2,o=e.height/2;t.moveTo(i,n-o),t.lineTo(i+r,n+o),t.lineTo(i-r,n+o),t.closePath()}}),r=l.extendShape({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var i=e.cx,n=e.cy,r=e.width/2,o=e.height/2;t.moveTo(i,n-o),t.lineTo(i+r,n),t.lineTo(i,n+o),t.lineTo(i-r,n),t.closePath()}}),o=l.extendShape({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var i=e.x,n=e.y,r=e.width/5*3,o=Math.max(r,e.height),s=r/2,a=s*s/(o-s),h=n-o+s+a,l=Math.asin(a/s),c=Math.cos(l)*s,u=Math.sin(l),f=Math.cos(l);t.arc(i,h,s,Math.PI-l,2*Math.PI+l);var d=.6*s,p=.7*s;t.bezierCurveTo(i+c-u*d,h+a+f*d,i,n-p,i,n),t.bezierCurveTo(i,n-p,i-c+u*d,h+a+f*d,i-c,h+a),t.closePath()}}),s=l.extendShape({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var i=e.height,n=e.width,r=e.x,o=e.y,s=n/3*2;t.moveTo(r,o),t.lineTo(r+s,o+i),t.lineTo(r,o+i/4*3),t.lineTo(r-s,o+i),t.lineTo(r,o),t.closePath()}}),a={line:l.Line,rect:l.Rect,roundRect:l.Rect,square:l.Rect,circle:l.Circle,diamond:r,pin:o,arrow:s,triangle:n},h={line:function(t,e,i,n,r){r.x1=t,r.y1=e+n/2,r.x2=t+i,r.y2=e+n/2},rect:function(t,e,i,n,r){r.x=t,r.y=e,r.width=i,r.height=n},roundRect:function(t,e,i,n,r){r.x=t,r.y=e,r.width=i,r.height=n,r.r=Math.min(i,n)/4},square:function(t,e,i,n,r){var o=Math.min(i,n);r.x=t,r.y=e,r.width=o,r.height=o},circle:function(t,e,i,n,r){r.cx=t+i/2,r.cy=e+n/2,r.r=Math.min(i,n)/2},diamond:function(t,e,i,n,r){r.cx=t+i/2,r.cy=e+n/2,r.width=i,r.height=n},pin:function(t,e,i,n,r){r.x=t+i/2,r.y=e+n/2,r.width=i,r.height=n},arrow:function(t,e,i,n,r){r.x=t+i/2,r.y=e+n/2,r.width=i,r.height=n},triangle:function(t,e,i,n,r){r.cx=t+i/2,r.cy=e+n/2,r.width=i,r.height=n}},u={};for(var f in a)u[f]=new a[f];function d(t){if("image"!==this.type){var e=this.style,i=this.shape;i&&"line"===i.symbolType?e.stroke=t:this.__isEmptyBrush?(e.stroke=t,e.fill="#fff"):(e.fill&&(e.fill=t),e.stroke&&(e.stroke=t)),this.dirty()}}var p=l.extendShape({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},beforeBrush:function(){var t=this.style;"pin"===this.shape.symbolType&&"inside"===t.textPosition&&(t.textPosition=["50%","40%"],t.textAlign="center",t.textVerticalAlign="middle")},buildPath:function(t,e){var i=e.symbolType,n=u[i];"none"!==e.symbolType&&(n=n||u[i="rect"],h[i](e.x,e.y,e.width,e.height,n.shape),n.buildPath(t,n.shape))}}),g={createSymbol:function(t,e,i,n,r,o,s){var a,h=0===t.indexOf("empty");return h&&(t=t.substr(5,1).toLowerCase()+t.substr(6)),(a=0===t.indexOf("image://")?new l.Image({style:{image:t.slice(8),x:e,y:i,width:n,height:r},z:o}):0===t.indexOf("path://")?l.makePath(t.slice(7),{z:o,rectHover:!0},new c(e,i,n,r)):new p({shape:{symbolType:t,x:e,y:i,width:n,height:r},z:o})).__isEmptyBrush=h,a.setColor=d,a.setColor(s),a}};t.exports=g},function(t,e,i){var o=i(3),a=i(63);function s(t,e,i,n){this.type=t,this.x=e,this.y=i,this.visible=!0,this.connector=n,this.handleShape=new o.Circle({shape:{cx:e,cy:i,r:s.RADIUS},style:{fill:"rgb(0,255,0)",stroke:"rgb(0,0,0)"},zlevel:n.options.z+2,draggable:!0});var r=this;this.handleShape.on("drag",function(t){r.actionConnector(t.offsetX,t.offsetY)})}s.RADIUS=4,s.prototype={constructor:s,equals:function(t){return!(!t instanceof s)&&(this.type==t.type&&this.x==t.x&&this.y==t.y&&this.visible==t.visible)},update:function(t,e){this.handleShape.attr("position",[0,0]),this.x=t,this.y=e,this.handleShape.setShape({cx:t,cy:e})},actionConnector:function(t,e){switch(this.type){case"v":for(var i=1;i<this.connector.turningPoints.length-1;i++){if(this.associatedPoint&&this.connector.turningPoints[i].x==this.associatedPoint.x&&this.connector.turningPoints[i].y==this.associatedPoint.y){o=i;break}this.connector.turningPoints[i-1].y==this.connector.turningPoints[i].y&&this.connector.turningPoints[i].y==this.y&&Math.min(this.connector.turningPoints[i].x,this.connector.turningPoints[i-1].x)<=this.x&&Math.max(this.connector.turningPoints[i].x,this.connector.turningPoints[i-1].x)>=this.x&&(o=i)}var n=e-this.y,r=a.translationMatrix(0,n);this.connector.turningPoints[o-1].transform(r),this.connector.turningPoints[o].transform(r),this.connector.refresh();break;case"h":var o;for(i=1;i<this.connector.turningPoints.length-1;i++){if(this.associatedPoint&&this.connector.turningPoints[i].x==this.associatedPoint.x&&this.connector.turningPoints[i].y==this.associatedPoint.y){o=i;break}this.connector.turningPoints[i-1].x==this.connector.turningPoints[i].x&&this.connector.turningPoints[i].x==this.x&&Math.min(this.connector.turningPoints[i].y,this.connector.turningPoints[i-1].y)<=this.y&&Math.max(this.connector.turningPoints[i].y,this.connector.turningPoints[i-1].y)>=this.y&&(o=i)}var s=t-this.x;r=a.translationMatrix(s,0);this.connector.turningPoints[o-1].transform(r),this.connector.turningPoints[o].transform(r),this.connector.refresh()}}},t.exports=s},function(t,e,i){i(4);var a=i(14),f=i(30);i(81);function n(t,e,i,n){this._lastFrame=0,this._lastFramePercent=0,this.symbol=t,this.groupCurve=i,this.initSymbol(e,n)}var r=n.prototype;r.initSymbol=function(t,e){var i=this;this.symbol.z2=100,this.symbol.culling=!0;var n=1e3*t.effect.period;if(this.symbol.__t=0,this.symbol.stopAnimation(),"curve"==t.style.lineType){if(this.groupCurve){n/=this.groupCurve._children.length,this.groupCurveAnimate(this.groupCurve._children[0],0,n)}}else this.symbol.animate("",!0).when(n,{__t:1}).delay(0).during(function(){i.updateSymbolPositionPolyline()}).start(),this.setAnimationPointsPolyline(e.shape.points)},r.groupCurveAnimate=function(t,e,i){var n,r=this;null==t&&(t=this.groupCurve._children[0],e=0);var o=t.shape;n=[[o.x1,o.y1],[o.x2,o.y2],[o.cpx1,o.cpy1],[o.cpx2,o.cpy2]],this.setAnimationPointsBezierCurve(n),this.symbol.animate("").when(i,{__t:1}).delay(0).during(function(){r.updateSymbolPositionBezierCurve()}).done(function(){r.symbol.__t=0,r.groupCurveAnimate(r.groupCurve._children[e+1],e+1,i)}).start()},r.setAnimationPointsBezierCurve=function(t){this.symbol.__p1=t[0],this.symbol.__p2=t[1],this.symbol.__cp1=t[2]||[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2],this.symbol.__cp2=t[3]},r.updateSymbolPositionBezierCurve=function(){var t,e,i=this.symbol.__p1,n=this.symbol.__p2,r=this.symbol.__cp1,o=this.symbol.__cp2,s=this.symbol.__t,a=this.symbol.position;if(null!=o[0]){var h=f.cubicAt,l=f.cubicDerivativeAt;a[0]=h(i[0],r[0],o[0],n[0],s),a[1]=h(i[1],r[1],o[1],n[1],s),t=l(i[0],r[0],o[0],n[0],s),e=l(i[1],r[1],o[1],n[1],s)}else{var c=f.quadraticAt,u=f.quadraticDerivativeAt;a[0]=c(i[0],r[0],n[0],s),a[1]=c(i[1],r[1],n[1],s),t=u(i[0],r[0],n[0],s),e=u(i[1],r[1],n[1],s)}this.symbol.rotation=-Math.atan2(e,t)-Math.PI/2,this.symbol.ignore=!1},r.setAnimationPointsPolyline=function(t){this._points=t;for(var e=[0],i=0,n=1;n<t.length;n++){var r=t[n-1],o=t[n];i+=a.dist(r,o),e.push(i)}if(0!==i){for(var s=0;s<e.length;s++)e[s]/=i;this._offsets=e,this._length=i,this.symbol._lastFrame=0,this.symbol.__lastFramePercent=0}},r.updateSymbolPositionPolyline=function(){var t=this.symbol.__t,e=this._points,i=this._offsets,n=e.length;if(i){var r=this._lastFrame;if(t<this._lastFramePercent){for(o=Math.min(r+1,n-1);0<=o&&!(i[o]<=t);o--);o=Math.min(o,n-2)}else{for(var o=r;o<n&&!(i[o]>t);o++);o=Math.min(o-1,n-2)}a.lerp(this.symbol.position,e[o],e[o+1],(t-i[o])/(i[o+1]-i[o])),this._lastFrame=o,this._lastFramePercent=t;var s=-Math.atan2(e[o+1][1]-e[o][1],e[o+1][0]-e[o][0]);this.symbol.rotation=s-Math.PI/2,this.symbol.ignore=!1}},t.exports=n},function(t,e,i){var r=i(3);function o(t,e,i,n){this.connector=t,this.point=e.clone(),this.type=i,this.color=o.NORMAL_COLOR,this.oType="ConnectionPoint",this.shape=new r.Circle({shape:{cx:this.point.x,cy:this.point.y,r:o.RADIUS},style:{fill:this.color,stroke:"#000000"},z:n.z+2}),this.shape.type=this.type,this.shape.connector=t}o.NORMAL_COLOR="#FFFF33",o.OVER_COLOR="#FF9900",o.CONNECTED_COLOR="#ff0000",o.RADIUS=4,o.TYPE_FIGURE="figure",o.TYPE_CONNECTOR="connector",o.prototype={constructor:o,equals:function(t){return this.point.equals(t.point)&&this.connector==t.connector&&this.type==t.type&&this.color==t.color&&this.radius==t.radius}},t.exports=o},function(t,e,i){var o=i(4),n=i(86);function r(t,e,i){this.parentModel=e,this.option=t,this.init&&(arguments.length<=3?this.init(t,e,i):this.init.apply(this,arguments))}r.prototype={constructor:r,init:function(t){o.merge(t,this.getDefaultOption())},getDefaultOption:function(){if(!this.hasOwnProperty("__defaultOption")){for(var t=[],e=this.constructor;e;){var i=e.prototype.defaultOption;i&&t.push(i),e=e.superClass}for(var n={},r=t.length-1;0<=r;r--)n=o.merge(n,t[r],!0);this.__defaultOption=n}return this.__defaultOption},mergeOption:function(t){o.merge(this.option,t,!0)},get:function(t,e){if(!t)return this.option;"string"==typeof t&&(t=t.split("."));for(var i=this.option,n=this.parentModel,r=0;r<t.length&&null!=(i=i&&"object"==typeof i?i[t[r]]:null);r++);return null==i&&n&&!e&&(i=n.get(t)),i},set:function(t,e){var i=this.option;if(-1==t.indexOf("."))i[t]=e;else{for(var n,r=t.split("."),o=r.length,s=i,a=0;a<o-1;a++)null==s[n=r[a]]&&(s[n]={}),s=s[n];s[n=r[o-1]]=e}},getShallow:function(t,e){var i=this.option,n=i&&i[t],r=this.parentModel;return null==n&&r&&!e&&(n=r.getShallow(t)),n},getModel:function(t,e){var i=this.get(t,!0),n=this.parentModel;return new r(i,e||n&&n.getModel(t))},isEmpty:function(){return null==this.option},restoreData:function(){},clone:function(){return new this.constructor(o.clone(this.option))}},n.enableClassExtend(r),t.exports=r},function(t,e,i){var o=i(4),n={},s="___FT__COMPONENT__CONTAINER___",a=n.parseClassType=function(t){var e={main:"",sub:""};return t&&(t=t.split("."),e.main=t[0]||"",e.sub=t[1]||""),e};function r(t,e){var i=o.slice(arguments,2);return this.superClass.prototype[e].apply(t,i)}function h(t,e,i){return this.superClass.prototype[e].apply(t,i)}n.enableClassExtend=function(i,n){i.extend=function(t){function e(){n&&n.apply(this,arguments),i.apply(this,arguments)}return o.extend(e.prototype,t),e.extend=this.extend,e.superCall=r,e.superApply=h,o.inherits(e,this),e.superClass=this,e}},n.enableClassManagement=function(i,t){t=t||{};var r={};if(i.registerClass=function(t,e){if(e)if((e=a(e)).sub){if(e.sub!==s){(function(t){var e=r[t.main];e&&e[s]||((e=r[t.main]={})[s]=!0);return e})(e)[e.sub]=t}}else{if(r[e.main])return;r[e.main]=t}return t},i.getClass=function(t,e,i){var n=r[t];if(n&&n[s]&&(n=e?n[e]:null),i&&!n)throw new Error("Component "+t+"."+(e||"")+" not exists. Load it first.");return n},i.getClassesByMainType=function(t){t=a(t);var i=[],e=r[t.main];return e&&e[s]?o.each(e,function(t,e){e!==s&&i.push(t)}):i.push(e),i},i.hasClass=function(t){return t=a(t),!!r[t.main]},i.getAllClassMainTypes=function(){var i=[];return o.each(r,function(t,e){i.push(e)}),i},i.hasSubTypes=function(t){t=a(t);var e=r[t.main];return e&&e[s]},i.parseClassType=a,t.registerWhenExtend){var n=i.extend;n&&(i.extend=function(t){var e=n.call(this,t);return i.registerClass(e,t.type)})}return i},t.exports=n},function(t,e){t.exports={STRAIGHT_SVG:"M937.353846 724.676923C882.215385 669.538462 795.569231 661.661538 732.553846 701.046154L362.338462 330.830769C401.723077 267.815385 393.846154 181.169231 338.707692 126.030769 267.815385 55.138462 165.415385 55.138462 94.523077 126.030769 23.630769 196.923077 23.630769 299.323077 94.523077 370.215385 149.661538 425.353846 236.307692 433.230769 299.323077 393.846154L669.538462 764.061538C630.153846 827.076923 638.030769 913.723077 693.169231 968.861538 764.061538 1039.753846 866.461538 1039.753846 937.353846 968.861538 1000.369231 897.969231 1000.369231 795.569231 937.353846 724.676923L937.353846 724.676923ZM275.692308 307.2C244.184615 338.707692 189.046154 338.707692 157.538462 307.2 126.030769 275.692308 126.030769 220.553846 157.538462 189.046154 189.046154 157.538462 244.184615 157.538462 275.692308 189.046154 307.2 220.553846 307.2 267.815385 275.692308 307.2L275.692308 307.2ZM874.338462 913.723077C842.830769 945.230769 787.692308 945.230769 756.184615 913.723077 724.676923 882.215385 724.676923 827.076923 756.184615 795.569231 787.692308 764.061538 842.830769 764.061538 874.338462 795.569231 905.846154 827.076923 905.846154 874.338462 874.338462 913.723077L874.338462 913.723077Z",JAGGED_SVG:"M204.8 819.2l-51.2-102.4 204.8-307.2 51.2 102.4-204.8 307.2zM409.6 512l51.2-102.4 153.6 204.8-51.2 102.4-153.6-204.8zM819.2 204.8l51.2 102.4-204.8 409.6-51.2-102.4 204.8-409.6z                                    M153.6 716.8c-87.04 0-153.6 66.56-153.6 153.6s66.56 153.6 153.6 153.6 153.6-66.56 153.6-153.6-66.56-153.6-153.6-153.6z m51.2 204.8H102.4v-102.4h102.4v102.4zM409.6 204.8C322.56 204.8 256 271.36 256 358.4s66.56 153.6 153.6 153.6 153.6-66.56 153.6-153.6-66.56-153.6-153.6-153.6z m51.2 204.8H358.4V307.2h102.4v102.4zM614.4 614.4c-87.04 0-153.6 66.56-153.6 153.6s66.56 153.6 153.6 153.6 153.6-66.56 153.6-153.6-66.56-153.6-153.6-153.6z m51.2 204.8h-102.4v-102.4h102.4v102.4zM870.4 0c-87.04 0-153.6 66.56-153.6 153.6s66.56 153.6 153.6 153.6 153.6-66.56 153.6-153.6-66.56-153.6-153.6-153.6z m51.2 204.8h-102.4V102.4h102.4v102.4z",CURVE_SVG:"M1014.285039 824.024234l-145.168428-144.37205c-12.969593-12.855825-37.543559-14.505466-44.597197 2.332252-1.877178 4.550734-2.275367 17.179022-2.275368 17.179022v97.556369H330.935383a118.319095 118.319095 0 0 1-118.546632-117.920905A118.319095 118.319095 0 0 1 330.992267 560.878016h445.516899c121.561493 0 220.426198-98.352747 220.426198-219.23163s-98.864705-219.174746-220.426198-219.174746H340.491925A174.236244 174.236244 0 0 0 174.105698 0 173.78117 173.78117 0 0 0 0.040107 173.09856a173.78117 173.78117 0 0 0 174.065591 173.09856 174.236244 174.236244 0 0 0 166.386227-122.471639h436.017241c65.416807 0 118.603516 52.902288 118.603515 117.920905A118.319095 118.319095 0 0 1 776.509166 459.624176H330.992267c-121.504609 0-220.369314 98.352747-220.369314 219.23163s98.864705 219.174746 220.369314 219.174746h491.194895v92.550561s0 14.221045 2.332252 19.795695c7.053638 16.894602 31.627604 17.577212 44.597197 4.664502l145.111543-144.315165a32.879056 32.879056 0 0 0 0-46.645027zM174.105698 244.94328c-39.818926 0-72.242909-32.25333-72.242909-71.84472s32.423983-71.787835 72.242909-71.787835c39.818926 0 72.186025 32.196446 72.186025 71.787835 0 39.591389-32.423983 71.787835-72.242909 71.787836z",DEL_SVG:"M980.992 256h-84.992v683.008c0 47.104-37.888 84.992-84.992 84.992H212.992c-47.104 0-84.992-37.888-84.992-84.992V256H43.008C19.456 256 0 236.544 0 212.992c0-23.552 19.456-43.008 43.008-43.008H256V84.992C256 37.888 293.888 0 340.992 0h340.992C730.112 0 768 37.888 768 84.992v84.992h214.016c23.552 0 43.008 19.456 43.008 43.008-1.024 23.552-20.48 43.008-44.032 43.008zM683.008 84.992H340.992v84.992h340.992V84.992zM212.992 939.008h596.992V256H212.992v683.008z m171.008-470.016v256c0 23.552-19.456 43.008-43.008 43.008-23.552 0-43.008-19.456-43.008-43.008v-256c0-23.552 19.456-43.008 43.008-43.008 23.552 1.024 43.008 19.456 43.008 43.008zM512 427.008c23.552 0 43.008 19.456 43.008 43.008v256c0 23.552-19.456 43.008-43.008 43.008-23.552 0-43.008-19.456-43.008-43.008v-256c0-24.576 19.456-43.008 43.008-43.008z m171.008 0c23.552 0 43.008 19.456 43.008 43.008v256c0 23.552-19.456 43.008-43.008 43.008-23.552 0-43.008-19.456-43.008-43.008v-256c0-24.576 19.456-43.008 43.008-43.008z",COMMENT_SVG:"M209.92 152.064l572.416 1.536c12.8 0 23.04 10.24 23.04 23.04v237.568c0 12.8 10.24 23.04 23.04 23.04s23.04-10.24 23.04-23.04V125.44c0-12.8-10.24-23.04-23.04-23.04H158.72c-12.8 0-23.04 10.24-23.04 23.04v773.12c0 12.8 10.24 23.04 23.04 23.04h236.032c12.8 0 23.04-10.24 23.04-23.04s-10.24-22.528-22.528-23.04l-185.856-1.536c-12.8 0-22.528-10.24-22.528-23.04V174.592c0-12.288 10.24-22.528 23.04-22.528z                                            M268.8 570.368h159.232c13.312 0 24.064 10.752 24.576 24.064v2.56c0 13.312-10.752 24.576-24.576 24.576H268.8c-13.312 0-24.064-10.752-24.576-24.064v-2.56c0.512-13.312 11.264-24.576 24.576-24.576z m0-312.32h441.344c13.312 0 24.576 10.752 24.576 24.576v2.56c0 13.312-10.752 24.576-24.576 24.576H268.8c-13.312 0-24.576-10.752-24.576-24.576v-2.56c0.512-13.312 11.264-24.576 24.576-24.576z m0.512 155.648h269.312c13.312 0 24.576 10.752 24.576 24.064v2.56c0 13.312-10.752 24.576-24.576 24.576H269.312c-13.312 0-24.576-10.752-24.576-24.064v-2.56c0-13.824 10.752-24.576 24.576-24.576z m471.04 13.312l-246.784 339.456c-1.536 2.56-2.56 5.632-2.56 8.704l-1.536 132.096c0 9.728 9.728 16.896 18.944 14.336l122.88-37.888c3.072-1.024 5.632-3.072 7.68-5.632l246.784-338.944c4.608-6.144 3.584-15.36-2.56-19.968l-121.344-94.72c-7.168-5.632-16.896-4.096-21.504 2.56z m23.04 67.584l51.2 39.936c2.048 1.536 2.56 5.12 1.024 7.168l-26.112 35.84c-1.536 2.56-5.12 3.072-7.68 1.024l-51.712-38.912c-2.048-1.536-2.56-4.608-1.024-7.168l26.624-37.376c2.048-1.536 5.632-2.048 7.68-0.512z m-165.888 341.504l-35.328 10.752c-9.216 3.072-18.944-4.096-18.944-13.824l0.512-40.96c0-3.072 1.024-6.144 2.56-8.704l137.216-187.904c1.536-2.56 5.12-2.56 7.168-1.024l51.2 38.4c2.56 2.048 3.072 5.12 1.024 7.68l-137.728 189.952c-2.048 2.56-4.608 4.608-7.68 5.632z",CHANGE_LINE_TYPE_SVG:"M1008 335.2 1008 335.2l-160 144 0 0c-8.8 8-20 12.8-32 12.8-26.4 0-48-21.6-48-48 0-14.4 6.4-26.4 16-35.2l0 0 67.2-60L560 348.8c0 0 0 0 0 0L464 348.8l0 0L352 348.8 48 348.8c-26.4 0-48-21.6-48-48 0-26.4 21.6-48 48-48l124.8 0 0 0L416 252.8l0 0 208 0 0 0 227.2 0L784 192l0 0c-9.6-8.8-16-21.6-16-35.2 0-26.4 21.6-48 48-48 12 0 23.2 4.8 32 12.8l0 0 160 144 0 0c9.6 8.8 16 21.6 16 35.2C1024 314.4 1017.6 326.4 1008 335.2zM16 680.8 16 680.8l160-144 0 0c8.8-8 20-12.8 32-12.8 26.4 0 48 21.6 48 48 0 14.4-6.4 26.4-16 35.2l0 0-67.2 60L400 667.2l0 0 208 0 0 0 243.2 0 0 0L976 667.2c26.4 0 48 21.6 48 48 0 26.4-21.6 48-48 48L672 763.2 560 763.2c0 0 0 0 0 0L464 763.2l0 0L172.8 763.2 240 824l0 0c9.6 8.8 16 21.6 16 35.2 0 26.4-21.6 48-48 48-12 0-23.2-4.8-32-12.8l0 0L16 752l0 0c-9.6-8.8-16-21.6-16-35.2C0 701.6 6.4 689.6 16 680.8z"}},function(t,e,i){var h=i(4),n=i(89),l=i(80),y=i(63),c=(i(3),i(64)),u=i(91),f=i(85);i(90);function r(){n.call(this),this.LineOperations=[],this.bundleOffset=30,this.bundleGap=20,this.connectorMap=y.StackedMap.createNew()}r.prototype.connectorCreateOfPoints=function(t,r){var o=this,e=t.model,i=new l(t);if(t.startDemoId&&t.endDemoId&&(i.startDemoId=t.startDemoId,i.endDemoId=t.endDemoId),t.pos){var n=t.pos.split(",");i.sPos=n[0],i.ePos=n[1]}this.connectors.push(i),i.conPointsGroup&&i.conPointsGroup.on("click",function(t){var e=t.target.type.split(l.SEPERATOR),i=t.target.connector;e[0]===l.START_NODE?i.sPos=e[1]:e[0]===l.END_NODE&&(i.ePos=e[1]),o.refreshConnector(i,!0),t.cancelBubble=!0;var n={};n.event=t,n.type="conPointsGroup:click",n.lineNode=o.selConnector,r.trigger(n.type,n)});h.each(["click","dblclick"],function(n){i.on("Connector:"+n,function(t){var e=t.target;o.selConnector!==e&&(o.selConnector&&o.refreshConnector(o.selConnector),o.selConnector=e),t.cancelBubble=!0;var i={};i.event=t,i.type=n,i.target=o.selConnector,r.trigger(i.type,i)})}),this.bundleOffset=t.bundleOffset||this.bundleOffset,this.bundleGap=t.bundleGap||this.bundleGap;var s=t.dockers;if(s&&2<=s.length){var a=c.loadArray(s);i.refresh(a)}else if(t.position&&t.position.points){a=t.position.points;i.refresh(a)}return(e=new f({})).set(u.ELEMENT_TYPE,u.CONNECTION),e.set(u.OPTIONS,h.clone(t)),e.set(u.DOCKERS,i.turningPoints),e.set(u.STYLE_LINETYPE,t.style.lineType),i.model=e,i},r.prototype.getTwoNodeId=function(t,e){return t.id+","+e.id},r.prototype.refreshCons=function(t){if(t[0].options.style.lineType==l.TYPE_JAGGED)for(var e=0;e<t.length;e++)this.refreshConnector(t[e],!0);else this.refreshConsStraight(t)},r.prototype.refreshConsStraight=function(t){var e=parseInt(t.length/2),i=[],n=t[0].startNode,r=t[0].endNode,o=y.getRect(n).boundingRect,s=y.getRect(r).boundingRect,a=y.getConnectorPoints(o),h=y.getConnectorPoints(s);t[0].sPos&&t[0].ePos||(o.x<s.x?(t[0].sPos="right",t[0].ePos="left"):(t[0].sPos="left",t[0].ePos="right"));for(var l=a[t[0].sPos],c=h[t[0].ePos],u=Math.atan2(c.y-l.y,c.x-l.x),f=e;1<=f;f--){(p=[]).push(l),(g=l.clone()).transform(y.translationMatrix(0,this.bundleGap*f)),g.x=g.x+this.bundleOffset*Math.cos(u),g.y=g.y+this.bundleOffset*Math.sin(u),p.push(g),(v=c.clone()).transform(y.translationMatrix(0,this.bundleGap*f)),v.x=v.x-this.bundleOffset*Math.cos(u),v.y=v.y-this.bundleOffset*Math.sin(u),p.push(v),p.push(c),i.push(p)}i.push([l,c]);var d=Math.ceil(t.length/2);for(f=1;f<d;f++){var p,g,v;(p=[]).push(l),(g=l.clone()).transform(y.translationMatrix(0,-this.bundleGap*f)),g.x=g.x+this.bundleOffset*Math.cos(u),g.y=g.y+this.bundleOffset*Math.sin(u),p.push(g),(v=c.clone()).transform(y.translationMatrix(0,-this.bundleGap*f)),v.x=v.x-this.bundleOffset*Math.cos(u),v.y=v.y-this.bundleOffset*Math.sin(u),p.push(v),p.push(c),i.push(p)}for(f=0;f<i.length;f++)t[f].refresh(i[f])},r.prototype.boundOffsetXY=function(t,e){var i=t.clone(),n=Math.atan2(i.y,i.x),r=Math.sqrt(Math.pow(i.x,2)+Math.pow(i.y,2));return e?r+=this.bundleOffset:r-=this.bundleOffset,i.x=r*Math.cos(n),i.y=r*Math.sin(n),i},r.prototype.setModel=function(t,e){var i=t.model.get("style.lineType");t.model.mergeOption(e),i!==e.style.lineType&&this.refreshConnector(t,!0)},r.prototype.refreshLineByNode=function(t){for(var e=this.connectorMap.keys(),i=0;i<e.length;i++){var n=e[i];if(-1!=n.indexOf(t.id)){var r=this.connectorMap.get(n);1==r.length?this.refreshConnector(r[0],!0):1<r.length&&this.refreshCons(r)}}},h.inherits(r,n),t.exports=r},function(t,e,i){var it=i(63),nt=i(64),rt=i(80),ot=i(90),st=i(4);function n(){this.connectors=[],this.selConnector=null,this.tempConnector=null}n.prototype.connectorForbidEdit=function(t){for(var e=0;e<this.connectors.length;e++)this.connectors[e].options.isEdit=!t;t&&this.removeConnectorEventListener()},n.prototype.removeConnectorEventListener=function(){0<this.connectors.length&&this.connectors.forEach(function(t){t.polyLine.off("mouseover"),t.polyLine.off("mousemove"),t.polyLine.off("mouseout"),t.curveLine.off("mouseover"),t.curveLine.off("mousemove"),t.curveLine.off("mouseout")})},n.prototype.clearSelectCon=function(){null!=this.selConnector&&this.refreshConnector(this.selConnector)},n.prototype.deleteSelectCon=function(t,e){for(var i=0;i<this.connectors.length;i++)if(this.connectors[i].startNode==t||this.connectors[i].endNode==t){var n=this.connectors[i].startNode.model.get("outgoing"),r=st.indexOf(n,this.connectors[i].resourceId);-1!=r&&n.splice(r,1),e.remove(this.connectors[i]),this.connectors.splice(i,1),i--,this.selConnector=null}},n.prototype.removeLine=function(t,e){this.selConnector=t,this.deleteLine(e)},n.prototype.deleteLine=function(t){if(this.selConnector.startNode){var e=this.selConnector.startNode.model.get("outgoing");if(-1!=(n=st.indexOf(e,this.selConnector.resourceId))&&e.splice(n,1),this.connectorMap){var i=this.getTwoNodeId(this.selConnector.startNode,this.selConnector.endNode,this.selConnector.options.position);this.connectorMap.removeItem(i,this.selConnector)}}t.remove(this.selConnector);var n=st.indexOf(this.connectors,this.selConnector);-1!=n&&this.connectors.splice(n,1),this.selConnector=null},n.prototype.refreshConnector=function(t,e){if(e||!t.turningPoints||t.turningPoints.length<2){t.model&&t.model.get("style.lineType")&&(t.options.style.lineType=t.model.get("style.lineType"));var i=this.getStartEndPoint(t),n=null;t.options.position&&t.options.position.escapeDistance&&(n=t.options.position.escapeDistance);var r=this.connector2Points(t.options.style.lineType,i[0],i[1],i[2],i[3],n);t.refresh(r[0][2])}t.clearHandles()},n.prototype.getStartEndPoint=function(t){var e,i=t.startNode,n=t.endNode;e=i.parent!==n.parent;var r=it.getRect(i,e).boundingRect,o=[Number(r.x),Number(r.y),Number(r.x)+Number(r.width),Number(r.y)+Number(r.height)],s=it.getRect(n,e).boundingRect,a=[Number(s.x),Number(s.y),Number(s.x)+Number(s.width),Number(s.y)+Number(s.height)],h=it.getConnectorPoints(r,i),l=it.getConnectorPoints(s,n),c=t.options.position;if(c.direction){var u=c.direction.split(",");c.startPos=u[0],c.endPos=u[1]}c.startPos&&c.endPos||(r.x<s.x?(c.startPos="right",c.endPos="left"):(c.startPos="left",c.endPos="right"));var f=this.calcPointExpression(c.startPos,h),d=this.calcPointExpression(c.endPos,l);return f.add(new nt(c.startOffset[0],c.startOffset[1])),d.add(new nt(c.endOffset[0],c.endOffset[1])),[f,d,o,a]},n.prototype.calcPointExpression=function(t,e){var i={top:e.top.x,left:e.left.y,right:e.right.y,bottom:e.bottom.x,center:e.center.x},n="<% print("+t+") %>",r=parseInt(it.template(n)(i));if(-1!=t.indexOf("top"))return new nt(r,e.top.y);if(-1!=t.indexOf("left"))return new nt(e.left.x,r);if(-1!=t.indexOf("right"))return new nt(e.right.x,r);if(-1!=t.indexOf("bottom"))return new nt(r,e.bottom.y);if(-1!=t.indexOf("center"))return new nt(r,e.bottom.y);throw new Error("pos")},n.prototype.manageTempConnector=function(t,e,i,n,r,o){var s=null,a=null,h=it.getRect(t,!0).boundingRect,l=[Number(h.x),Number(h.y),Number(h.x)+Number(h.width),Number(h.y)+Number(h.height)],c=it.getConnectorPoints(h,t);this.tempConnector||(this.tempConnector=new rt({isEdit:!1,style:{lineType:i}}));var u=this.tempConnector,f=u.options.position;f.startPos=n||(h.x<e.x?"right":"left"),f.endPos=r||(h.x<e.x?"left":"right"),u.options.style.lineType=i,o&&(s=it.getRect(o,!0).boundingRect,a=[Number(s.x),Number(s.y),Number(s.x)+Number(s.width),Number(s.y)+Number(s.height)]);var d=this.connector2Points(i,c[f.startPos],e,l,a);return u.refresh(d[0][2]),u},n.prototype.manageReverseTempConnector=function(t,e,i,n,r,o){var s=null,a=null,h=it.getRect(e,!0).boundingRect,l=[Number(h.x),Number(h.y),Number(h.x)+Number(h.width),Number(h.y)+Number(h.height)],c=it.getConnectorPoints(h,e);this.tempConnector||(this.tempConnector=new rt({isEdit:!1,style:{lineType:i}}));var u=this.tempConnector,f=u.options.position;f.endPos=n||(h.x<t.x?"right":"left"),f.startPos=r||(h.x<t.x?"left":"right"),u.options.style.lineType=i,o&&(s=it.getRect(o,!0).boundingRect,a=[Number(s.x),Number(s.y),Number(s.x)+Number(s.width),Number(s.y)+Number(s.height)]);var d=this.connector2Points(i,t,c[f.endPos],a,l);return u.refresh(d[0][2]),u},n.prototype.removeTempConnector=function(t){this.tempConnector&&(t.remove(this.tempConnector),this.tempConnector=null)},n.prototype.connector2Points=function(t,e,i,n,r,o){var s=[30,30];o&&(s=st.isArray(o)?o:[o,o]),ot.group("connectionManager: connector2Points"),ot.info("ConnectionManager: connector2Points ("+t+", "+e+", "+i+", "+n+", "+r+")");var a=[];switch(t){case rt.TYPE_CHAIN:case rt.TYPE_STRAIGHT:var h=[e.clone(),i.clone()];a.push(["straight","straight",h]);break;case rt.TYPE_CURVE:case rt.TYPE_JAGGED:var l=null,c=null;if(null!=n){(f=[]).push(new nt(e.x,n[1]-s[0])),f.push(new nt(n[2]+s[0],e.y)),f.push(new nt(e.x,n[3]+s[0])),f.push(new nt(n[0]-s[0],e.y)),l=f[0];for(var u=1;u<f.length;u++)it.distance(e,f[u])<it.distance(e,l)&&(l=f[u])}if(null!=r){var f;(f=[]).push(new nt(i.x,r[1]-s[1])),f.push(new nt(r[2]+s[1],i.y)),f.push(new nt(i.x,r[3]+s[1])),f.push(new nt(r[0]-s[1],i.y)),c=f[0];for(u=1;u<f.length;u++)it.distance(i,f[u])<it.distance(i,c)&&(c=f[u])}var d=[e],p=0;l&&(d.push(l),p=1),c&&d.push(c),d.push(i);var g=nt.cloneArray(d);a.push(["s0","s0",g]);var v=nt.cloneArray(d),y=nt.cloneArray(v);y.splice(p+1,0,new nt(y[p].x,y[p+1].y)),a.push(["s1","s1_1",y]);var m=nt.cloneArray(v);m.splice(p+1,0,new nt(m[p+1].x,m[p].y)),a.push(["s1","s1_2",m]);var x=nt.cloneArray(d),_=new nt((x[p].x+x[p+1].x)/2,x[p].y),b=new nt((x[p].x+x[p+1].x)/2,x[p+1].y);x.splice(p+1,0,_,b),a.push(["s2","s2_1",x]);var w=nt.cloneArray(d),P=new nt(w[p].x,(w[p].y+w[p+1].y)/2),T=new nt(w[p+1].x,(w[p].y+w[p+1].y)/2);w.splice(p+1,0,P,T),a.push(["s2","s2_2",w]);var C=nt.cloneArray(d),S=[C[p].x+20,C[p+1].x+20];n&&S.push(n[2]+20),r&&S.push(r[2]+20);var M=it.max(S),k=new nt(M,C[p].y),E=new nt(M,C[p+1].y);C.splice(p+1,0,k,E),a.push(["s2","s2_3",C]);var L=nt.cloneArray(d),R=[L[p].y-20,L[p+1].y-20];n&&R.push(n[1]-20),r&&R.push(r[1]-20);var O=it.min(R),A=new nt(L[p].x,O),N=new nt(L[p+1].x,O);L.splice(p+1,0,A,N),a.push(["s2","s2_4",L]);var z=nt.cloneArray(d),I=[z[p].x-20,z[p+1].x-20];n&&I.push(n[0]-20),r&&I.push(r[0]-20);var D=it.min(I),B=new nt(D,z[p].y),H=new nt(D,z[p+1].y);z.splice(p+1,0,B,H),a.push(["s2","s2_5",z]);var F=nt.cloneArray(d),G=[F[p].y+20,F[p+1].y+20];n&&G.push(n[3]+20),r&&G.push(r[3]+20);var V=it.max(G),Y=new nt(F[p].x,V),q=new nt(F[p+1].x,V);F.splice(p+1,0,Y,q),a.push(["s2","s2_6",F]),ot.info("Filter orthogonal solutions. Initial number of solutions = "+a.length);for(var W=[],j=0;j<a.length;j++){var U=a[j][2];it.orthogonalPath(U)&&W.push(a[j])}if(a=W,ot.info("\n\tOrthogonalSolutions = "+a.length),e.equals(i))ot.info("Start and end point coincide...skip backward solution. I think we will just fall on s0 :)");else{ot.info("Filter backward solutions. Initial number of solutions = "+a.length);var X=[],Z="";for(j=0;j<a.length;j++){U=a[j][2];it.forwardPath(U)?X.push(a[j]):Z=Z+"\n\t"+U}a=X,ot.info("\n\t ForwardSolutions = "+a.length),0==a.length&&ot.info("Discarded solutions: "+Z)}ot.info("Filter non intersecting solutions. Initial number of solutions = "+a.length);var K=[];for(j=0;j<a.length;j++){var Q=!1,J=(U=a[j][2]).slice();(r||n)&&(J=J.slice(1,J.length-1)),n&&(Q=Q||it.polylineIntersectsRectangle(J,n)),r&&(Q=Q||it.polylineIntersectsRectangle(J,r)),Q||K.push(a[j])}0!=K.length&&(a=K),ot.info("\n\t nonIntersectionSolutions = "+a.length),ot.info("Get first class of solutions with same nr of points"),0==a.length&&ot.info("This is not possible");var $=a[0][2].length,tt=[];for(j=0;j<a.length;j++){(U=a[j][2]).length==$&&tt.push(a[j])}a=tt,ot.info("pick the first solution with 90 degree angles (less turnarounds)");var et=0;for(j=0;j<a.length;j++){U=a[j][2];it.scorePath(a[et][2])<it.scorePath(a[j][2])&&(et=j)}a=[a[et]]}return t===rt.TYPE_CURVE&&this.smoothCurve(a),ot.groupEnd(),a},n.prototype.smoothCurve=function(t){st.each(t,function(t){if("s1"==t[0]){var e=t[2],i=it.collinearReduction(e);t[2]=i}})},t.exports=n},function(t,e){var i={LOG_LEVEL_NONE:0,LOG_LEVEL_DEBUG:1,LOG_LEVEL_INFO:2,LOG_LEVEL_ERROR:3,level:this.LOG_LEVEL_ERROR,debug:function(t){"undefined"!=typeof console&&this.level<=this.LOG_LEVEL_DEBUG&&"function"==typeof console.debug&&console.debug(t)},info:function(t){"undefined"!=typeof console&&this.level<=this.LOG_LEVEL_INFO&&console.info(t)},error:function(t){"undefined"!=typeof console&&this.level<=this.LOG_LEVEL_ERROR&&console.error(t)},group:function(t){this.level<=this.LOG_LEVEL_INFO&&"undefined"!=typeof console&&"function"==typeof console.group&&console.group(t)},groupEnd:function(){this.level<=this.LOG_LEVEL_INFO&&"undefined"!=typeof console&&"function"==typeof console.groupEnd&&console.groupEnd()}};i.level=i.LOG_LEVEL_ERROR,t.exports=i},function(t,e){t.exports={ELEMENT_TYPE:"elementType",MODE:"mode",BACKGROUND:"backgroud",OPTIONS:"options",USERDATA:"userData",ID:"id",START_ID:"startNodeId",END_ID:"endNodeId",ALARM:"Alarm",RELATIONID:"relationId",RELATION_IMAGE:"relationImage",GROUP:"Group",CONNECTION:"connection",CHILDS:"childs",TREE_ROOT:"treeRoot",DOCKERS:"options.dockers",STYLE_LINETYPE:"style.lineType",LINEOPERATIONICON:"LineOperationIcon"}},function(t,e,i){i(85);var n=i(91),r=i(4),o=i(80);t.exports={toJson:function(t,e){var i=[];return e.eachChild(function(t){t.model&&(t instanceof o&&t.refreshModel(),i.push(t.model.option))}),t.set(n.CHILDS,i),t.option},fromJson:function(t,e,i,n,r){for(var o=0;o<i.length;o++){var s=i[o],a=t.createLinkOfPoints(s.options,s.userData);n?e.add(a):t.addNode(a)}},toDataURL:function(t,e){return function(t,e){(e=e||{}).pixelRatio=e.pixelRatio||1,e.backgroundColor=e.backgroundColor||"#FFFFFF";var i=t.storage.getDisplayList();return r.each(i,function(t){t.stopAnimation(!0)}),t.painter.getRenderedCanvas(e)}(t,e=e||{}).toDataURL("image/"+(e&&e.type||"png"))}}},function(t,e,i){var n=i(81),l=i(4),r=i(87);function o(t,e){this.lineOperations=[],this.isEdit=!0,this.connectionManager=t,this._api=e}o.prototype.addIcon=function(e,t){if(!l.find(t.lineNode.icons,function(t){return t.key===e})){var i=this.creatOperation(e,t);return this._api._getParentZr().add(i),this.bindOperation(t.lineNode),i}this.bindOperation(t.lineNode)},o.prototype.creatOperation=function(t,i){var e=n.createSymbol(i.iconPath,0,0,i.width||15,i.height||15,0,i.color||"#aaaaac");return e.key=t,e._width=i.width||15,e._isLineOperationIcon=!0,e.hide(),i.lineNode.icons.push(e),this.lineOperations.push(e),e.on("click",function(t){if(i.callback)t.data=i,t.lineNode=i.lineNode,i.callback(t);else{var e={};e.event=t,e.type="click",e.elementType="LineOperationIcon",this._api.trigger(e.type,e)}}.bind(this)),e},o.prototype.bindOperation=function(r){if(0!=this.isEdit){var o,s,t=r.middle();s=r.parent&&"SubProcess"==r.parent.nodeType?(o=t[0]+function t(e){return e.parent&&"SubProcess"==e.parent.nodeType?e.position[0]+t(e.parent):e.position[0]}(r.parent),t[1]+function t(e){return e.parent&&"SubProcess"==e.parent.nodeType?e.position[1]+t(e.parent):e.position[1]}(r.parent)):(o=t[0],t[1]);var a=l.map(r.icons,function(t){return t._width}),h=l.reduce(a,function(t,e){return t+e+10},0);l.each(r.icons,function(t,e){for(var i=0,n=0;n<e;n++)i+=a[n]+10;t.attr("position",[o+i-h/2,s+5]),t.show(),t.attachLine=r})}},o.prototype.hideAllLineOperation=function(){l.each(this.lineOperations,function(t){t.hide()})},o.prototype.addDeleteIcon=function(t,e){var i=l.defaults({iconPath:"path://"+r.DEL_SVG,width:12,height:14,lineNode:t,callback:function(t){this._api.remove(t.target.attachLine)}.bind(this)},e,!0);this.addIcon("delete",i)},o.prototype.addChangeLineTypeIcon=function(t,e){var i=l.defaults({iconPath:"path://"+r.CHANGE_LINE_TYPE_SVG,width:15,height:15,lineNode:t,callback:function(){this._api.changeSelectConnectorType()}.bind(this)},e,!0);this.addIcon("change",i)},t.exports=o},function(t,e,i){var n=i(91),r={FLOW_TYPE:"elementType",LINK:"connection",RECT:"Rect",Group:"Group",IMAGE:"Image",TEXT:"Text",CIRCLE:"Circle",SECTOR:"Sector",RING:"Ring",POLYGON:"Polygon",POLYLINE:"Polyline",LINE:"Line",BEZIERCURVE:"Beziercurve",ARC:"Arc",SCENE:"scene",setUserData:function(t,e){t.model.set(n.USERDATA,e)},getUserData:function(t){return t.model.get(n.USERDATA)},isLink:function(t){return t.get(r.FLOW_TYPE)==r.LINK},getType:function(t){return t.get(r.FLOW_TYPE)}};t.exports=r},function(t,e){function l(){}var i=5,r=2,o={setAttr:(new Image).dataset?function(t,e,i){return t.dataset[e]=i}:function(t,e,i){return t.setAttribute("data-"+e,i),i},getAttr:(new Image).dataset?function(t,e){return t.dataset[e]?t.dataset[e]:t.getAttribute("data-"+e)}:function(t,e){return t.getAttribute("data-"+e)}};function n(t){this.max=t||i,this.linkHead=null,this.linkNode=null,this.pool=[]}n.prototype.initPool=function(){var t,e,i,n;for(n=this,t=0;t<this.max;t++)i={},e=new Image,o.setAttr(e,"id",t),e.onload=function(){n.notice(n.getNode(this),"success",this),n.executeLink(this)},e.onerror=function(){var t=n.getNode(this);t.tries<r?(t.tries=t.tries+1,n.appendNode(n.createNode(t.src,t.options,t.notice,t.group,t.tries))):n.notice(t,"error",this),n.executeLink(this)},i.img=e,i.free=!0,this.pool.push(i)},n.prototype.notice=function(t,e,i){t.notice(e,i)},n.prototype.executeLink=function(t){this.linkHead?(this.setSrc(t,this.linkHead),this.shiftNode()):this.status(t,!0)},n.prototype.getFree=function(){var t,e;for(e=0,t=this.pool.length;e<t;e++)if(this.pool[e].free)return this.pool[e];return null},n.prototype.setSrc=function(t,e){this.status(t,!1),this.setNode(t,e),t.src=e.src},n.prototype.status=function(t,e){var i=o.getAttr(t,"id");i&&(this.pool[i].free=e),e&&(this.pool[i].node=null)},n.prototype.setNode=function(t,e){var i=o.getAttr(t,"id");if(i)return this.pool[i].node=e,this.pool[i].node===e},n.prototype.getNode=function(t){var e=o.getAttr(t,"id");if(e)return this.pool[e].node},n.prototype._load=function(t,e){var i,n=[],r=null,o=0,s=e.once?function(t,e){var i=this.group,n=this.options;i[t].push(e),i.success.length+i.error.length===i.count&&setTimeout(function(){n.success.call(null,i.success,i.error,i.count)},1)}:function(t,e){var i=this.options;setTimeout(function(){i[t].call(null,e)},1)},a={count:0,success:[],error:[]},h=null;for((e=e||{}).success=e.success||l,e.error=e.error||l,n=n.concat(t),a.count=n.length,o=0,i=n.length;o<i;o++)h=this.createNode(n[o],e,s,a),(r=this.getFree())?this.setSrc(r.img,h):this.appendNode(h)},n.prototype._info=function(){var t,e={},i=0,n=null;for(e.thread={},e.thread.count=this.pool.length,e.thread.free=0,e.task={},i=e.task.count=0,t=this.pool.length;i<t;i++)this.pool[i].free&&(e.thread.free=e.thread.free+1);if(n=this.linkHead)for(e.task.count=e.task.count+1;n.next;)e.task.count=e.task.count+1,n=n.next;return e},n.prototype.createNode=function(t,e,i,n,r){var o={};return o.src=t,o.options=e,o.notice=i,o.group=n,o.tries=r||0,o},n.prototype.appendNode=function(t){this.linkHead?this.linkNode.next=t:this.linkHead=t,this.linkNode=t},n.prototype.shiftNode=function(){this.linkHead&&(this.linkHead=this.linkHead.next||null)};t.exports={initImagePool:function(t){var e=new n(t);return e.initPool(),{load:function(){e._load.apply(e,arguments)},info:function(){return e._info.call(e)}}}}},function(t,e){Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");function e(){}function i(){return r.apply(this instanceof e&&t?this:t||window,n.concat(Array.prototype.slice.call(arguments)))}var n=Array.prototype.slice.call(arguments,1),r=this;return e.prototype=this.prototype,i.prototype=new e,i}),"remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)}),String.prototype.endsWith||(String.prototype.endsWith=function(t,e){var i=this.toString();("number"!=typeof e||!isFinite(e)||Math.floor(e)!==e||e>i.length)&&(e=i.length),e-=t.length;var n=i.indexOf(t,e);return-1!==n&&n===e})},function(t,e,i){i(98),(0,i(67).registerPainter)("vml",i(100))},function(t,e,i){var n=i(49),G=i(14).applyTransform,r=i(26),N=i(19),k=i(25),E=i(24),o=i(23),s=i(7),a=i(44),h=i(45),l=i(6),c=i(29),z=i(41),H=i(99),V=c.CMD,Y=Math.round,q=Math.sqrt,u=Math.abs,W=Math.cos,j=Math.sin,F=Math.max;if(!n.canvasSupported){function U(t){t.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px;",t.coordsize=Q+","+Q,t.coordorigin="0,0"}function I(t,e,i){return"rgb("+[t,e,i].join(",")+")"}function X(t,e){e&&t&&e.parentNode!==t&&t.appendChild(e)}function f(t,e){e&&t&&e.parentNode===t&&t.removeChild(e)}function Z(t,e,i){return 1e5*(parseFloat(t)||0)+1e3*(parseFloat(e)||0)+i}function L(t,e){return"string"==typeof t?0<=t.lastIndexOf("%")?parseFloat(t)/100*e:parseFloat(t):t}function D(t,e,i){var n=N.parse(e);i=+i,isNaN(i)&&(i=1),n&&(t.color=I(n[0],n[1],n[2]),t.opacity=i*n[3])}function R(t,e,i,n){var r="fill"==e,o=t.getElementsByTagName(e)[0];null!=i[e]&&"none"!==i[e]&&(r||!r&&i.lineWidth)?(t[r?"filled":"stroked"]="true",i[e]instanceof z&&f(t,o),o=o||H.createNode(e),r?function(t,e,i){var n,r,o=e.fill;if(null!=o)if(o instanceof z){var s,a=0,h=[0,0],l=0,c=1,u=i.getBoundingRect(),f=u.width,d=u.height;if("linear"===o.type){s="gradient";var p=i.transform,g=[o.x*f,o.y*d],v=[o.x2*f,o.y2*d];p&&(G(g,g,p),G(v,v,p));var y=v[0]-g[0],m=v[1]-g[1];(a=180*Math.atan2(y,m)/Math.PI)<0&&(a+=360),a<1e-6&&(a=0)}else{s="gradientradial";g=[o.x*f,o.y*d],p=i.transform;var x=i.scale,_=f,b=d;h=[(g[0]-u.x)/_,(g[1]-u.y)/b],p&&G(g,g,p),_/=x[0]*Q,b/=x[1]*Q;var w=F(_,b);l=0/w,c=2*o.r/w-l}var P=o.colorStops.slice();P.sort(function(t,e){return t.offset-e.offset});for(var T=P.length,C=[],S=[],M=0;M<T;M++){var k=P[M],E=(n=k.color,void 0,r=N.parse(n),[I(r[0],r[1],r[2]),r[3]]);S.push(k.offset*c+l+" "+E[0]),0!==M&&M!==T-1||C.push(E)}if(2<=T){var L=C[0][0],R=C[1][0],O=C[0][1]*e.opacity,A=C[1][1]*e.opacity;t.type=s,t.method="none",t.focus="100%",t.angle=a,t.color=L,t.color2=R,t.colors=S.join(","),t.opacity=A,t.opacity2=O}"radial"===s&&(t.focusposition=h.join(","))}else D(t,o,e.opacity)}(o,i,n):function(t,e){null!=e.lineDash&&(t.dashstyle=e.lineDash.join(" ")),null==e.stroke||e.stroke instanceof z||D(t,e.stroke,e.opacity)}(o,i),X(t,o)):(t[r?"filled":"stroked"]="false",f(t,o))}var K="progid:DXImageTransform.Microsoft",Q=21600,J=10800,$=[[],[],[]];l.prototype.brushVML=function(t){var e=this.style,i=this._vmlEl;i||(i=H.createNode("shape"),U(i),this._vmlEl=i),R(i,"fill",e,this),R(i,"stroke",e,this);var n=this.transform,r=null!=n,o=i.getElementsByTagName("stroke")[0];if(o){var s=e.lineWidth;if(r&&!e.strokeNoScale){var a=n[0]*n[3]-n[1]*n[2];s*=q(u(a))}o.weight=s+"px"}var h=this.path||(this.path=new c);this.__dirtyPath&&(h.beginPath(),this.buildPath(h,this.shape),h.toStatic(),this.__dirtyPath=!1),i.path=function(t,e){var i,n,r,o,s,a,h=V.M,l=V.C,c=V.L,u=V.A,f=V.Q,d=[],p=t.data,g=t.len();for(o=0;o<g;){switch(n="",i=0,r=p[o++]){case h:n=" m ",i=1,s=p[o++],a=p[o++],$[0][0]=s,$[0][1]=a;break;case c:n=" l ",i=1,s=p[o++],a=p[o++],$[0][0]=s,$[0][1]=a;break;case f:case l:n=" c ",i=3;var v,y,m=p[o++],x=p[o++],_=p[o++],b=p[o++];r===f?(_=((v=_)+2*m)/3,b=((y=b)+2*x)/3,m=(s+2*m)/3,x=(a+2*x)/3):(v=p[o++],y=p[o++]),$[0][0]=m,$[0][1]=x,$[1][0]=_,$[1][1]=b,s=$[2][0]=v,a=$[2][1]=y;break;case u:var w=0,P=0,T=1,C=1,S=0;e&&(w=e[4],P=e[5],T=q(e[0]*e[0]+e[1]*e[1]),C=q(e[2]*e[2]+e[3]*e[3]),S=Math.atan2(-e[1]/C,e[0]/T));var M=p[o++],k=p[o++],E=p[o++],L=p[o++],R=p[o++]+S,O=p[o++]+R+S;o++;var A=p[o++],N=M+W(R)*E,z=k+j(R)*L,I=(m=M+W(O)*E,x=k+j(O)*L,A?" wa ":" at ");Math.abs(N-m)<1e-4&&(.01<Math.abs(O-R)?A&&(N+=.0125):Math.abs(z-k)<1e-4?A&&N<M||!A&&M<N?x-=.0125:x+=.0125:A&&z<k||!A&&k<z?m+=.0125:m-=.0125),d.push(I,Y(((M-E)*T+w)*Q-J),",",Y(((k-L)*C+P)*Q-J),",",Y(((M+E)*T+w)*Q-J),",",Y(((k+L)*C+P)*Q-J),",",Y((N*T+w)*Q-J),",",Y((z*C+P)*Q-J),",",Y((m*T+w)*Q-J),",",Y((x*C+P)*Q-J)),s=m,a=x;break;case V.R:var D=$[0],B=$[1];D[0]=p[o++],D[1]=p[o++],B[0]=D[0]+p[o++],B[1]=D[1]+p[o++],e&&(G(D,D,e),G(B,B,e)),D[0]=Y(D[0]*Q-J),B[0]=Y(B[0]*Q-J),D[1]=Y(D[1]*Q-J),B[1]=Y(B[1]*Q-J),d.push(" m ",D[0],",",D[1]," l ",B[0],",",D[1]," l ",B[0],",",B[1]," l ",D[0],",",B[1]);break;case V.Z:d.push(" x ")}if(0<i){d.push(n);for(var H=0;H<i;H++){var F=$[H];e&&G(F,F,e),d.push(Y(F[0]*Q-J),",",Y(F[1]*Q-J),H<i-1?",":"")}}}return d.join("")}(h,this.transform),i.style.zIndex=Z(this.zlevel,this.z,this.z2),X(t,i),null!=e.text?this.drawRectText(t,this.getBoundingRect()):this.removeRectText(t)},l.prototype.onRemove=function(t){f(t,this._vmlEl),this.removeRectText(t)},l.prototype.onAdd=function(t){X(t,this._vmlEl),this.appendRectText(t)};a.prototype.brushVML=function(t){var e,i,n=this.style,r=n.image;if(function(t){return"object"==typeof t&&t.tagName&&"IMG"===t.tagName.toUpperCase()}(r)){var o=r.src;if(o===this._imageSrc)e=this._imageWidth,i=this._imageHeight;else{var s=r.runtimeStyle,a=s.width,h=s.height;s.width="auto",s.height="auto",e=r.width,i=r.height,s.width=a,s.height=h,this._imageSrc=o,this._imageWidth=e,this._imageHeight=i}r=o}else r===this._imageSrc&&(e=this._imageWidth,i=this._imageHeight);if(r){var l=n.x||0,c=n.y||0,u=n.width,f=n.height,d=n.sWidth,p=n.sHeight,g=n.sx||0,v=n.sy||0,y=d&&p,m=this._vmlEl;m||(m=H.doc.createElement("div"),U(m),this._vmlEl=m);var x,_=m.style,b=!1,w=1,P=1;if(this.transform&&(x=this.transform,w=q(x[0]*x[0]+x[1]*x[1]),P=q(x[2]*x[2]+x[3]*x[3]),b=x[1]||x[2]),b){var T=[l,c],C=[l+u,c],S=[l,c+f],M=[l+u,c+f];G(T,T,x),G(C,C,x),G(S,S,x),G(M,M,x);var k=F(T[0],C[0],S[0],M[0]),E=F(T[1],C[1],S[1],M[1]),L=[];L.push("M11=",x[0]/w,",","M12=",x[2]/P,",","M21=",x[1]/w,",","M22=",x[3]/P,",","Dx=",Y(l*w+x[4]),",","Dy=",Y(c*P+x[5])),_.padding="0 "+Y(k)+"px "+Y(E)+"px 0",_.filter=K+".Matrix("+L.join("")+", SizingMethod=clip)"}else x&&(l=l*w+x[4],c=c*P+x[5]),_.filter="",_.left=Y(l)+"px",_.top=Y(c)+"px";var R=this._imageEl,O=this._cropEl;R||(R=H.doc.createElement("div"),this._imageEl=R);var A=R.style;if(y){if(e&&i)A.width=Y(w*e*u/d)+"px",A.height=Y(P*i*f/p)+"px";else{var N=new Image,z=this;N.onload=function(){N.onload=null,e=N.width,i=N.height,A.width=Y(w*e*u/d)+"px",A.height=Y(P*i*f/p)+"px",z._imageWidth=e,z._imageHeight=i,z._imageSrc=r},N.src=r}O||((O=H.doc.createElement("div")).style.overflow="hidden",this._cropEl=O);var I=O.style;I.width=Y((u+g*u/d)*w),I.height=Y((f+v*f/p)*P),I.filter=K+".Matrix(Dx="+-g*u/d*w+",Dy="+-v*f/p*P+")",O.parentNode||m.appendChild(O),R.parentNode!=O&&O.appendChild(R)}else A.width=Y(w*u)+"px",A.height=Y(P*f)+"px",m.appendChild(R),O&&O.parentNode&&(m.removeChild(O),this._cropEl=null);var D="",B=n.opacity;B<1&&(D+=".Alpha(opacity="+Y(100*B)+") "),D+=K+".AlphaImageLoader(src="+r+", SizingMethod=scale)",A.filter=D,m.style.zIndex=Z(this.zlevel,this.z,this.z2),X(t,m),null!=n.text&&this.drawRectText(t,this.getBoundingRect())}},a.prototype.onRemove=function(t){f(t,this._vmlEl),this._vmlEl=null,this._cropEl=null,this._imageEl=null,this.removeRectText(t)},a.prototype.onAdd=function(t){X(t,this._vmlEl),this.appendRectText(t)};var d,O="normal",A={},B=0,tt=document.createElement("div");k.$override("measureText",function(t,e){var i=H.doc;d||((d=i.createElement("div")).style.cssText="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;",H.doc.body.appendChild(d));try{d.style.font=e}catch(t){}return d.innerHTML="",d.appendChild(i.createTextNode(t)),{width:d.offsetWidth}});function p(t,e,i,n){var r=this.style;this.__dirty&&E.normalizeTextStyle(r,!0);var o=r.text;if(null!=o&&(o+=""),o){if(r.rich){var s=k.parseRichText(o,r);o=[];for(var a=0;a<s.lines.length;a++){for(var h=s.lines[a].tokens,l=[],c=0;c<h.length;c++)l.push(h[c].text);o.push(l.join(""))}o=o.join("\n")}var u,f,d=r.textAlign,p=r.textVerticalAlign,g=function(t){var e=A[t];if(!e){100<B&&(B=0,A={});var i,n=tt.style;try{n.font=t,i=n.fontFamily.split(",")[0]}catch(t){}e={style:n.fontStyle||O,variant:n.fontVariant||O,weight:n.fontWeight||O,size:0|parseFloat(n.fontSize||12),family:i||"Microsoft YaHei"},A[t]=e,B++}return e}(r.font),v=g.style+" "+g.variant+" "+g.weight+" "+g.size+'px "'+g.family+'"';i=i||k.getBoundingRect(o,v,d,p);var y=this.transform;if(y&&!n&&(et.copy(e),et.applyTransform(y),e=et),n)u=e.x,f=e.y;else{var m=r.textPosition,x=r.textDistance;if(m instanceof Array)u=e.x+L(m[0],e.width),f=e.y+L(m[1],e.height),d=d||"left";else{var _=k.adjustTextPositionOnRect(m,e,x);u=_.x,f=_.y,d=d||_.textAlign,p=p||_.textVerticalAlign}}u=k.adjustTextX(u,i.width,d),f=k.adjustTextY(f,i.height,p),f+=i.height/2;var b,w,P,T=H.createNode,C=this._textVmlEl;C?w=(b=(P=C.firstChild).nextSibling).nextSibling:(C=T("line"),b=T("path"),w=T("textpath"),P=T("skew"),w.style["v-text-align"]="left",U(C),b.textpathok=!0,w.on=!0,C.from="0 0",C.to="1000 0.05",X(C,P),X(C,b),X(C,w),this._textVmlEl=C);var S=[u,f],M=C.style;y&&n?(G(S,S,y),P.on=!0,P.matrix=y[0].toFixed(3)+","+y[2].toFixed(3)+","+y[1].toFixed(3)+","+y[3].toFixed(3)+",0,0",P.offset=(Y(S[0])||0)+","+(Y(S[1])||0),P.origin="0 0",M.left="0px",M.top="0px"):(P.on=!1,M.left=Y(u)+"px",M.top=Y(f)+"px"),w.string=function(t){return String(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;")}(o);try{w.style.font=v}catch(t){}R(C,"fill",{fill:r.textFill,opacity:r.opacity},this),R(C,"stroke",{stroke:r.textStroke,opacity:r.opacity,lineDash:r.lineDash},this),C.style.zIndex=Z(this.zlevel,this.z,this.z2),X(t,C)}}function g(t){f(t,this._textVmlEl),this._textVmlEl=null}function v(t){X(t,this._textVmlEl)}for(var et=new r,y=[o,s,a,l,h],m=0;m<y.length;m++){var x=y[m].prototype;x.drawRectText=p,x.removeRectText=g,x.appendRectText=v}h.prototype.brushVML=function(t){var e=this.style;null!=e.text?this.drawRectText(t,{x:e.x||0,y:e.y||0,width:0,height:0},this.getBoundingRect(),!0):this.removeRectText(t)},h.prototype.onRemove=function(t){this.removeRectText(t)},h.prototype.onAdd=function(t){this.appendRectText(t)}}},function(t,e,i){var n,r=i(49),o="urn:schemas-microsoft-com:vml",s="undefined"==typeof window?null:window,a=!1,h=s&&s.document;if(h&&!r.canvasSupported)try{h.namespaces.zrvml||h.namespaces.add("zrvml",o),n=function(t){return h.createElement("<zrvml:"+t+' class="zrvml">')}}catch(t){n=function(t){return h.createElement("<"+t+' xmlns="'+o+'" class="zrvml">')}}e.doc=h,e.createNode=function(t){return n(t)},e.initVML=function(){if(!a&&h){a=!0;var t=h.styleSheets;t.length<31?h.createStyleSheet().addRule(".zrvml","behavior:url(#default#VML)"):t[0].addRule(".zrvml","behavior:url(#default#VML)")}}},function(t,e,i){var n=i(21),s=i(99),r=i(4).each;function o(t){return parseInt(t,10)}function a(t,e){s.initVML(),this.root=t,this.storage=e;var i=document.createElement("div"),n=document.createElement("div");i.style.cssText="display:inline-block;overflow:hidden;position:relative;width:300px;height:150px;",n.style.cssText="position:absolute;left:0;top:0;",t.appendChild(i),this._vmlRoot=n,this._vmlViewport=i,this.resize();var r=e.delFromStorage,o=e.addToStorage;e.delFromStorage=function(t){r.call(e,t),t&&t.onRemove&&t.onRemove(n)},e.addToStorage=function(t){t.onAdd&&t.onAdd(n),o.call(e,t)},this._firstPaint=!0}a.prototype={constructor:a,getType:function(){return"vml"},getViewportRoot:function(){return this._vmlViewport},getViewportRootOffset:function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},refresh:function(){var t=this.storage.getDisplayList(!0,!0);this._paintList(t)},_paintList:function(t){for(var e=this._vmlRoot,i=0;i<t.length;i++){var n=t[i];n.invisible||n.ignore?(n.__alreadyNotVisible||n.onRemove(e),n.__alreadyNotVisible=!0):(n.__alreadyNotVisible&&n.onAdd(e),n.__alreadyNotVisible=!1,n.__dirty&&(n.beforeBrush&&n.beforeBrush(),(n.brushVML||n.brush).call(n,e),n.afterBrush&&n.afterBrush())),n.__dirty=!1}this._firstPaint&&(this._vmlViewport.appendChild(e),this._firstPaint=!1)},resize:function(t,e){t=null==t?this._getWidth():t,e=null==e?this._getHeight():e;if(this._width!=t||this._height!=e){this._width=t,this._height=e;var i=this._vmlViewport.style;i.width=t+"px",i.height=e+"px"}},dispose:function(){this.root.innerHTML="",this._vmlRoot=this._vmlViewport=this.storage=null},getWidth:function(){return this._width},getHeight:function(){return this._height},clear:function(){this._vmlViewport&&this.root.removeChild(this._vmlViewport)},_getWidth:function(){var t=this.root,e=t.currentStyle;return(t.clientWidth||o(e.width))-o(e.paddingLeft)-o(e.paddingRight)|0},_getHeight:function(){var t=this.root,e=t.currentStyle;return(t.clientHeight||o(e.height))-o(e.paddingTop)-o(e.paddingBottom)|0}},r(["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","toDataURL","pathToImage"],function(t){a.prototype[t]=function(t){return function(){n('In IE8.0 VML mode painter not support method "'+t+'"')}}(t)});var h=a;t.exports=h}],i.c=r,i.p="",i(0);function i(t){if(r[t])return r[t].exports;var e=r[t]={exports:{},id:t,loaded:!1};return n[t].call(e.exports,e,e.exports,i),e.loaded=!0,e.exports}var n,r});
//# sourceMappingURL=fish-topo-link.min.js.map
